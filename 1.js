"use strict";(self.webpackChunk_dev_web=self.webpackChunk_dev_web||[]).push([[1],{8479:(e,t,a)=>{a.d(t,{B:()=>y,Z:()=>w});var l=a(2784),n=a(5062),r=a.n(n),o=a(9386),i=a(5449),s=a(1128),c=a(3964),u=a(2048),m=a(5176),d=a(7122),f=a(9530),p=a(5096),g=a(2779),h=a.n(g),E=a(1231);function b({position:e,children:t,setPosition:a}){const n=(0,l.useRef)(null),r=(0,l.useMemo)((()=>({dragend(){const e=n.current;null!=e&&a(e.getLatLng())}})),[]);return l.createElement(o.J,{draggable:!0,eventHandlers:r,position:e,ref:n},l.createElement(i.u,null,t))}function v(){const e=(0,s.Sx)(),t=(0,l.useCallback)((t=>{t.preventDefault(),e.locate({setView:!0})}),[e]);return l.createElement("div",{className:"leaflet-top leaflet-left",style:{top:80,fontSize:16}},l.createElement("div",{className:"leaflet-control-locate leaflet-bar leaflet-control"},l.createElement("a",{className:"leaflet-bar-part leaflet-bar-part-single",title:"Locate",href:"#",onClick:t},l.createElement(f.G,{icon:p.KS0}))))}function y(e){return(0,l.useMemo)((()=>r().featureGroup(e.map((({position:{lat:e,lng:t}})=>r().marker([e,t])))).getBounds()),[])}function w({bounds:e,center:t,setCenter:n,list:o}){(0,l.useEffect)((()=>{delete r().Icon.Default.prototype._getIconUrl,r().Icon.Default.mergeOptions({iconRetinaUrl:a(1963).Z,iconUrl:a(379).Z,shadowUrl:a(6179).Z})}),[]);const[i,s]=(0,l.useState)(null),f=(0,l.useMemo)((()=>l.createElement(c.h,{bounds:e,whenCreated:s,zoom:13,className:h()(E.Z.Map)},l.createElement(u.I,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),l.createElement(b,{position:t,setPosition:n},`${t.lat},${t.lng}`),o.map((({i:e,id:a,position:n,name:r,item:o})=>l.createElement(m.c,{key:e,center:n,pathOptions:{color:"purple"}},l.createElement(d.G,{minWidth:90},l.createElement("section",null,l.createElement("header",null,`[${a}] ${r} (${t.distanceTo(n).toFixed(0)/1e3} km)`)))))),l.createElement(v,null))),[o,t]);return l.createElement("div",{className:h()(E.Z.Layout)},f)}},4001:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A});var l=a(2784),n=a(357),r=a(1927),o=a.n(r),i=a(5843),s=a(2779),c=a.n(s),u=a(7831);const m=(0,i.BYU)().domain([0,10]).range(["red","blue"]),{width:d,height:f,left:p,right:g,top:h,bottom:E}={width:250,height:250,left:40,right:40,top:40,bottom:40},b={left:40,right:20,top:20,bottom:60},v=({xDomain:e,tickCount:t})=>{const a=(0,l.useRef)(null);return(0,l.useLayoutEffect)((()=>{const l=(0,i.BYU)().domain(e).range([p,d-g]),n=(0,i.LLu)(l).ticks(t).tickSizeOuter(0);(0,i.Ys)(a.current).call(n)}),[p,g,t,d,e]),l.createElement("g",{transform:`translate(0, ${f-E})`,ref:a})},y=({yDomain:e,tickCount:t})=>{const a=(0,l.useRef)(null);return(0,l.useLayoutEffect)((()=>{const l=(0,i.BYU)().domain(e).range([f-E,h]),n=(0,i.y4O)(l).ticks(t).tickSizeOuter(0);(0,i.Ys)(a.current).call(n)}),[E,f,t,h,e]),l.createElement("g",{transform:`translate(${p}, 0)`,ref:a})},w=({keys:e,xDomain:t})=>{const a=(0,l.useRef)(null);return(0,l.useLayoutEffect)((()=>{const l=(0,i.BYU)().domain(t).range([p,d-g]);(0,i.Ys)(a.current).selectAll("text").data(e).join("text").attr("x",((e,t)=>l(t+1))).attr("fill",((e,t)=>m(t))).text((e=>e))}),[e,p,g,d,t]),l.createElement("g",{transform:`translate(0, ${f-20})`,ref:a})};function k({list:e}){const t=(0,l.useRef)(null),a=[["data1",30,200,100,400,150,250],["data2",50,20,10,40,15,25]],n=Math.max(a[0].length,a[1].length,0),r=[0,n],o=[0,500],s=[a[0][0],a[1][0]];return(0,l.useLayoutEffect)((()=>{(0,i.Ys)(t.current).selectAll("*").remove();const e=(0,i.BYU)().domain(r).range([p,d-g]),l=(0,i.BYU)().domain(o).range([f-E,h]),n=(0,i.jvg)().x(((t,a)=>e(a))).y((e=>l(e))),s=e=>e.transition().duration(1e3).ease(i.Nyw).attrTween("stroke-dasharray",(function(){const e=this.getTotalLength();return console.log((0,i.sXR)(`0, ${e}`,`${e}, ${e}`)),(0,i.sXR)(`0, ${e}`,`${e}, ${e}`)}));a.forEach((([e,...a],l)=>{(0,i.Ys)(t.current).append("path").datum(a).attr("fill","none").attr("stroke",(()=>m(l))).attr("stroke-width",1.5).attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("d",n).call(s)}))}),[E,a,f,p,g,h,d,r,o]),l.createElement("div",{className:c()(u.Z.Chart)},l.createElement("svg",{width:d,height:f,viewBox:`0, 0, ${d}, ${f}`},l.createElement("g",{ref:t}),l.createElement(v,{margin:b,xDomain:r,tickCount:n}),l.createElement(y,{margin:b,yDomain:o,tickCount:5}),l.createElement(w,{keys:s,xDomain:[0,a.length+1]})))}var C=a(8479),S=a(4772),x=a(9757);function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e}).apply(this,arguments)}const j=[1,3,5,10,20,50,100,500],P=[0,1e5,2e5,3e5,4e5,5e5,6e5,7e5,8e5,9e5,1e6],O={"":"",N:"New",U:"Used"},N=[...Array(15)].map(((e,t)=>(new Date).getFullYear()-t)).reverse(),T=(0,n.k)((async e=>{const t=await fetch(`api/vehicles/data.json?${e}`);return await t.json().then((({$list:e})=>({results:e,options:e.reduce(((e,t)=>["bodyType","brand","color","emissionStandard","fuel","series","seriesCode","modelCode","transmission"].reduce(((e,a)=>({...e,[a]:Object.assign({},e[a],"object"==typeof t[a]?{[t[a].id]:t[a].label}:{[t[a]]:t[a]})})),e)),{})}))).then((({options:e,...t})=>(Object.keys(e).forEach((t=>Object.assign(e,{[t]:Object.entries(e[t]).sort((([e],[t])=>String(e)>String(t)?1:-1)).reduce(((e,[t,a])=>Object.assign(e,{[t]:a})),{})}))),{options:e,...t})))}));function Y({images:e}){return e.length?l.createElement("div",{className:x.Z.Gallery},e.map(((e,t)=>l.createElement("img",{key:t,src:e,alt:`Image #${t+1}`,referrerPolicy:"no-referrer"})))):null}function Z({...e}){return l.createElement("button",e)}function z({color:e}){return l.createElement("a",{className:x.Z.Color,style:{backgroundColor:e.code},title:e.label})}function B({href:e,...t}){const a="#"===e[0];return l.createElement("a",$({href:e,target:a?void 0:"_blank",rel:a?void 0:"noopener noreferrer"},t))}function L({version:e="v1"}){const{results:t,options:a}=T.read(e),[n,r]=(0,l.useState)(""),[i]=(0,S.Z)(n),s=(0,l.useCallback)((({target:e})=>r(e.value)),[]),[c,u]=(0,l.useState)((()=>Object.keys(a).reduce(((e,t)=>Object.assign(e,{[t]:""})),{}))),m=(0,l.useCallback)((({target:e})=>u((t=>({...t,[e.name]:e.value})))),[]),[d,f]=(0,l.useState)(""),p=(0,l.useCallback)((({target:e})=>f(e.value)),[]),[g,h]=(0,l.useState)(j[j.length-1]),E=(0,l.useCallback)((({target:e})=>h(Number(e.value))),[]),[b,v]=(0,l.useState)(P[0]),[y,w]=(0,l.useState)(P[P.length-1]),$=(0,l.useCallback)((({target:e})=>w((t=>{const a=Number(e.value);return v(a),t<a?a:t}))),[]),L=(0,l.useCallback)((({target:e})=>v((t=>{const a=Number(e.value);return w(a),a>t?t:a}))),[]),[A,M]=(0,l.useState)(N[0]),[U,R]=(0,l.useState)(N[N.length-1]),G=(0,l.useCallback)((({target:e})=>R((t=>{const a=Number(e.value);return M(a),t<a?a:t}))),[]),I=(0,l.useCallback)((({target:e})=>M((t=>{const a=Number(e.value);return R(a),a>t?t:a}))),[]),K=(0,l.useCallback)((({target:e})=>{const a=Number(e.value),l=e=>[e.capacity,e.powerHP,e.consumptionFuel,e.emission,e.newPrice,e.optionsPrice,e.productionYear,e.age,e.mileage,e.transactionalPrice,e.warranty],n=o()(t.map(l));console.table(n.knn(l(t.find((e=>e.id===a)))).slice(0,10).map((e=>t[e])).map((e=>[e.id,e.title,e.capacity,e.powerHP,e.consumptionFuel,e.emission,e.newPrice,e.optionsPrice,e.productionYear,e.age,e.mileage,e.transactionalPrice,e.warranty])))}),[]);console.log({options:a,results:t});const D=(0,l.useMemo)((()=>t.map(((e,t)=>{const{id:a,dealer:{name:l,lat:n,lng:r}}=e;return{i:t,id:a,position:{lat:n,lng:r},name:l,item:e}})).filter((({item:e})=>(e.title.toLowerCase().match(i)||i.trim()===String(e.id))&&["",e.isNew?"N":"U"].includes(d)&&b<=e.transactionalPrice&&e.transactionalPrice<=y&&A<=e.productionYear&&e.productionYear<=U&&-1===Object.entries(c).findIndex((([t,a])=>![String("object"==typeof e[t]?e[t].id:e[t]),""].includes(a)))))),[t,i,d,c,A,U,b,y]),F=(0,C.B)(D.length?D:[{position:{lat:52.232855,lng:20.921111}}]),[_,H]=(0,l.useState)((()=>F.getCenter())),V=(0,l.useMemo)((()=>D.filter((({position:e})=>_.distanceTo(e)<1e3*g))),[D,_,g]);return l.createElement("div",null,l.createElement(C.Z,{bounds:F,center:_,setCenter:H,list:V}),l.createElement(k,{list:D}),l.createElement("fieldset",null,l.createElement("div",null,l.createElement("label",null,l.createElement("span",null,"Type"),l.createElement("select",{value:d,onChange:p},Object.entries(O).map((([e,t])=>l.createElement("option",{key:e,value:e},t))))),l.createElement("label",null,l.createElement("span",null,"Search"),l.createElement("input",{type:"search",value:n,onChange:s})),l.createElement("label",null,l.createElement("span",null,"Radius"),l.createElement("input",{type:"range",list:"range-list",min:j[0],max:j[j.length-1],value:g,onChange:E}),l.createElement("datalist",{id:"range-list"},j.map((e=>l.createElement("option",{key:e,value:e,label:[1,25,100].includes(e)?`${e} km`:void 0})))),l.createElement("span",null,`max ${g} km`))),l.createElement("div",null,l.createElement("label",null,l.createElement("span",null,"Year From"),l.createElement("input",{type:"range",list:"year-list",min:N[0],max:N[N.length-1],value:A,onChange:G}),l.createElement("datalist",{id:"year-list"},N.map((e=>l.createElement("option",{key:e,value:e,label:[0,2010,2015,2020].includes(e)?`${e}`:void 0}))))),l.createElement("label",null,l.createElement("span",null,"Year To"),l.createElement("input",{type:"range",list:"year-list",min:N[0],max:N[N.length-1],value:U,onChange:I}),l.createElement("span",null,`${A}-${U}`))),l.createElement("div",null,l.createElement("label",null,l.createElement("span",null,"Price From"),l.createElement("input",{type:"range",list:"price-list",min:P[0],max:P[P.length-1],value:b,onChange:$}),l.createElement("datalist",{id:"price-list"},P.map((e=>l.createElement("option",{key:e,value:e,label:[0,1e5,2e5,3e5,4e5,5e5].includes(e)?`${e} pln`:void 0}))))),l.createElement("label",null,l.createElement("span",null,"Price To"),l.createElement("input",{type:"range",list:"price-list",min:P[0],max:P[P.length-1],value:y,onChange:L}),l.createElement("span",null,`${b}-${y} pln`))),Object.entries(c).map((([e,t],n)=>l.createElement("div",{key:n},l.createElement("label",null,l.createElement("span",null,e),l.createElement("select",{name:e,value:t,onChange:m},l.createElement("option",{value:""},"--"),Object.entries(a[e]).map((([e,t])=>l.createElement("option",{key:e,value:e},t))))))))),l.createElement("div",null,`Found ${D.length} vehicles out of a total of ${t.length}`),l.createElement("ol",null,D.slice(0,100).map((({item:e})=>e)).map((({id:e,title:t,brand:a,series:n={},seriesCode:r,bodyType:o,modelCode:i,fuel:s,color:c,transmission:u,capacity:m,consumptionFuel:d,emissionStandard:f,emissionMeasurementStandard:p,emission:g,powerHP:h,productionYear:E,registration:b,age:v,mileage:y,transactionalPrice:w,newPrice:k,warranty:C,created:S,images:$,imagesLastChanged:j},P)=>l.createElement("li",{key:P,className:x.Z.Row},l.createElement(Y,{images:[...Array($)].slice(0,3).map(((t,a,l,n="322/255b28ffdad35cd984ff32f30da17158")=>`//najlepszeoferty.bmw.pl/uzywane/api/v1/ems/bmw-used-pl_PL/vehicle/${n}/${e}-${a}`))}),l.createElement("ul",null,l.createElement("li",null,l.createElement(z,{color:c}),l.createElement(B,{href:`//najlepszeoferty.bmw.pl/uzywane/wyszukaj/opis-szczegolowy/${e}/`},`[${e}] ${t}`),l.createElement(Z,{onClick:K,value:e},"Compare")),l.createElement("li",null,"[",r,"] ",a.label," ",n.label," ",o.label," ",s.label," ",u.label),l.createElement("li",null,"[",i,"] capacity: ",m," powerHP: ",h," ","consumptionFuel: ",d," emissionStandard:"," ",f.label," ",p," ",g),l.createElement("li",null,"productionYear: ",E," age: ",v," mileage:"," ",y," registration:"," ",b?b.split("T")[0]:"-"),l.createElement("li",null,"transactionalPrice: ",w," newPrice:"," ",k," warranty: ",C),l.createElement("li",null,S," (imagesLastChanged: ",j,")")))))))}function A(){return l.createElement("div",{className:x.Z.Section},l.createElement("h2",null,"Vehicles"),l.createElement(L,null))}},4772:(e,t,a)=>{a.d(t,{Z:()=>n});var l=a(2784);function n(e){const[t,a]=(0,l.useState)(e),n=(0,l.useRef)();return(0,l.useEffect)((()=>(clearTimeout(n.current),n.current=setTimeout((()=>a(e.toLowerCase())),400),()=>{clearTimeout(n.current)})),[e]),[t]}},6583:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var l=a(9601),n=a.n(l),r=a(2609),o=a.n(r)()(n());o.push([e.id,".jym2UAfwYghQzKOP2VHa{height:50vh;border:2px solid red}.jym2UAfwYghQzKOP2VHa svg{width:100%;height:100%}",""]),o.locals={Chart:"jym2UAfwYghQzKOP2VHa"};const i=o},1617:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var l=a(9601),n=a.n(l),r=a(2609),o=a.n(r),i=a(9138),s=o()(n());s.i(i.Z),s.push([e.id,".vXpyyqKMf2Eg0uZBGb3A{height:75vh;border:2px solid red}.vXpyyqKMf2Eg0uZBGb3A header{font-weight:bold}",""]),s.locals={Map:"vXpyyqKMf2Eg0uZBGb3A"};const c=s},303:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var l=a(9601),n=a.n(l),r=a(2609),o=a.n(r)()(n());o.push([e.id,".dnNulWhTs84wB_yi0tu2{color:green}.eZcT7zT7zcKeynqlJ5cC{clear:both}.LihBxmStNILK5SsWSml4{display:inline-block;width:1em;height:1em;border:2px solid #000;border-radius:50%}.WV27lBhC9zjxECQGlM6O{float:left;width:200px;height:150px;overflow-x:auto;display:flex;flex-direction:row;scroll-snap-type:x mandatory}.WV27lBhC9zjxECQGlM6O img{max-width:100%;scroll-snap-align:center}",""]),o.locals={Section:"dnNulWhTs84wB_yi0tu2",Row:"eZcT7zT7zcKeynqlJ5cC",Color:"LihBxmStNILK5SsWSml4",Gallery:"WV27lBhC9zjxECQGlM6O"};const i=o},7831:(e,t,a)=>{a.d(t,{Z:()=>y});var l=a(6062),n=a.n(l),r=a(4036),o=a.n(r),i=a(6793),s=a.n(i),c=a(7892),u=a.n(c),m=a(1173),d=a.n(m),f=a(2464),p=a.n(f),g=a(6583),h={};h.styleTagTransform=p(),h.setAttributes=u(),h.insert=s().bind(null,"head"),h.domAPI=o(),h.insertStyleElement=d();var E=n()(g.default,h);if(!g.default.locals||e.hot.invalidate){var b=!g.default.locals,v=b?g:g.default.locals;e.hot.accept(6583,(t=>{g=a(6583),function(e,t,a){if(!e&&t||e&&!t)return!1;var l;for(l in e)if((!a||"default"!==l)&&e[l]!==t[l])return!1;for(l in t)if(!(a&&"default"===l||e[l]))return!1;return!0}(v,b?g:g.default.locals,b)?(v=b?g:g.default.locals,E(g.default)):e.hot.invalidate()}))}e.hot.dispose((function(){E()}));const y=g.default&&g.default.locals?g.default.locals:void 0},1231:(e,t,a)=>{a.d(t,{Z:()=>y});var l=a(6062),n=a.n(l),r=a(4036),o=a.n(r),i=a(6793),s=a.n(i),c=a(7892),u=a.n(c),m=a(1173),d=a.n(m),f=a(2464),p=a.n(f),g=a(1617),h={};h.styleTagTransform=p(),h.setAttributes=u(),h.insert=s().bind(null,"head"),h.domAPI=o(),h.insertStyleElement=d();var E=n()(g.default,h);if(!g.default.locals||e.hot.invalidate){var b=!g.default.locals,v=b?g:g.default.locals;e.hot.accept(1617,(t=>{g=a(1617),function(e,t,a){if(!e&&t||e&&!t)return!1;var l;for(l in e)if((!a||"default"!==l)&&e[l]!==t[l])return!1;for(l in t)if(!(a&&"default"===l||e[l]))return!1;return!0}(v,b?g:g.default.locals,b)?(v=b?g:g.default.locals,E(g.default)):e.hot.invalidate()}))}e.hot.dispose((function(){E()}));const y=g.default&&g.default.locals?g.default.locals:void 0},9757:(e,t,a)=>{a.d(t,{Z:()=>y});var l=a(6062),n=a.n(l),r=a(4036),o=a.n(r),i=a(6793),s=a.n(i),c=a(7892),u=a.n(c),m=a(1173),d=a.n(m),f=a(2464),p=a.n(f),g=a(303),h={};h.styleTagTransform=p(),h.setAttributes=u(),h.insert=s().bind(null,"head"),h.domAPI=o(),h.insertStyleElement=d();var E=n()(g.default,h);if(!g.default.locals||e.hot.invalidate){var b=!g.default.locals,v=b?g:g.default.locals;e.hot.accept(303,(t=>{g=a(303),function(e,t,a){if(!e&&t||e&&!t)return!1;var l;for(l in e)if((!a||"default"!==l)&&e[l]!==t[l])return!1;for(l in t)if(!(a&&"default"===l||e[l]))return!1;return!0}(v,b?g:g.default.locals,b)?(v=b?g:g.default.locals,E(g.default)):e.hot.invalidate()}))}e.hot.dispose((function(){E()}));const y=g.default&&g.default.locals?g.default.locals:void 0}}]);