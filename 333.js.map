{"version":3,"file":"333.js","mappings":"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","sources":["webpack://@dev/web/../../node_modules/use-asset/dist/index.js","webpack://@dev/web/../../node_modules/fast-deep-equal/index.js"],"sourcesContent":["import deepEqual from 'fast-deep-equal';\n\nconst globalCache = [];\n\nfunction handleAsset(fn, cache, args, lifespan = 0, preload = false) {\n  for (const entry of cache) {\n    // Find a match\n    if (deepEqual(args, entry.args)) {\n      // If we're pre-loading and the element is present, just return\n      if (preload) return; // If an error occurred, throw\n\n      if (entry.error) throw entry.error; // If a response was successful, return\n\n      if (entry.response) return entry.response; // If the promise is still unresolved, throw\n\n      throw entry.promise;\n    }\n  } // The request is new or has changed.\n\n\n  const entry = {\n    args,\n    promise: // Make the promise request.\n    fn(...args) // Response can't be undefined or else the loop above wouldn't be able to return it\n    // This is for promises that do not return results (delays for instance)\n    .then(response => entry.response = response != null ? response : true).catch(e => entry.error = e != null ? e : 'unknown error').then(() => {\n      if (lifespan > 0) {\n        setTimeout(() => {\n          const index = cache.indexOf(entry);\n          if (index !== -1) cache.splice(index, 1);\n        }, lifespan);\n      }\n    })\n  };\n  cache.push(entry);\n  if (!preload) throw entry.promise;\n}\n\nfunction clear(cache, ...args) {\n  if (args === undefined || args.length === 0) cache.splice(0, cache.length);else {\n    const entry = cache.find(entry => deepEqual(args, entry.args));\n\n    if (entry) {\n      const index = cache.indexOf(entry);\n      if (index !== -1) cache.splice(index, 1);\n    }\n  }\n}\n\nfunction createAsset(fn, lifespan = 0) {\n  const cache = [];\n  return {\n    /**\n     * @throws Suspense Promise if asset is not yet ready\n     * @throws Error if the promise rejected for some reason\n     */\n    read: (...args) => handleAsset(fn, cache, args, lifespan),\n    preload: (...args) => void handleAsset(fn, cache, args, lifespan, true),\n    clear: (...args) => clear(cache, ...args),\n    peek: (...args) => {\n      var _cache$find;\n\n      return (_cache$find = cache.find(entry => deepEqual(args, entry.args))) == null ? void 0 : _cache$find.response;\n    }\n  };\n}\n\nfunction useAsset(fn, ...args) {\n  return handleAsset(fn, globalCache, args, useAsset.lifespan);\n}\n\nuseAsset.lifespan = 0;\n\nuseAsset.clear = (...args) => clear(globalCache, ...args);\n\nuseAsset.preload = (fn, ...args) => void handleAsset(fn, globalCache, args, useAsset.lifespan, true);\n\nuseAsset.peek = (...args) => {\n  var _globalCache$find;\n\n  return (_globalCache$find = globalCache.find(entry => deepEqual(args, entry.args))) == null ? void 0 : _globalCache$find.response;\n};\n\nexport { createAsset, useAsset };\n","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n"],"names":["globalCache","handleAsset","fn","cache","args","lifespan","preload","entry","error","response","promise","then","catch","e","setTimeout","index","indexOf","splice","push","clear","undefined","length","find","createAsset","read","peek","_cache$find","useAsset","_globalCache$find","module","exports","equal","a","b","constructor","i","keys","Array","isArray","RegExp","source","flags","valueOf","Object","prototype","toString","hasOwnProperty","call","key"],"ignoreList":[],"sourceRoot":""}