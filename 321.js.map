{"version":3,"file":"321.js","mappings":"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","sources":["webpack://@dev/web/./src/components/Link/index.tsx","webpack://@dev/web/./src/components/Map/styles.module.scss?c4f3","webpack://@dev/web/./src/components/Map/index.tsx","webpack://@dev/web/./src/containers/Stations/Map.module.scss?c01e","webpack://@dev/web/./src/containers/Stations/Map.tsx","webpack://@dev/web/./src/containers/Stations/styles.module.scss?005d","webpack://@dev/web/./src/containers/Stations/index.tsx","webpack://@dev/web/./src/containers/useDebounce.ts","webpack://@dev/web/./src/components/Map/styles.module.scss","webpack://@dev/web/./src/containers/Stations/Map.module.scss","webpack://@dev/web/./src/containers/Stations/styles.module.scss"],"sourcesContent":["import React, { CSSProperties, MouseEventHandler } from \"react\";\n\nexport function Link({\n  href = \"#\",\n  ...props\n}: {\n  children: React.ReactChild;\n  href?: string;\n  onClick?: MouseEventHandler;\n  rel?: string;\n  style?: CSSProperties;\n  target?: string;\n}) {\n  const hash = href[0] === \"#\";\n\n  return (\n    <a\n      href={href}\n      target={hash ? undefined : \"_blank\"}\n      rel={hash ? undefined : \"noopener noreferrer\"}\n      {...props}\n    />\n  );\n}\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./styles.module.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./styles.module.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport L from \"leaflet\";\nimport { Marker, Tooltip, useMap } from \"react-leaflet\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faCrosshairs } from \"@fortawesome/free-solid-svg-icons\";\n// import { faMapMarkerAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport cx from \"classnames\";\nimport styles from \"./styles.module.scss\";\n\nexport function DisplayPosition({ map }: { map: L.Map }) {\n  const [initial] = useState(() => ({\n    position: map.getCenter(),\n    zoom: map.getZoom(),\n  }));\n  const [position, setPosition] = useState(map.getCenter());\n\n  const onClick = useCallback(() => {\n    map.setView(initial.position, initial.zoom);\n  }, [map]);\n\n  const onMove = useCallback(() => {\n    setPosition(map.getCenter());\n  }, [map]);\n\n  const onLocationFound = useCallback((event) => {\n    const { latlng, radius } = event;\n    console.log({ latlng, radius });\n  }, []);\n\n  useEffect(() => {\n    map.on(\"locationfound\", onLocationFound).on(\"move\", onMove);\n    return () => {\n      map.off(\"locationfound\", onLocationFound).off(\"move\", onMove);\n    };\n  }, [map, onMove]);\n\n  return (\n    <div className={cx(styles.DisplayPosition)}>\n      latitude: {position.lat.toFixed(4)}, longitude: {position.lng.toFixed(4)}{\" \"}\n      <button onClick={onClick}>Reset</button>\n      <button\n        onClick={() =>\n          map.locate({\n            setView: true,\n          })\n        }\n      >\n        Locate\n      </button>\n    </div>\n  );\n}\n\nexport function DraggableMarker({\n  position,\n  children,\n  setPosition,\n}: {\n  position: L.LatLng;\n  children: React.ReactNode;\n  setPosition: Function;\n}) {\n  const markerRef = useRef<L.Marker>(null);\n  const eventHandlers = useMemo(\n    () => ({\n      dragend() {\n        const marker = markerRef.current;\n        if (marker != null) {\n          setPosition(marker.getLatLng());\n        }\n      },\n    }),\n    []\n  );\n\n  return (\n    <Marker\n      draggable\n      eventHandlers={eventHandlers}\n      position={position}\n      ref={markerRef}\n    >\n      <Tooltip>{children}</Tooltip>\n    </Marker>\n  );\n}\n\nexport function LocateControl() {\n  const map = useMap();\n\n  const onLocate = useCallback(\n    (event) => {\n      event.preventDefault();\n      map.locate({\n        setView: true,\n      });\n    },\n    [map]\n  );\n\n  return (\n    <div className=\"leaflet-top leaflet-left\" style={{ top: 80, fontSize: 16 }}>\n      <div className=\"leaflet-control-locate leaflet-bar leaflet-control\">\n        <a\n          className=\"leaflet-bar-part leaflet-bar-part-single\"\n          title=\"Locate\"\n          href=\"#\"\n          onClick={onLocate}\n        >\n          <FontAwesomeIcon icon={faCrosshairs} />\n        </a>\n      </div>\n    </div>\n  );\n}\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./Map.module.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./Map.module.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { MouseEvent, useEffect, useMemo } from \"react\";\nimport L from \"leaflet\";\nimport { Marker, MapContainer, TileLayer, Popup } from \"react-leaflet\";\nimport { DraggableMarker, LocateControl } from \"../../components/Map\";\nimport cx from \"classnames\";\nimport styles from \"./Map.module.scss\";\n\nfunction Table({ data }) {\n  return (\n    <div>\n      <table>\n        <tbody>\n          <tr>\n            <td></td>\n            {Object.keys(data.header).map((name, key) => (\n              <th key={key}>{name}</th>\n            ))}\n          </tr>\n          {data.rows\n            .sort((a, b) => b.date - a.date)\n            .map(({ date, list }, key) => (\n              <tr key={key}>\n                <th>{new Date(date).toISOString().split(\"T\")[0]}</th>\n                {Object.keys(data.header).map((name, key) => (\n                  <td key={key}>{list[name]}</td>\n                ))}\n              </tr>\n            ))}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n\nexport function useBounds(list: { position: L.LatLng }[]) {\n  return useMemo(\n    () =>\n      L.featureGroup(\n        list.map(({ position: { lat, lng } }) => L.marker([lat, lng]))\n      ).getBounds(),\n    []\n  );\n}\n\nexport default function Map({ bounds, center, setCenter, list, zoom = 12 }) {\n  // https://stackoverflow.com/questions/40719689/how-to-include-leaflet-css-in-a-react-app-with-webpack\n  useEffect(() => {\n    delete L.Icon.Default.prototype._getIconUrl;\n    L.Icon.Default.mergeOptions({\n      iconRetinaUrl: require(\"leaflet/dist/images/marker-icon-2x.png\").default,\n      iconUrl: require(\"leaflet/dist/images/marker-icon.png\").default,\n      shadowUrl: require(\"leaflet/dist/images/marker-shadow.png\").default,\n    });\n  }, []);\n\n  const displayMap = useMemo(\n    () => (\n      <MapContainer\n        bounds={bounds}\n        center={center}\n        zoom={zoom}\n        className={cx(styles.Map)}\n      >\n        <TileLayer\n          attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        />\n        <DraggableMarker position={center} setPosition={setCenter}>\n          {`${center.lat},${center.lng}`}\n        </DraggableMarker>\n        {list.map(({ i, id, position, name, item }: any) => (\n          <Marker\n            key={i}\n            position={position}\n            icon={\n              new L.Icon({\n                iconUrl: item.map_img\n                  ? `https://www.autocentrum.pl${item.map_img}`\n                  : require(\"leaflet/dist/images/marker-icon.png\").default,\n                iconSize: [30, 40],\n              })\n            }\n          >\n            <Popup minWidth={90}>\n              <section>\n                <header>\n                  {`[${id}] ${[name].concat(item.address || []).join(\" - \")} (${\n                    center.distanceTo(position).toFixed(0) / 1000\n                  } km)`}\n                </header>\n                <Table\n                  data={Object.entries(\n                    Object.assign(\n                      {\n                        [item._updated || item._created]:\n                          item.petrol_list.reduce(\n                            (list, { type, price }) =>\n                              Object.assign(list, { [type]: price }),\n                            {}\n                          ),\n                      },\n                      item._history\n                    )\n                  ).reduce(\n                    (table, [time, list]: any) =>\n                      Object.assign(table, {\n                        header: Object.keys(list).reduce(\n                          (header, item) =>\n                            Object.assign(header, { [item]: item }),\n                          table.header\n                        ),\n                        rows: table.rows.concat([\n                          {\n                            date: Number(time),\n                            list,\n                          },\n                        ]),\n                      }),\n                    {\n                      header: {},\n                      rows: [],\n                    }\n                  )}\n                />\n              </section>\n            </Popup>\n          </Marker>\n        ))}\n        <LocateControl />\n      </MapContainer>\n    ),\n    [list, center]\n  );\n\n  // https://react-leaflet.js.org/docs/start-setup/\n  return (\n    <div\n      className={cx(styles.Layout)}\n      onClick={(e) =>\n        ((a) => a && a.getAttribute(\"href\") === \"#close\" && e.preventDefault())(\n          (e.target as Element).closest(\"a\")\n        )\n      }\n    >\n      {displayMap}\n    </div>\n  );\n}\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./styles.module.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./styles.module.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { useCallback, useMemo, useState } from \"react\";\nimport { format } from \"date-fns\";\nimport { createAsset } from \"use-asset\";\nimport Chart from \"../../components/ZoomableLineChart\";\nimport Map, { useBounds } from \"./Map\";\nimport { Link } from \"../../components/Link\";\nimport useDebounce from \"../useDebounce\";\nimport cx from \"classnames\";\nimport styles from \"./styles.module.scss\";\n\nimport type { StationItem } from \"@dev/cli/src/services/StationService/types\";\n\nconst RADIUS_LIST = [1, 3, 5, 10, 20, 50, 100, 500];\nconst PRICE_LIST = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10];\nconst SORT_BY = {\n  _distance: 1,\n  _petrol_pb: 1,\n  \"_petrol_pb+\": 1,\n  _petrol_on: 1,\n  \"_petrol_on+\": 1,\n  network_name: 1,\n  address: 1,\n  _created: -1,\n  _updated: -1,\n};\nconst TYPES = {\n  \"\": \"\",\n  pb: \"pb\",\n  \"pb+\": \"pb+\",\n  on: \"on\",\n  \"on+\": \"on+\",\n  lpg: \"lpg\",\n  \"lpg+\": \"lpg+\",\n};\n\nenum Compare {\n  LT = \"LT\",\n  GT = \"GT\",\n  EQ = \"EQ\",\n}\n\nconst compare = (history: any, k: number, p: number) => {\n  if (history[k][1][p] && history[k + 1] && history[k + 1][1][p]) {\n    const a = Number(history[k][1][p]);\n    const b = Number(history[k + 1][1][p]);\n    return a === b ? Compare.EQ : a > b ? Compare.GT : Compare.LT;\n  }\n  return null;\n};\n\n// https://github.com/pmndrs/use-asset#dealing-with-async-assets\nconst asset = createAsset(async (version) => {\n  const res = await fetch(`api/stations/data.json?${version}`);\n  return await res.json().then(({ results }) => ({\n    results: results.map(({ _history = {}, ...item }: StationItem) => ({\n      ...item.petrol_list.reduce(\n        (list, { type, price }) =>\n          Object.assign(list, { [`_petrol_${type}`]: Number(price) || 0 }),\n        {}\n      ),\n      _history,\n      ...item,\n    })),\n  }));\n});\n\nfunction Data({ version = \"v1\" }) {\n  const { results } = asset.read(version); // As many cache keys as you need\n  const [toggle, setToggle] = useState<number[]>([]);\n\n  const [search, setSearch] = useState(\"\");\n  const [filter] = useDebounce(search);\n\n  const onChangeSearch = useCallback(\n    ({ target }) => setSearch(target.value),\n    []\n  );\n\n  const [criteria, setCriteria] = useState(() => ({\n    // search: \"\",\n    type: Object.keys(TYPES)[1],\n    radius: 5,\n    priceFrom: PRICE_LIST[0],\n    priceTo: PRICE_LIST[PRICE_LIST.length - 1],\n    dateFrom: format(Date.now() - 1000 * 3600 * 24 * 30, \"yyyy-MM-dd\"),\n    dateTo: format(Date.now(), \"yyyy-MM-dd\"),\n    sortBy: Object.keys(SORT_BY)[0] as keyof typeof SORT_BY,\n  }));\n\n  const onChangePriceFrom = useCallback(\n    ({ target }) =>\n      setCriteria(({ priceTo, ...criteria }) => {\n        const priceFrom = Number(target.value);\n        return {\n          ...criteria,\n          priceFrom,\n          priceTo: priceTo < priceFrom ? priceFrom : priceTo,\n        };\n      }),\n    []\n  );\n  const onChangePriceTo = useCallback(\n    ({ target }) =>\n      setCriteria(({ priceFrom, ...criteria }) => {\n        const priceTo = Number(target.value);\n        return {\n          ...criteria,\n          priceFrom: priceTo > priceFrom ? priceFrom : priceTo,\n          priceTo,\n        };\n      }),\n    []\n  );\n\n  const onChangeCreatedFrom = useCallback(\n    ({ target }) =>\n      setCriteria(({ dateTo, ...criteria }) => {\n        const dateFrom = target.value;\n        return {\n          ...criteria,\n          dateFrom,\n          dateTo: dateTo < dateFrom ? dateFrom : dateTo,\n        };\n      }),\n    []\n  );\n  const onChangeCreatedTo = useCallback(\n    ({ target }) =>\n      setCriteria(({ dateFrom, ...criteria }) => {\n        const dateTo = target.value;\n        return {\n          ...criteria,\n          dateFrom: dateTo > dateFrom ? dateFrom : dateTo,\n          dateTo,\n        };\n      }),\n    []\n  );\n\n  console.log({ results });\n\n  const list = useMemo(\n    () =>\n      results\n        .map((item: any, i: string) => {\n          const { station_id: id, x: lat, y: lng, network_name: name } = item;\n          return {\n            i,\n            id,\n            position: { lat, lng },\n            name,\n            item,\n          };\n        })\n        .filter(\n          ({\n            name,\n            item: { petrol_list, address = \"\", _created, _updated = _created },\n          }: any) =>\n            (name.toLowerCase().match(filter) ||\n              address.toLowerCase().match(filter)) &&\n            (criteria.type\n              ? ((item) =>\n                  Boolean(item) &&\n                  criteria.priceFrom <= item.price &&\n                  item.price <= criteria.priceTo)(\n                  petrol_list.find((item: any) => item.type === criteria.type)\n                )\n              : true) &&\n            new Date(`${criteria.dateFrom} 00:00:00`).getTime() <= _updated &&\n            _updated <= new Date(`${criteria.dateTo} 23:59:59`).getTime()\n        ),\n    [\n      results,\n      filter,\n      criteria.type,\n      criteria.priceFrom,\n      criteria.priceTo,\n      criteria.dateFrom,\n      criteria.dateTo,\n    ]\n  );\n\n  const middle = useBounds([{ position: { lat: 52.1793, lng: 21.0498 } }]);\n\n  const [center, setCenter] = useState(() => middle.getCenter());\n\n  const nearby = useMemo(\n    () =>\n      list\n        .map(({ position, item, ...rest }: any) => ({\n          position,\n          item: {\n            ...item,\n            _distance: center.distanceTo(position),\n          },\n          history: item.petrol\n            ? [[String(item._updated), item.petrol]]\n                .concat(Object.entries(item._history).reverse())\n                .map(([updated, petrol]) => [\n                  updated,\n                  Object.keys(TYPES)\n                    .filter(Boolean)\n                    .map((type) => petrol[type]),\n                ])\n            : [],\n          ...rest,\n        }))\n        .filter(({ item }: any) => item._distance < criteria.radius * 1000),\n    [list, center, criteria.radius]\n  );\n\n  const sorted = useMemo(\n    () =>\n      nearby.sort(\n        (a, b) =>\n          SORT_BY[criteria.sortBy] *\n          (a.item[criteria.sortBy] === b.item[criteria.sortBy]\n            ? 0\n            : (a.item[criteria.sortBy] || 0) > (b.item[criteria.sortBy] || 0)\n            ? 1\n            : -1)\n      ),\n    [nearby, criteria.sortBy]\n  );\n\n  const chart = useMemo(\n    () =>\n      nearby\n        .map(({ history, item: { network_name, address } }) =>\n          history.map(([date, values]) => ({\n            group: `${network_name} | ${address}`,\n            date: new Date(Number(date)),\n            value: Number(\n              values[Object.keys(TYPES).indexOf(criteria.type) - 1]\n            ),\n          }))\n        )\n        .flat()\n        .filter(({ value }) => Boolean(value))\n        .sort(\n          (a, b) => new Date(a.date).getTime() - new Date(b.date).getTime()\n        ),\n    [nearby, criteria.type]\n  );\n\n  const bounds = useBounds(nearby);\n\n  return (\n    <div>\n      <Map\n        bounds={bounds}\n        center={center}\n        setCenter={setCenter}\n        list={nearby}\n      />\n      <Chart list={chart} />\n      <fieldset>\n        <div>\n          <label>\n            <span>Search</span>\n            <input type=\"search\" value={search} onChange={onChangeSearch} />\n          </label>\n          <label>\n            <span>Radius</span>\n            <input\n              type=\"range\"\n              list=\"range-list\"\n              min={RADIUS_LIST[0]}\n              max={RADIUS_LIST[RADIUS_LIST.length - 1]}\n              value={criteria.radius}\n              onChange={useCallback(\n                ({ target }) =>\n                  setCriteria((criteria) => ({\n                    ...criteria,\n                    radius: Number(target.value),\n                  })),\n                []\n              )}\n            />\n            <datalist id=\"range-list\">\n              {RADIUS_LIST.map((value) => (\n                <option\n                  key={value}\n                  value={value}\n                  label={\n                    [1, 25, 100].includes(value) ? `${value} km` : undefined\n                  }\n                ></option>\n              ))}\n            </datalist>\n            <span>{`max ${criteria.radius} km`}</span>\n          </label>\n        </div>\n        <div>\n          <label>\n            <span>Type</span>\n            <select\n              value={criteria.type}\n              onChange={useCallback(\n                ({ target }) =>\n                  setCriteria((criteria) => ({\n                    ...criteria,\n                    type: target.value,\n                  })),\n                []\n              )}\n            >\n              {Object.entries(TYPES).map(([value, label]) => (\n                <option key={value} value={value}>\n                  {label}\n                </option>\n              ))}\n            </select>\n          </label>\n          <label>\n            <span>Sort</span>\n            <select\n              value={criteria.sortBy}\n              onChange={useCallback(\n                ({ target }) =>\n                  setCriteria((criteria) => ({\n                    ...criteria,\n                    sortBy: target.value,\n                  })),\n                []\n              )}\n            >\n              {Object.entries(SORT_BY).map(([value]) => (\n                <option key={value} value={value}>\n                  {value}\n                </option>\n              ))}\n            </select>\n          </label>\n        </div>\n        <div>\n          <label>\n            <span>Price From</span>\n            <input\n              type=\"range\"\n              list=\"price-list\"\n              min={PRICE_LIST[0]}\n              max={PRICE_LIST[PRICE_LIST.length - 1]}\n              value={criteria.priceFrom}\n              onChange={onChangePriceFrom}\n            />\n            <datalist id=\"price-list\">\n              {PRICE_LIST.map((value) => (\n                <option\n                  key={value}\n                  value={value}\n                  label={\n                    [0, 1, 2, 3, 4, 5].includes(value)\n                      ? `${value} pln/l`\n                      : undefined\n                  }\n                ></option>\n              ))}\n            </datalist>\n          </label>\n          <label>\n            <span>Price To</span>\n            <input\n              type=\"range\"\n              list=\"price-list\"\n              min={PRICE_LIST[0]}\n              max={PRICE_LIST[PRICE_LIST.length - 1]}\n              value={criteria.priceTo}\n              onChange={onChangePriceTo}\n            />\n            <span>{`${criteria.priceFrom}-${criteria.priceTo} pln/l`}</span>\n          </label>\n        </div>\n        <div>\n          <label>\n            <span>Date From</span>\n            <input\n              type=\"date\"\n              value={criteria.dateFrom}\n              onChange={onChangeCreatedFrom}\n            />\n          </label>\n          <label>\n            <span>Date To</span>\n            <input\n              type=\"date\"\n              value={criteria.dateTo}\n              onChange={onChangeCreatedTo}\n            />\n          </label>\n        </div>\n      </fieldset>\n      <table className={styles.Table}>\n        <tbody>\n          <tr>\n            <th>#</th>\n            {Object.keys(TYPES).map((key) => (\n              <th\n                key={key}\n                className={cx(key === criteria.type && styles.selected)}\n              >\n                {key ? (\n                  <Link\n                    onClick={useCallback(\n                      (e) => (\n                        e.preventDefault(),\n                        setCriteria((criteria) => ({\n                          ...criteria,\n                          type: key,\n                        }))\n                      ),\n                      []\n                    )}\n                  >\n                    {key}\n                  </Link>\n                ) : (\n                  <div>name</div>\n                )}\n              </th>\n            ))}\n            <th>updated</th>\n            <th></th>\n          </tr>\n          {sorted.map(({ i, name, item, history }: any, key: string) =>\n            history\n              .slice(0, toggle.includes(i) ? Infinity : 1)\n              .map(([updated, petrol], k) => (\n                <tr key={`${key}-${k}`}>\n                  <td>{k === 0 && i}</td>\n                  {k === 0 && (\n                    <td\n                      rowSpan={toggle.includes(i) ? history.length : undefined}\n                    >\n                      <div className={styles.Station}>\n                        {name} <address>{item.address}</address>\n                      </div>\n                    </td>\n                  )}\n                  {petrol.map((price, p) => (\n                    <td\n                      key={p}\n                      className={cx(\n                        p === Object.keys(TYPES).indexOf(criteria.type) - 1 &&\n                          styles.selected\n                      )}\n                    >\n                      <div\n                        className={cx(\n                          styles.Price,\n                          ((type) =>\n                            type &&\n                            {\n                              [Compare.GT]: styles.gt,\n                              [Compare.LT]: styles.lt,\n                              [Compare.EQ]: styles.eq,\n                            }[type])(compare(history, k, p))\n                        )}\n                      >\n                        {price ?? \"-\"}\n                      </div>\n                    </td>\n                  ))}\n                  <td>{format(Number(updated), \"yyyy-MM-dd\")}</td>\n                  <td>\n                    {history.length > 0 &&\n                      k === 0 &&\n                      (toggle.includes(i) ? (\n                        <Link\n                          onClick={(e) => (\n                            e.preventDefault(),\n                            setToggle((toggle) => toggle.filter((k) => i !== k))\n                          )}\n                        >\n                          hide\n                        </Link>\n                      ) : (\n                        <Link\n                          onClick={(e) => (\n                            e.preventDefault(),\n                            setToggle((toggle) => toggle.concat(i))\n                          )}\n                        >\n                          show\n                        </Link>\n                      ))}\n                  </td>\n                </tr>\n              ))\n          )}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n\nexport default function Section() {\n  return (\n    <div className={styles.Section}>\n      <h2>Stations</h2>\n      <Data />\n    </div>\n  );\n}\n","import { useEffect, useRef, useState } from \"react\";\n\nexport default function useDebounce(search) {\n  const [filter, setFilter] = useState(search);\n\n  const r = useRef();\n\n  useEffect(() => {\n    clearTimeout(r.current);\n    r.current = setTimeout(() => setFilter(search.toLowerCase()), 400);\n    return () => {\n      clearTimeout(r.current);\n    };\n  }, [search]);\n\n  return [filter];\n}\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_AT_RULE_IMPORT_0___ from \"-!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/leaflet/dist/leaflet.css\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n___CSS_LOADER_EXPORT___.i(___CSS_LOADER_AT_RULE_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cStyiPbxd0HI9tByMkkY{height:75vh;border:2px solid red}.cStyiPbxd0HI9tByMkkY header{font-weight:bold}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/containers/Stations/Map.module.scss\"],\"names\":[],\"mappings\":\"AAKA,sBACE,WAAA,CACA,oBAAA,CAEA,6BACE,gBAAA\",\"sourcesContent\":[\"@import \\\"~leaflet/dist/leaflet.css\\\";\\n\\n.Layout {\\n}\\n\\n.Map {\\n  height: 75vh;\\n  border: 2px solid red;\\n\\n  header {\\n    font-weight: bold;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"Map\": \"cStyiPbxd0HI9tByMkkY\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".JTHop_UDHoyJmmN4pc6w{color:blue}.dPxlg3RLmLdxM8tY5oVh address{color:#6495ed;font-size:small}._WIYpu90vPFYsczMHLOG{border-collapse:collapse}._WIYpu90vPFYsczMHLOG .rUrDTnaISdjPBFi3X9DF{background:#def}._WIYpu90vPFYsczMHLOG td{vertical-align:top;padding:.25em}.DcVUc3zpN2nOrt53beGa{color:#000;text-align:right;width:3em}.DcVUc3zpN2nOrt53beGa.WEurT7giwHcxfqx9pq5j{color:blue}.DcVUc3zpN2nOrt53beGa.BFgoN81dqd3ExjHY8CVf{color:red}.DcVUc3zpN2nOrt53beGa.BFgoN81dqd3ExjHY8CVf::before{content:\\\"↖\\\"}.DcVUc3zpN2nOrt53beGa.op0NQ6Zaqs_zmLmX4NIM{color:green}.DcVUc3zpN2nOrt53beGa.op0NQ6Zaqs_zmLmX4NIM::before{content:\\\"↘\\\"}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/containers/Stations/styles.module.scss\"],\"names\":[],\"mappings\":\"AAAA,sBAAA,UACE,CAAA,8BAGA,aACE,CAAA,eACA,CAAA,sBAGJ,wBACE,CAAA,4CAEA,eACE,CAAA,yBAGF,kBACE,CAAA,aACA,CAAA,sBAGJ,UACE,CAAA,gBACA,CAAA,SACA,CAAA,2CACA,UACE,CAAA,2CAEF,SACE,CAAA,mDACA,WACE,CAAA,2CAGJ,WACE,CAAA,mDACA,WACE\",\"sourcesContent\":[\".Section {\\n  color: blue;\\n}\\n.Station {\\n  address {\\n    color: cornflowerblue;\\n    font-size: small;\\n  }\\n}\\n.Table {\\n  border-collapse: collapse;\\n\\n  .selected {\\n    background: #def;\\n  }\\n\\n  td {\\n    vertical-align: top;\\n    padding: 0.25em;\\n  }\\n}\\n.Price {\\n  color: black;\\n  text-align: right;\\n  width: 3em;\\n  &.eq {\\n    color: blue;\\n  }\\n  &.gt {\\n    color: red;\\n    &::before {\\n      content: \\\"\\\\2196\\\";\\n    }\\n  }\\n  &.lt {\\n    color: green;\\n    &::before {\\n      content: \\\"\\\\2198\\\";\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"Section\": \"JTHop_UDHoyJmmN4pc6w\",\n\t\"Station\": \"dPxlg3RLmLdxM8tY5oVh\",\n\t\"Table\": \"_WIYpu90vPFYsczMHLOG\",\n\t\"selected\": \"rUrDTnaISdjPBFi3X9DF\",\n\t\"Price\": \"DcVUc3zpN2nOrt53beGa\",\n\t\"eq\": \"WEurT7giwHcxfqx9pq5j\",\n\t\"gt\": \"BFgoN81dqd3ExjHY8CVf\",\n\t\"lt\": \"op0NQ6Zaqs_zmLmX4NIM\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["Link","href","props","hash","target","undefined","rel","options","DraggableMarker","position","children","setPosition","markerRef","useRef","eventHandlers","useMemo","dragend","marker","current","getLatLng","Marker","draggable","ref","Tooltip","LocateControl","map","useMap","onLocate","useCallback","event","preventDefault","locate","setView","className","style","top","fontSize","title","onClick","icon","faCrosshairs","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","Table","data","Object","keys","header","name","key","rows","sort","a","b","date","list","Date","toISOString","split","useBounds","L","lat","lng","getBounds","Map","bounds","center","setCenter","zoom","useEffect","iconRetinaUrl","require","iconUrl","shadowUrl","displayMap","MapContainer","cx","styles","TileLayer","attribution","url","D","i","id","item","map_img","iconSize","Popup","minWidth","concat","address","join","distanceTo","toFixed","entries","assign","_updated","_created","petrol_list","reduce","type","price","_history","table","time","Number","e","closest","getAttribute","Compare","RADIUS_LIST","PRICE_LIST","SORT_BY","_distance","_petrol_pb","_petrol_on","network_name","TYPES","pb","on","lpg","compare","history","k","p","EQ","GT","LT","asset","createAsset","version","fetch","res","json","then","results","Data","read","useState","toggle","setToggle","search","setSearch","filter","useDebounce","onChangeSearch","value","radius","priceFrom","priceTo","length","dateFrom","format","now","dateTo","sortBy","criteria","setCriteria","onChangePriceFrom","onChangePriceTo","onChangeCreatedFrom","onChangeCreatedTo","console","log","station_id","x","y","toLowerCase","match","find","Boolean","getTime","middle","getCenter","nearby","rest","petrol","String","reverse","updated","sorted","chart","values","group","indexOf","flat","onChange","min","max","label","includes","slice","Infinity","rowSpan","Section","setFilter","r","clearTimeout","setTimeout","___CSS_LOADER_EXPORT___","push","module","locals"],"sourceRoot":""}