{"version":3,"file":"495.js","mappings":"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","sources":["webpack://@dev/web/./src/components/Calculator/index.tsx"],"sourcesContent":["import React, { useCallback, useEffect, useState } from \"react\";\nimport Big from \"big.js\";\n\nconst TAR_RV_DEV = require(\"./assets/tarRvDev.json\");\n\nconst METADATA = Object.assign({\n  taxes: 0.23,\n  brand: \"bmw\",\n  brandId: 1,\n  stockType: \"car\",\n  stockCategory: \"used\",\n  calculator: {\n    yucAgeLimit: 25,\n    ageLimit: 85,\n    mileageLimit: 150000,\n    residualValueAdjust: 0.15,\n    residualValueAdjustLimit: 1,\n    tarRvDevVersion: 1618561672,\n  },\n});\n\ntype Vehicle = {\n  age: number;\n  transactionalPrice: number;\n  comfortLeaseProduct: {\n    type: string;\n  };\n  leaseProduct: {\n    type: string;\n  };\n  mileage: number;\n  accessoriesPrice: number;\n  isYUC: boolean;\n  productionYear: number;\n  newPrice: number;\n  optionsPrice: number;\n  registration: string;\n};\n\nclass Product {\n  vehicle;\n\n  constructor(vehicle: Vehicle) {\n    this.vehicle = vehicle;\n  }\n\n  get interactive() {\n    return true;\n  }\n  get taxesFactor() {\n    return Big()(METADATA.taxes).plus(1).toNumber();\n  }\n  get vehicleAge() {\n    return this.vehicle.age;\n  }\n  get transactionalPriceGross() {\n    return this.vehicle.transactionalPrice;\n  }\n  get transactionalPrice() {\n    return this.toNet(this.transactionalPriceGross);\n  }\n  get interestRate() {\n    var t = this.lastIndexLessOrEqual(\n      this.product.interestRates,\n      \"term\",\n      this.term\n    );\n    return this.product.interestRates[t].value;\n  }\n  get interestRatePerMonth() {\n    return Big()(this.interestRate).div(12).toNumber();\n  }\n  get downPaymentMinGross() {\n    return Big()(this.transactionalPriceGross)\n      .times(this.product.downPaymentLimits.min)\n      .div(this.downPaymentStepGross)\n      .round(0, 3)\n      .times(this.downPaymentStepGross)\n      .toNumber();\n  }\n  get downPaymentStepGross() {\n    var t = this.product.downPaymentLimits.step || 1;\n    return t < 1 ? Big()(this.transactionalPriceGross).times(t).toNumber() : t;\n  }\n  get downPaymentDefaultGross() {\n    return Big()(this.transactionalPriceGross)\n      .times(this.product.downPaymentLimits.default)\n      .div(this.downPaymentStepGross)\n      .round(0, 1)\n      .times(this.downPaymentStepGross)\n      .toNumber();\n  }\n  get downPayment() {\n    return this.toNet(this.downPaymentGross);\n  }\n  get termMin() {\n    return Big()(this.product.termLimits.min)\n      .div(this.termStep)\n      .round(0, 3)\n      .times(this.termStep)\n      .toNumber();\n  }\n  get termStep() {\n    return this.product.termLimits.step || 1;\n  }\n  get termDefault() {\n    var t = Big()(this.product.termLimits.default)\n      .div(this.termStep)\n      .round(0, 3)\n      .times(this.termStep);\n    return t.gt(this.termMax) ? this.termMax : t.toNumber();\n  }\n  get financedAmount() {\n    return Big()(this.transactionalPrice).minus(this.downPayment).toNumber();\n  }\n  get installment() {\n    var t = Big()(this.interestRatePerMonth),\n      e = Big()(this.financedAmount);\n    if (t.eq(0)) return e.plus(this.residualValue).div(this.term).toNumber();\n    var n = t.plus(1).pow(this.term);\n    return e\n      .times(n)\n      .minus(this.residualValue)\n      .times(t)\n      .div(n.minus(1))\n      .toNumber();\n  }\n  get installmentGross() {\n    return this.toGross(this.installment);\n  }\n  lastIndexLessOrEqual(t, e, n) {\n    var r = 0;\n    if (t[r][e] > n) return r;\n    var i,\n      o = t.length - 1;\n    if (t[o][e] < n) return o;\n    for (; r < o; ) {\n      var a = r + o,\n        s = t[(i = (a >> 1) + (1 & a))][e];\n      if (s === n) return i;\n      s > n ? (o = i - 1) : s < n && (r = i);\n    }\n    return r;\n  }\n  toNet(t) {\n    return Big()(t).div(this.taxesFactor).toNumber();\n  }\n  toGross(t) {\n    return Big()(t).times(this.taxesFactor).toNumber();\n  }\n  toPercent(t, e, n) {\n    if (void 0 === e) return Big()(t).times(100).toNumber();\n    if (void 0 === n)\n      return 0 === e ? 0 : Big()(t).div(e).times(100).toNumber();\n    if (n === e) return 0;\n    var r = Big()(e).minus(n);\n    return Big()(t).minus(n).div(r).times(100).toNumber();\n  }\n}\n\nclass ComfortLeaseProduct extends Product {\n  downPaymentGross = this.downPaymentDefaultGross;\n  term = this.termDefault;\n  annualMileage = this.annualMileageDefault;\n  tarRvDevRows = null;\n\n  tarRvDevGet() {\n    // this.interactive &&\n    //   storage.get(\n    //     METADATA.calculator.tarRvDevVersion,\n    //     this.product.tarRvMod.carSegmentId,\n    //     this.totalTerm\n    //   ).then((e) => {\n    //     this.tarRvDevRows = e;\n    //   });\n  }\n  getData() {\n    return {\n      type: \"comfort_lease\",\n      downPaymentGross: this.downPaymentGross,\n      term: this.term,\n      annualMileage: this.annualMileage,\n      installmentGross: this.installmentGross,\n    };\n  }\n  get product() {\n    return this.vehicle.comfortLeaseProduct;\n  }\n  get isApplicable() {\n    return (\n      this.vehicleAge <= METADATA.calculator.ageLimit &&\n      this.vehicle.mileage <= METADATA.calculator.mileageLimit &&\n      this.vehicleAge <=\n        this.product.totalAgeLimit - this.product.termLimits.min &&\n      null !== this.accessoriesPrice &&\n      this.accessoryLimit > -1 &&\n      this.rvValue > -1\n    );\n  }\n  get vehicleType() {\n    return \"new\" === METADATA.stockCategory\n      ? \"new\"\n      : this.vehicle.isYUC\n      ? \"young_used\"\n      : \"used\";\n  }\n  get storagePeriod() {\n    return \"new\" === this.vehicleType\n      ? new Date().getFullYear() - this.vehicle.productionYear\n      : new Date(this.vehicle.registration).getFullYear() -\n          this.vehicle.productionYear;\n  }\n  get newPrice() {\n    return this.toNet(this.vehicle.newPrice);\n  }\n  get optionsPrice() {\n    return this.toNet(this.vehicle.optionsPrice);\n  }\n  get basePrice() {\n    return Big()(this.newPrice).minus(this.optionsPrice).toNumber();\n  }\n  get accessoriesPrice() {\n    return \"accessoriesPrice\" in this.vehicle\n      ? this.toNet(this.vehicle.accessoriesPrice)\n      : null;\n  }\n  get accessoryLimit() {\n    return \"tarRvMod\" in this.product\n      ? this.product.tarRvMod.accessoryLimit\n      : -1;\n  }\n  get rvValue() {\n    return \"tarRvMod\" in this.product\n      ? \"rv_based\" === this.product.calculationMode\n        ? \"used\" === this.vehicleType\n          ? this.product.tarRvMod.rvValueUsed\n          : this.product.tarRvMod.rvValue\n        : \"used\" === this.vehicleType\n        ? this.product.tarRvMod.brvValueUsed\n        : this.product.tarRvMod.brvValue\n      : -1;\n  }\n  get downPaymentMaxGross() {\n    const t = Big()(this.transactionalPriceGross).times(\n        this.product.downPaymentLimits.max\n      ),\n      e = Big()(this.transactionalPriceGross).minus(this.residualValueGross);\n    return (e.lt(t) ? e : t)\n      .div(this.downPaymentStepGross)\n      .round(0, 0)\n      .times(this.downPaymentStepGross)\n      .toNumber();\n  }\n  get termMax() {\n    const t =\n        \"young_used\" === this.vehicleType\n          ? this.product.termLimits.max - this.vehicleAge\n          : this.product.termLimits.max,\n      e = this.product.totalAgeLimit - this.vehicleAge;\n    return Big()(Math.min(t, e))\n      .div(this.termStep)\n      .round(0, 0)\n      .times(this.termStep)\n      .toNumber();\n  }\n  get annualMileageMin() {\n    return Big()(this.product.annualMileageLimits.min)\n      .div(this.annualMileageStep)\n      .round(0, 3)\n      .times(this.annualMileageStep)\n      .toNumber();\n  }\n  get annualMileageMax() {\n    if (null === this.tarRvDevRows)\n      return Big()(this.product.annualMileageLimits.max)\n        .div(this.annualMileageStep)\n        .round(0, 3)\n        .times(this.annualMileageStep)\n        .toNumber();\n    for (\n      var t = \"new\" === this.vehicleType ? \"rvDev\" : \"rvDevUsed\",\n        e = this.tarRvDevRows.length - 1;\n      this.tarRvDevRows[e][t] <= -1;\n\n    )\n      e--;\n    var n = this.tarRvDevRows[e].totalMileage;\n    return (\n      \"young_used\" === this.vehicleType &&\n        (n = Big()(n)\n          .times(this.totalTerm)\n          .div(12)\n          .minus(this.vehicle.mileage)\n          .times(12)\n          .div(this.term)),\n      Big()(Math.min(this.product.annualMileageLimits.max, n))\n        .div(this.annualMileageStep)\n        .round(0, 3)\n        .times(this.annualMileageStep)\n        .toNumber()\n    );\n  }\n  get annualMileageStep() {\n    return this.product.annualMileageLimits.step || 1;\n  }\n  get annualMileageDefault() {\n    return Big()(this.product.annualMileageLimits.default)\n      .div(this.annualMileageStep)\n      .round(0, 1)\n      .times(this.annualMileageStep)\n      .toNumber();\n  }\n  get totalMileage() {\n    return \"young_used\" === this.vehicleType\n      ? Big()(this.annualMileage)\n          .times(this.term)\n          .div(12)\n          .plus(this.vehicle.mileage)\n          .times(12)\n          .div(this.totalTerm)\n          .toNumber()\n      : this.annualMileage;\n  }\n  get totalTerm() {\n    return \"young_used\" === this.vehicleType\n      ? Big()(this.term).plus(this.vehicleAge).toNumber()\n      : this.term;\n  }\n  get tarRvDev() {\n    if (!this.interactive) return this.product.tarRvDev;\n    if (null !== this.tarRvDevRows) {\n      var t = this.lastIndexLessOrEqual(\n          this.tarRvDevRows,\n          \"totalMileage\",\n          this.totalMileage\n        ),\n        e = this.tarRvDevRows[t];\n      return this.totalMileage === e.totalMileage ||\n        t === this.tarRvDevRows.length - 1\n        ? e\n        : this.tarRvDevRows[t + 1];\n    }\n    return null;\n  }\n  get rvDev() {\n    return null === this.tarRvDev\n      ? -1\n      : \"new\" === this.vehicleType\n      ? this.tarRvDev.rvDev\n      : this.tarRvDev.rvDevUsed;\n  }\n  get residualValueBase() {\n    if (\"used\" === this.vehicleType)\n      return Big()(this.transactionalPrice)\n        .minus(this.accessoriesPrice)\n        .toNumber();\n    if (this.accessoryLimit <= -1) return this.newPrice;\n    var t = Big()(this.basePrice),\n      e = t.times(this.accessoryLimit);\n    return e.gte(this.optionsPrice) ? this.newPrice : t.plus(e).toNumber();\n  }\n\n  get residualValue() {\n    if (this.rvValue <= -1 || this.rvDev <= -1) return 0;\n\n    const t = Big()(this.rvValue)\n      .plus(this.rvDev)\n      .times(this.residualValueBase);\n\n    return this.storagePeriod > METADATA.calculator.rvAdjustLimit\n      ? Big()(1).minus(METADATA.calculator.rvAdjust).times(t).toNumber()\n      : t.toNumber();\n  }\n  get residualValueGross() {\n    return this.toGross(this.residualValue);\n  }\n}\n\nclass LeaseProduct extends Product {\n  downPaymentGross = this.downPaymentDefaultGross;\n  term = this.termDefault;\n  residualValueGross = this.residualValueDefaultGross;\n\n  getData() {\n    return {\n      type: \"lease\",\n      downPaymentGross: this.downPaymentGross,\n      term: this.term,\n      residualValueGross: this.residualValueGross,\n      installmentGross: this.installmentGross,\n    };\n  }\n  get product() {\n    return this.vehicle.leaseProduct;\n  }\n  get isApplicable() {\n    return (\n      this.vehicleAge <= METADATA.calculator.ageLimit &&\n      this.vehicleAge <=\n        this.product.totalAgeLimit - this.product.termLimits.min\n    );\n  }\n  get downPaymentMaxGross() {\n    return Big()(this.transactionalPriceGross)\n      .times(this.product.downPaymentLimits.max)\n      .div(this.downPaymentStepGross)\n      .round(0, 0)\n      .times(this.downPaymentStepGross)\n      .toNumber();\n  }\n  get termMax() {\n    var t = this.product.totalAgeLimit - this.vehicleAge;\n    return Big()(Math.min(this.product.termLimits.max, t))\n      .div(this.termStep)\n      .round(0, 0)\n      .times(this.termStep)\n      .toNumber();\n  }\n  get residualValueFactorLimits() {\n    var t = this.lastIndexLessOrEqual(\n      this.product.residualValueFactorLimits,\n      \"term\",\n      this.term\n    );\n    return this.product.residualValueFactorLimits[t];\n  }\n  get residualValueMinGross() {\n    return Big()(this.transactionalPriceGross)\n      .times(this.residualValueFactorLimits.min)\n      .div(this.residualValueStepGross)\n      .round(0, 3)\n      .times(this.residualValueStepGross)\n      .toNumber();\n  }\n  get residualValueMaxGross() {\n    return Big()(this.transactionalPriceGross)\n      .times(this.residualValueFactorLimits.max)\n      .div(this.residualValueStepGross)\n      .round(0, 0)\n      .times(this.residualValueStepGross)\n      .toNumber();\n  }\n  get residualValueStepGross() {\n    var t = this.product.residualValueStep || 1;\n    return t < 1 ? Big()(this.transactionalPriceGross).times(t).toNumber() : t;\n  }\n  get residualValueDefaultGross() {\n    return \"max\" === this.product.residualValueDefault\n      ? this.residualValueMaxGross\n      : this.residualValueMinGross;\n  }\n  get residualValue() {\n    return this.toNet(this.residualValueGross);\n  }\n}\n\nexport enum ProductTypes {\n  COMFORT_LEASE = \"COMFORT_LEASE\",\n  LEASE = \"LEASE\",\n}\n\nexport function Calculator({\n  productType,\n  vehicle,\n}: {\n  productType: ProductTypes;\n  vehicle: Vehicle;\n}) {\n  const [calculator] = useState(\n    () =>\n      new {\n        [ProductTypes.COMFORT_LEASE]: ComfortLeaseProduct,\n        [ProductTypes.LEASE]: LeaseProduct,\n      }[productType](vehicle)\n  );\n\n  const [criteria, setCriteria] = useState(() =>\n    Object.assign(\n      {\n        downPaymentGross: calculator.downPaymentGross,\n        term: calculator.term,\n      },\n      productType === ProductTypes.COMFORT_LEASE\n        ? {\n            annualMileage: calculator.annualMileage,\n          }\n        : {\n            residualValueGross: calculator.residualValueGross,\n          }\n    )\n  );\n\n  useEffect(() => {\n    if (productType === ProductTypes.COMFORT_LEASE) {\n      setCriteria((criteria) => ({\n        ...criteria,\n        tarRvDevRows: (({ columns, rows }) =>\n          rows\n            .map((item) =>\n              Object.entries(columns).reduce(\n                (list, [key, index]) =>\n                  Object.assign(list, {\n                    [key]: item[index],\n                  }),\n                {}\n              )\n            )\n            .filter((item) => item.term === criteria.term)\n            .map((item) =>\n              Object.assign(item, {\n                carSegmentId_term: `${calculator.product.tarRvMod.carSegmentId}_${item.term}`,\n              })\n            ))(TAR_RV_DEV),\n      }));\n    }\n  }, [TAR_RV_DEV, criteria.term]);\n\n  Object.assign(calculator, criteria);\n\n  console.log({\n    calculator,\n    criteria,\n  });\n\n  return (\n    <div>\n      <fieldset>\n        <div>\n          <label>\n            <span>Opłata wstępna</span>\n            <input\n              type=\"range\"\n              min={calculator.downPaymentMinGross}\n              max={calculator.downPaymentMaxGross}\n              step={calculator.downPaymentStepGross}\n              value={criteria.downPaymentGross}\n              onChange={useCallback(\n                ({ target }) =>\n                  setCriteria((criteria) => ({\n                    ...criteria,\n                    downPaymentGross: Number(target.value),\n                  })),\n                []\n              )}\n            />\n            <span>{`${calculator.downPaymentGross} zł`}</span>\n          </label>\n        </div>\n        <div>\n          <label>\n            <span>Okres</span>\n            <input\n              type=\"range\"\n              min={calculator.termMin}\n              max={calculator.termMax}\n              step={calculator.termStep}\n              value={criteria.term}\n              onChange={useCallback(\n                ({ target }) =>\n                  setCriteria((criteria) => ({\n                    ...criteria,\n                    term: Number(target.value),\n                  })),\n                []\n              )}\n            />\n            <span>{`${criteria.term} Miesiące`}</span>\n          </label>\n        </div>\n        {productType === ProductTypes.COMFORT_LEASE && (\n          <div>\n            <label>\n              <span>Roczny przebieg</span>\n              <input\n                type=\"range\"\n                min={calculator.annualMileageMin}\n                max={calculator.annualMileageMax}\n                step={calculator.annualMileageStep}\n                value={criteria.annualMileage}\n                onChange={useCallback(\n                  ({ target }) =>\n                    setCriteria((criteria) => ({\n                      ...criteria,\n                      annualMileage: Number(target.value),\n                    })),\n                  []\n                )}\n              />\n              <span>{`${criteria.annualMileage} km`}</span>\n            </label>\n          </div>\n        )}\n        {productType === ProductTypes.LEASE && (\n          <div>\n            <label>\n              <span>Wartość końcowa</span>\n              <input\n                type=\"range\"\n                min={calculator.residualValueMinGross}\n                max={calculator.residualValueMaxGross}\n                step={calculator.residualValueStepGross}\n                value={criteria.residualValueGross}\n                onChange={useCallback(\n                  ({ target }) =>\n                    setCriteria((criteria) => ({\n                      ...criteria,\n                      residualValueGross: Number(target.value),\n                    })),\n                  []\n                )}\n              />\n              <span>{`${criteria.residualValueGross} zł`}</span>\n            </label>\n          </div>\n        )}\n      </fieldset>\n      <div>{`${calculator.product.label} (${[\n        calculator.product.type,\n        calculator.product.calculationMode,\n      ]\n        .filter(Boolean)\n        .join(\" / \")})`}</div>\n      <ul>\n        <li>{`Cena: ${\n          calculator.transactionalPriceGross\n        } zł (netto ${Math.round(calculator.transactionalPrice)} zł)`}</li>\n        <li>{`Opłata wstępna: ${calculator.downPaymentGross} zł (${\n          Math.round(\n            (calculator.downPaymentGross / calculator.transactionalPriceGross) *\n              100 *\n              100\n          ) / 100\n        }%)`}</li>\n        <li>{`Okres: ${calculator.term} Miesiące`}</li>\n        {calculator.annualMileage !== undefined && (\n          <li>{`Roczny przebieg: ${criteria.annualMileage}km`}</li>\n        )}\n        <li>{`Wartość końcowa: ${\n          Math.round(calculator.residualValueGross * 100) / 100\n        } zł (${\n          Math.round(\n            (calculator.residualValueGross /\n              calculator.transactionalPriceGross) *\n              100 *\n              100\n          ) / 100\n        }%)`}</li>\n        <li>{`Miesięczna rata: ${Math.round(\n          calculator.installmentGross\n        )} zł (netto ${Math.round(calculator.installment)} zł)`}</li>\n        <li>{`Suma opłat: ${Math.round(\n          calculator.downPaymentGross +\n            calculator.installmentGross * calculator.term\n        )} zł (łącznie z wykupem ${Math.round(\n          calculator.downPaymentGross +\n            calculator.installmentGross * calculator.term +\n            calculator.residualValueGross\n        )} zł)`}</li>\n        <li>{`Nadpłata: ${Math.round(\n          calculator.downPaymentGross +\n            calculator.installmentGross * calculator.term +\n            calculator.residualValueGross -\n            calculator.transactionalPriceGross\n        )} zł (${\n          Math.round(\n            ((calculator.downPaymentGross +\n              calculator.installmentGross * calculator.term +\n              calculator.residualValueGross -\n              calculator.transactionalPriceGross) /\n              calculator.transactionalPriceGross) *\n              100 *\n              100\n          ) / 100\n        } %)`}</li>\n      </ul>\n    </div>\n  );\n}\n"],"names":["ProductTypes","TAR_RV_DEV","require","METADATA","Object","assign","taxes","brand","brandId","stockType","stockCategory","calculator","yucAgeLimit","ageLimit","mileageLimit","residualValueAdjust","residualValueAdjustLimit","tarRvDevVersion","Product","vehicle","this","Big","plus","toNumber","age","transactionalPrice","toNet","transactionalPriceGross","t","lastIndexLessOrEqual","product","interestRates","term","value","interestRate","div","times","downPaymentLimits","min","downPaymentStepGross","round","step","downPaymentGross","termLimits","termStep","gt","termMax","minus","downPayment","interestRatePerMonth","e","financedAmount","eq","residualValue","n","pow","toGross","installment","r","i","o","length","a","s","taxesFactor","ComfortLeaseProduct","downPaymentDefaultGross","termDefault","annualMileageDefault","type","annualMileage","installmentGross","comfortLeaseProduct","vehicleAge","mileage","totalAgeLimit","accessoriesPrice","accessoryLimit","rvValue","isYUC","vehicleType","Date","getFullYear","productionYear","registration","newPrice","optionsPrice","tarRvMod","calculationMode","rvValueUsed","brvValueUsed","brvValue","max","residualValueGross","lt","Math","annualMileageLimits","annualMileageStep","tarRvDevRows","totalMileage","totalTerm","interactive","tarRvDev","rvDev","rvDevUsed","basePrice","gte","residualValueBase","storagePeriod","rvAdjustLimit","rvAdjust","LeaseProduct","residualValueDefaultGross","leaseProduct","residualValueFactorLimits","residualValueStepGross","residualValueStep","residualValueDefault","residualValueMaxGross","residualValueMinGross","Calculator","productType","useState","COMFORT_LEASE","LEASE","criteria","setCriteria","useEffect","columns","rows","map","item","entries","reduce","list","key","index","filter","carSegmentId_term","carSegmentId","console","log","downPaymentMinGross","downPaymentMaxGross","onChange","useCallback","target","Number","termMin","annualMileageMin","annualMileageMax","label","Boolean","join","undefined"],"sourceRoot":""}