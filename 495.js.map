{"version":3,"file":"495.js","mappings":"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","sources":["webpack://@dev/web/./src/components/Calculator/index.tsx"],"sourcesContent":["import React, { useCallback, useEffect, useState } from \"react\";\nimport Big from \"big.js\";\n\nconst TAR_RV_DEV = require(\"./assets/tarRvDev.json\");\n\nconst METADATA = Object.assign({\n  taxes: 0.23,\n  brand: \"bmw\",\n  brandId: 1,\n  stockType: \"car\",\n  stockCategory: \"used\",\n  calculator: {\n    yucAgeLimit: 25,\n    ageLimit: 85,\n    mileageLimit: 150000,\n    residualValueAdjust: 0.15,\n    residualValueAdjustLimit: 1,\n    tarRvDevVersion: 1618561672,\n  },\n});\n\nexport type Vehicle = {\n  age: number;\n  transactionalPrice: number;\n  comfortLeaseProduct: {\n    label: string;\n    type: string;\n    calculationMode?: string;\n  };\n  leaseProduct: {\n    label: string;\n    type: string;\n    calculationMode?: string;\n  };\n  mileage: number;\n  accessoriesPrice: number;\n  isYUC: boolean;\n  productionYear: number;\n  newPrice: number;\n  optionsPrice: number;\n  registration: string;\n};\n\nclass Product {\n  vehicle;\n\n  constructor(vehicle: Vehicle) {\n    this.vehicle = vehicle;\n  }\n\n  get interactive() {\n    return true;\n  }\n  get taxesFactor() {\n    return Big()(METADATA.taxes).plus(1).toNumber();\n  }\n  get vehicleAge() {\n    return this.vehicle.age;\n  }\n  get transactionalPriceGross() {\n    return this.vehicle.transactionalPrice;\n  }\n  get transactionalPrice() {\n    return this.toNet(this.transactionalPriceGross);\n  }\n  get interestRate() {\n    const t = this.lastIndexLessOrEqual(\n      this.product.interestRates,\n      \"term\",\n      this.term\n    );\n    return this.product.interestRates[t].value;\n  }\n  get interestRatePerMonth() {\n    return Big()(this.interestRate).div(12).toNumber();\n  }\n  get downPaymentMinGross() {\n    return Big()(this.transactionalPriceGross)\n      .times(this.product.downPaymentLimits.min)\n      .div(this.downPaymentStepGross)\n      .round(0, 3)\n      .times(this.downPaymentStepGross)\n      .toNumber();\n  }\n  get downPaymentStepGross() {\n    const t = this.product.downPaymentLimits.step || 1;\n    return t < 1 ? Big()(this.transactionalPriceGross).times(t).toNumber() : t;\n  }\n  get downPaymentDefaultGross() {\n    return Big()(this.transactionalPriceGross)\n      .times(this.product.downPaymentLimits.default)\n      .div(this.downPaymentStepGross)\n      .round(0, 1)\n      .times(this.downPaymentStepGross)\n      .toNumber();\n  }\n  get downPayment() {\n    return this.toNet(this.downPaymentGross);\n  }\n  get termMin() {\n    return Big()(this.product.termLimits.min)\n      .div(this.termStep)\n      .round(0, 3)\n      .times(this.termStep)\n      .toNumber();\n  }\n  get termStep() {\n    return this.product.termLimits.step || 1;\n  }\n  get termDefault() {\n    const t = Big()(this.product.termLimits.default)\n      .div(this.termStep)\n      .round(0, 3)\n      .times(this.termStep);\n    return t.gt(this.termMax) ? this.termMax : t.toNumber();\n  }\n  get financedAmount() {\n    return Big()(this.transactionalPrice).minus(this.downPayment).toNumber();\n  }\n  get installment() {\n    const t = Big()(this.interestRatePerMonth),\n      e = Big()(this.financedAmount);\n    if (t.eq(0)) return e.plus(this.residualValue).div(this.term).toNumber();\n    const n = t.plus(1).pow(this.term);\n    return e\n      .times(n)\n      .minus(this.residualValue)\n      .times(t)\n      .div(n.minus(1))\n      .toNumber();\n  }\n  get installmentGross() {\n    return this.toGross(this.installment);\n  }\n  lastIndexLessOrEqual(t, e, n) {\n    let r = 0;\n    if (t[r][e] > n) return r;\n    let i,\n      o = t.length - 1;\n    if (t[o][e] < n) return o;\n    for (; r < o; ) {\n      const a = r + o,\n        s = t[(i = (a >> 1) + (1 & a))][e];\n      if (s === n) return i;\n      s > n ? (o = i - 1) : s < n && (r = i);\n    }\n    return r;\n  }\n  toNet(t) {\n    return Big()(t).div(this.taxesFactor).toNumber();\n  }\n  toGross(t) {\n    return Big()(t).times(this.taxesFactor).toNumber();\n  }\n  toPercent(t, e, n) {\n    if (void 0 === e) return Big()(t).times(100).toNumber();\n    if (void 0 === n)\n      return 0 === e ? 0 : Big()(t).div(e).times(100).toNumber();\n    if (n === e) return 0;\n    const r = Big()(e).minus(n);\n    return Big()(t).minus(n).div(r).times(100).toNumber();\n  }\n}\n\nclass ComfortLeaseProduct extends Product {\n  downPaymentGross = this.downPaymentDefaultGross;\n  term = this.termDefault;\n  annualMileage = this.annualMileageDefault;\n  tarRvDevRows = null;\n\n  tarRvDevGet() {\n    // this.interactive &&\n    //   storage.get(\n    //     METADATA.calculator.tarRvDevVersion,\n    //     this.product.tarRvMod.carSegmentId,\n    //     this.totalTerm\n    //   ).then((e) => {\n    //     this.tarRvDevRows = e;\n    //   });\n  }\n  getData() {\n    return {\n      type: \"comfort_lease\",\n      downPaymentGross: this.downPaymentGross,\n      term: this.term,\n      annualMileage: this.annualMileage,\n      installmentGross: this.installmentGross,\n    };\n  }\n  get product() {\n    return this.vehicle.comfortLeaseProduct;\n  }\n  get isApplicable() {\n    return (\n      this.vehicleAge <= METADATA.calculator.ageLimit &&\n      this.vehicle.mileage <= METADATA.calculator.mileageLimit &&\n      this.vehicleAge <=\n        this.product.totalAgeLimit - this.product.termLimits.min &&\n      null !== this.accessoriesPrice &&\n      this.accessoryLimit > -1 &&\n      this.rvValue > -1\n    );\n  }\n  get vehicleType() {\n    return \"new\" === METADATA.stockCategory\n      ? \"new\"\n      : this.vehicle.isYUC\n      ? \"young_used\"\n      : \"used\";\n  }\n  get storagePeriod() {\n    return \"new\" === this.vehicleType\n      ? new Date().getFullYear() - this.vehicle.productionYear\n      : new Date(this.vehicle.registration).getFullYear() -\n          this.vehicle.productionYear;\n  }\n  get newPrice() {\n    return this.toNet(this.vehicle.newPrice);\n  }\n  get optionsPrice() {\n    return this.toNet(this.vehicle.optionsPrice);\n  }\n  get basePrice() {\n    return Big()(this.newPrice).minus(this.optionsPrice).toNumber();\n  }\n  get accessoriesPrice() {\n    return \"accessoriesPrice\" in this.vehicle\n      ? this.toNet(this.vehicle.accessoriesPrice)\n      : null;\n  }\n  get accessoryLimit() {\n    return \"tarRvMod\" in this.product\n      ? this.product.tarRvMod.accessoryLimit\n      : -1;\n  }\n  get rvValue() {\n    return \"tarRvMod\" in this.product\n      ? \"rv_based\" === this.product.calculationMode\n        ? \"used\" === this.vehicleType\n          ? this.product.tarRvMod.rvValueUsed\n          : this.product.tarRvMod.rvValue\n        : \"used\" === this.vehicleType\n        ? this.product.tarRvMod.brvValueUsed\n        : this.product.tarRvMod.brvValue\n      : -1;\n  }\n  get downPaymentMaxGross() {\n    const t = Big()(this.transactionalPriceGross).times(\n        this.product.downPaymentLimits.max\n      ),\n      e = Big()(this.transactionalPriceGross).minus(this.residualValueGross);\n    return (e.lt(t) ? e : t)\n      .div(this.downPaymentStepGross)\n      .round(0, 0)\n      .times(this.downPaymentStepGross)\n      .toNumber();\n  }\n  get termMax() {\n    const t =\n        \"young_used\" === this.vehicleType\n          ? this.product.termLimits.max - this.vehicleAge\n          : this.product.termLimits.max,\n      e = this.product.totalAgeLimit - this.vehicleAge;\n    return Big()(Math.min(t, e))\n      .div(this.termStep)\n      .round(0, 0)\n      .times(this.termStep)\n      .toNumber();\n  }\n  get annualMileageMin() {\n    return Big()(this.product.annualMileageLimits.min)\n      .div(this.annualMileageStep)\n      .round(0, 3)\n      .times(this.annualMileageStep)\n      .toNumber();\n  }\n  get annualMileageMax() {\n    if (null === this.tarRvDevRows)\n      return Big()(this.product.annualMileageLimits.max)\n        .div(this.annualMileageStep)\n        .round(0, 3)\n        .times(this.annualMileageStep)\n        .toNumber();\n    for (\n      var t = \"new\" === this.vehicleType ? \"rvDev\" : \"rvDevUsed\",\n        e = this.tarRvDevRows.length - 1;\n      this.tarRvDevRows[e][t] <= -1;\n\n    )\n      e--;\n    let n = this.tarRvDevRows[e].totalMileage;\n    return (\n      \"young_used\" === this.vehicleType &&\n        (n = Big()(n)\n          .times(this.totalTerm)\n          .div(12)\n          .minus(this.vehicle.mileage)\n          .times(12)\n          .div(this.term)),\n      Big()(Math.min(this.product.annualMileageLimits.max, n))\n        .div(this.annualMileageStep)\n        .round(0, 3)\n        .times(this.annualMileageStep)\n        .toNumber()\n    );\n  }\n  get annualMileageStep() {\n    return this.product.annualMileageLimits.step || 1;\n  }\n  get annualMileageDefault() {\n    return Big()(this.product.annualMileageLimits.default)\n      .div(this.annualMileageStep)\n      .round(0, 1)\n      .times(this.annualMileageStep)\n      .toNumber();\n  }\n  get totalMileage() {\n    return \"young_used\" === this.vehicleType\n      ? Big()(this.annualMileage)\n          .times(this.term)\n          .div(12)\n          .plus(this.vehicle.mileage)\n          .times(12)\n          .div(this.totalTerm)\n          .toNumber()\n      : this.annualMileage;\n  }\n  get totalTerm() {\n    return \"young_used\" === this.vehicleType\n      ? Big()(this.term).plus(this.vehicleAge).toNumber()\n      : this.term;\n  }\n  get tarRvDev() {\n    if (!this.interactive) return this.product.tarRvDev;\n    if (null !== this.tarRvDevRows) {\n      const t = this.lastIndexLessOrEqual(\n          this.tarRvDevRows,\n          \"totalMileage\",\n          this.totalMileage\n        ),\n        e = this.tarRvDevRows[t];\n      return this.totalMileage === e.totalMileage ||\n        t === this.tarRvDevRows.length - 1\n        ? e\n        : this.tarRvDevRows[t + 1];\n    }\n    return null;\n  }\n  get rvDev() {\n    return null === this.tarRvDev\n      ? -1\n      : \"new\" === this.vehicleType\n      ? this.tarRvDev.rvDev\n      : this.tarRvDev.rvDevUsed;\n  }\n  get residualValueBase() {\n    if (\"used\" === this.vehicleType)\n      return Big()(this.transactionalPrice)\n        .minus(this.accessoriesPrice)\n        .toNumber();\n    if (this.accessoryLimit <= -1) return this.newPrice;\n    const t = Big()(this.basePrice),\n      e = t.times(this.accessoryLimit);\n    return e.gte(this.optionsPrice) ? this.newPrice : t.plus(e).toNumber();\n  }\n\n  get residualValue() {\n    if (this.rvValue <= -1 || this.rvDev <= -1) return 0;\n\n    const t = Big()(this.rvValue)\n      .plus(this.rvDev)\n      .times(this.residualValueBase);\n\n    return this.storagePeriod > METADATA.calculator.rvAdjustLimit\n      ? Big()(1).minus(METADATA.calculator.rvAdjust).times(t).toNumber()\n      : t.toNumber();\n  }\n  get residualValueGross() {\n    return this.toGross(this.residualValue);\n  }\n}\n\nclass LeaseProduct extends Product {\n  downPaymentGross = this.downPaymentDefaultGross;\n  term = this.termDefault;\n  residualValueGross = this.residualValueDefaultGross;\n\n  getData() {\n    return {\n      type: \"lease\",\n      downPaymentGross: this.downPaymentGross,\n      term: this.term,\n      residualValueGross: this.residualValueGross,\n      installmentGross: this.installmentGross,\n    };\n  }\n  get product() {\n    return this.vehicle.leaseProduct;\n  }\n  get isApplicable() {\n    return (\n      this.vehicleAge <= METADATA.calculator.ageLimit &&\n      this.vehicleAge <=\n        this.product.totalAgeLimit - this.product.termLimits.min\n    );\n  }\n  get downPaymentMaxGross() {\n    return Big()(this.transactionalPriceGross)\n      .times(this.product.downPaymentLimits.max)\n      .div(this.downPaymentStepGross)\n      .round(0, 0)\n      .times(this.downPaymentStepGross)\n      .toNumber();\n  }\n  get termMax() {\n    const t = this.product.totalAgeLimit - this.vehicleAge;\n    return Big()(Math.min(this.product.termLimits.max, t))\n      .div(this.termStep)\n      .round(0, 0)\n      .times(this.termStep)\n      .toNumber();\n  }\n  get residualValueFactorLimits() {\n    const t = this.lastIndexLessOrEqual(\n      this.product.residualValueFactorLimits,\n      \"term\",\n      this.term\n    );\n    return this.product.residualValueFactorLimits[t];\n  }\n  get residualValueMinGross() {\n    return Big()(this.transactionalPriceGross)\n      .times(this.residualValueFactorLimits.min)\n      .div(this.residualValueStepGross)\n      .round(0, 3)\n      .times(this.residualValueStepGross)\n      .toNumber();\n  }\n  get residualValueMaxGross() {\n    return Big()(this.transactionalPriceGross)\n      .times(this.residualValueFactorLimits.max)\n      .div(this.residualValueStepGross)\n      .round(0, 0)\n      .times(this.residualValueStepGross)\n      .toNumber();\n  }\n  get residualValueStepGross() {\n    const t = this.product.residualValueStep || 1;\n    return t < 1 ? Big()(this.transactionalPriceGross).times(t).toNumber() : t;\n  }\n  get residualValueDefaultGross() {\n    return \"max\" === this.product.residualValueDefault\n      ? this.residualValueMaxGross\n      : this.residualValueMinGross;\n  }\n  get residualValue() {\n    return this.toNet(this.residualValueGross);\n  }\n}\n\nexport enum ProductTypes {\n  COMFORT_LEASE = \"COMFORT_LEASE\",\n  LEASE = \"LEASE\",\n}\n\nexport function Calculator({\n  productType,\n  vehicle,\n}: {\n  productType: ProductTypes;\n  vehicle: Vehicle;\n}) {\n  const [calculator] = useState(\n    () =>\n      new {\n        [ProductTypes.COMFORT_LEASE]: ComfortLeaseProduct,\n        [ProductTypes.LEASE]: LeaseProduct,\n      }[productType](vehicle)\n  );\n\n  const [criteria, setCriteria] = useState(() =>\n    Object.assign(\n      {\n        downPaymentGross: calculator.downPaymentGross,\n        term: calculator.term,\n      },\n      productType === ProductTypes.COMFORT_LEASE\n        ? {\n            annualMileage: calculator.annualMileage,\n          }\n        : {\n            residualValueGross: calculator.residualValueGross,\n          }\n    )\n  );\n\n  useEffect(() => {\n    if (productType === ProductTypes.COMFORT_LEASE) {\n      setCriteria((criteria) => ({\n        ...criteria,\n        tarRvDevRows: (({ columns, rows }) =>\n          rows\n            .map((item) =>\n              Object.entries(columns).reduce(\n                (list, [key, index]) =>\n                  Object.assign(list, {\n                    [key]: item[index],\n                  }),\n                {}\n              )\n            )\n            .filter((item) => item.term === criteria.term)\n            .map((item) =>\n              Object.assign(item, {\n                carSegmentId_term: `${calculator.product.tarRvMod.carSegmentId}_${item.term}`,\n              })\n            ))(TAR_RV_DEV),\n      }));\n    }\n  }, [TAR_RV_DEV, criteria.term]);\n\n  Object.assign(calculator, criteria);\n\n  console.log({\n    calculator,\n    criteria,\n  });\n\n  return (\n    <div>\n      <fieldset>\n        <div>\n          <label>\n            <span>Opłata wstępna</span>\n            <input\n              type=\"range\"\n              min={calculator.downPaymentMinGross}\n              max={calculator.downPaymentMaxGross}\n              step={calculator.downPaymentStepGross}\n              value={criteria.downPaymentGross}\n              onChange={useCallback(\n                ({ target }) =>\n                  setCriteria((criteria) => ({\n                    ...criteria,\n                    downPaymentGross: Number(target.value),\n                  })),\n                []\n              )}\n            />\n            <span>{`${calculator.downPaymentGross} zł`}</span>\n          </label>\n        </div>\n        <div>\n          <label>\n            <span>Okres</span>\n            <input\n              type=\"range\"\n              min={calculator.termMin}\n              max={calculator.termMax}\n              step={calculator.termStep}\n              value={criteria.term}\n              onChange={useCallback(\n                ({ target }) =>\n                  setCriteria((criteria) => ({\n                    ...criteria,\n                    term: Number(target.value),\n                  })),\n                []\n              )}\n            />\n            <span>{`${criteria.term} Miesiące`}</span>\n          </label>\n        </div>\n        {productType === ProductTypes.COMFORT_LEASE && (\n          <div>\n            <label>\n              <span>Roczny przebieg</span>\n              <input\n                type=\"range\"\n                min={calculator.annualMileageMin}\n                max={calculator.annualMileageMax}\n                step={calculator.annualMileageStep}\n                value={criteria.annualMileage}\n                onChange={useCallback(\n                  ({ target }) =>\n                    setCriteria((criteria) => ({\n                      ...criteria,\n                      annualMileage: Number(target.value),\n                    })),\n                  []\n                )}\n              />\n              <span>{`${criteria.annualMileage} km`}</span>\n            </label>\n          </div>\n        )}\n        {productType === ProductTypes.LEASE && (\n          <div>\n            <label>\n              <span>Wartość końcowa</span>\n              <input\n                type=\"range\"\n                min={calculator.residualValueMinGross}\n                max={calculator.residualValueMaxGross}\n                step={calculator.residualValueStepGross}\n                value={criteria.residualValueGross}\n                onChange={useCallback(\n                  ({ target }) =>\n                    setCriteria((criteria) => ({\n                      ...criteria,\n                      residualValueGross: Number(target.value),\n                    })),\n                  []\n                )}\n              />\n              <span>{`${criteria.residualValueGross} zł`}</span>\n            </label>\n          </div>\n        )}\n      </fieldset>\n      <div>{`${calculator.product.label} (${[\n        calculator.product.type,\n        calculator.product.calculationMode,\n      ]\n        .filter(Boolean)\n        .join(\" / \")})`}</div>\n      <ul>\n        <li>{`Cena: ${\n          calculator.transactionalPriceGross\n        } zł (netto ${Math.round(calculator.transactionalPrice)} zł)`}</li>\n        <li>{`Opłata wstępna: ${calculator.downPaymentGross} zł (${\n          Math.round(\n            (calculator.downPaymentGross / calculator.transactionalPriceGross) *\n              100 *\n              100\n          ) / 100\n        }%)`}</li>\n        <li>{`Okres: ${calculator.term} Miesiące`}</li>\n        {calculator.annualMileage !== undefined && (\n          <li>{`Roczny przebieg: ${criteria.annualMileage}km`}</li>\n        )}\n        <li>{`Wartość końcowa: ${\n          Math.round(calculator.residualValueGross * 100) / 100\n        } zł (${\n          Math.round(\n            (calculator.residualValueGross /\n              calculator.transactionalPriceGross) *\n              100 *\n              100\n          ) / 100\n        }%)`}</li>\n        <li>{`Miesięczna rata: ${Math.round(\n          calculator.installmentGross\n        )} zł (netto ${Math.round(calculator.installment)} zł)`}</li>\n        <li>{`Suma opłat: ${Math.round(\n          calculator.downPaymentGross +\n            calculator.installmentGross * calculator.term\n        )} zł (łącznie z wykupem ${Math.round(\n          calculator.downPaymentGross +\n            calculator.installmentGross * calculator.term +\n            calculator.residualValueGross\n        )} zł)`}</li>\n        <li>{`Nadpłata: ${Math.round(\n          calculator.downPaymentGross +\n            calculator.installmentGross * calculator.term +\n            calculator.residualValueGross -\n            calculator.transactionalPriceGross\n        )} zł (${\n          Math.round(\n            ((calculator.downPaymentGross +\n              calculator.installmentGross * calculator.term +\n              calculator.residualValueGross -\n              calculator.transactionalPriceGross) /\n              calculator.transactionalPriceGross) *\n              100 *\n              100\n          ) / 100\n        } %)`}</li>\n      </ul>\n    </div>\n  );\n}\n"],"names":["TAR_RV_DEV","require","METADATA","Object","assign","taxes","brand","brandId","stockType","stockCategory","calculator","yucAgeLimit","ageLimit","mileageLimit","residualValueAdjust","residualValueAdjustLimit","tarRvDevVersion","Product","vehicle","_classCallCheck","this","_createClass","key","get","Big","plus","toNumber","age","transactionalPrice","toNet","transactionalPriceGross","t","lastIndexLessOrEqual","product","interestRates","term","value","interestRate","div","times","downPaymentLimits","min","downPaymentStepGross","round","step","downPaymentGross","termLimits","termStep","gt","termMax","minus","downPayment","interestRatePerMonth","e","financedAmount","eq","residualValue","n","pow","toGross","installment","r","i","o","length","a","s","taxesFactor","ComfortLeaseProduct","_Product","_inherits","_super","_createSuper","_this","_len","arguments","args","Array","_key","_defineProperty","_assertThisInitialized","call","apply","concat","downPaymentDefaultGross","termDefault","annualMileageDefault","type","annualMileage","installmentGross","comfortLeaseProduct","vehicleAge","mileage","totalAgeLimit","accessoriesPrice","accessoryLimit","rvValue","isYUC","vehicleType","Date","getFullYear","productionYear","registration","newPrice","optionsPrice","tarRvMod","calculationMode","rvValueUsed","brvValueUsed","brvValue","max","residualValueGross","lt","Math","annualMileageLimits","annualMileageStep","tarRvDevRows","totalMileage","totalTerm","interactive","tarRvDev","rvDev","rvDevUsed","basePrice","gte","residualValueBase","storagePeriod","rvAdjustLimit","rvAdjust","LeaseProduct","_Product2","_super2","_this2","_len2","_key2","residualValueDefaultGross","leaseProduct","residualValueFactorLimits","residualValueStepGross","residualValueStep","residualValueDefault","residualValueMaxGross","residualValueMinGross","ProductTypes","Calculator","_ref","productType","_slicedToArray","useState","COMFORT_LEASE","LEASE","_useState4","criteria","setCriteria","useEffect","_objectSpread","_ref2","columns","rows","map","item","entries","reduce","list","_ref3","_ref4","index","filter","carSegmentId_term","carSegmentId","console","log","React","downPaymentMinGross","downPaymentMaxGross","onChange","useCallback","_ref5","target","Number","termMin","_ref6","annualMileageMin","annualMileageMax","_ref7","_ref8","label","Boolean","join","undefined"],"sourceRoot":""}