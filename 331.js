/*! For license information please see 331.js.LICENSE.txt */
"use strict";(self.webpackChunk_dev_web=self.webpackChunk_dev_web||[]).push([[331],{7012:(e,t,n)=>{n.d(t,{P:()=>o});var r=n(2784);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e){var t,n,o=e.children,a=(t=(0,r.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=a[0],c=a[1];return r.createElement("pre",null,l?JSON.stringify(o,null,2):r.createElement(r.Fragment,null,"[",r.createElement("a",{href:"#",onClick:function(e){return e.preventDefault(),c(!0)}},"..."),"]"))}},8331:(e,t,n)=>{n.r(t),n.d(t,{default:()=>V});var r=n(2784),i=n(8283),o=n(1148),a=n(7984),l=n(9369),c=n(8871),u=n(357),s=n(5016),f=n(7370),p=n(9725),h=n(5726),d=n(7012),m=n(891),v=n(6062),y=n.n(v),g=n(4036),b=n.n(g),A=n(6793),w=n.n(A),E=n(7892),C=n.n(E),x=n(1173),O=n.n(x),j=n(2464),L=n.n(j),k=n(2459),S={};S.styleTagTransform=L(),S.setAttributes=C(),S.insert=w().bind(null,"head"),S.domAPI=b(),S.insertStyleElement=O(),y()(k.Z,S);const P=k.Z&&k.Z.locals?k.Z.locals:void 0;function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _=["search"];function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){B(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==T(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!==T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"===T(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function M(){M=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,i){var o=t&&t.prototype instanceof p?t:p,a=Object.create(o.prototype),l=new O(i||[]);return r(a,"_invoke",{value:w(e,n,l)}),a}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function p(){}function h(){}function d(){}var m={};c(m,o,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(j([])));y&&y!==t&&n.call(y,o)&&(m=y);var g=d.prototype=p.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function i(r,o,a,l){var c=s(e[r],e,o);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==T(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,a,l)}),(function(e){i("throw",e,a,l)})):t.resolve(f).then((function(e){u.value=e,a(u)}),(function(e){return i("throw",e,a,l)}))}l(c.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return{value:void 0,done:!0}}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===f)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=s(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=s(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function j(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=d,r(g,"constructor",{value:d,configurable:!0}),r(d,"constructor",{value:h,configurable:!0}),h.displayName=c(d,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(A.prototype),c(A.prototype,a,(function(){return this})),e.AsyncIterator=A,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new A(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(g),c(g,l,"Generator"),c(g,o,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=j,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:j(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function F(e,t,n,r,i,o,a){try{var l=e[o](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,i)}var I={_created:-1,_updated:-1},G=(0,u.k)(function(){var e,t=(e=M().mark((function e(t){var n;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("api/plots/data.json?".concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){F(o,r,i,a,l,"next",e)}function l(e){F(o,r,i,a,l,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}());function H(e){var t,n,o,a,l=e.item,c=R((0,r.useState)(!1),2),u=c[0],v=c[1];return r.createElement("div",{className:P.Item},l.photos&&r.createElement(h.r,{className:P.Gallery,images:l.photos}),r.createElement("div",{className:P.Right},r.createElement("div",null,(0,s.Z)(new Date(l._created),"yyyy-MM-dd HH:mm")),r.createElement("span",{className:P.Price},"".concat(new Intl.NumberFormat("pl-PL",{minimumFractionDigits:2}).format(l.price.regularPrice.value)," ").concat(l.price.regularPrice.currencySymbol))),r.createElement(m.r,{href:l.url},"[".concat(l.id,"] ").concat(l.title)),l.location&&r.createElement("div",{className:P.Location},r.createElement(m.r,{href:(t=l.map,n=t.lat,o=t.lon,a="".concat(n,",").concat(o),"//www.google.com/maps/dir/?api=1&origin=".concat(encodeURIComponent(a),"&destination=").concat(encodeURIComponent("52.2268,20.9921"),"&travelmode=").concat(encodeURIComponent("driving"),"&hl=pl"))},r.createElement(f.G,{icon:p.FGq})," ",l.location.pathName)),l.params&&r.createElement("ul",{className:P.Parameters},l.params.map((function(e){var t=e.key,n=e.name,i=e.value;return r.createElement("li",{key:t},n,": ",i)}))),l.description&&r.createElement("div",{className:P.Description},r.createElement(i.Z,{ellipsis:r.createElement("a",{href:"#",onClick:function(e){return e.preventDefault(),v(!0)}},"..."),lines:!u&&3},r.createElement("div",{dangerouslySetInnerHTML:{__html:l.description}}))),r.createElement(d.P,null,l))}function D(e){var t=e.list,n=R((0,r.useState)((function(){return 25})),2),i=n[0],o=n[1];return r.createElement("div",null,(0,r.useMemo)((function(){return t.slice(0,i)}),[i,t]).map((function(e,t){return r.createElement("div",{key:t,className:P.Row},r.createElement(H,{key:e.id,item:e}))})),t.length>i&&r.createElement(m.r,{onClick:function(e){return e.preventDefault(),o((function(e){return e+25}))}},"".concat(t.length-i," więcej...")))}function U(e){var t=e.results,n=e.queries;return r.createElement(D,{list:(0,r.useMemo)((function(){return t.filter((function(e){return e.params.find((function(e){return e.normalizedValue===n.type}))&&(""===n.search||e.title.toLowerCase().match(n.search))})).sort((function(e,t){return I[n.sortBy]*(e[n.sortBy]>t[n.sortBy]?1:-1)}))}),[t,n])})}function Z(e){var t=e.options,n=e.filters,i=e.setFilters;return r.createElement("fieldset",null,r.createElement("label",null,r.createElement("span",null,"Type"),r.createElement("select",{value:n.type,onChange:(0,r.useCallback)((function(e){var t=e.target;return i((function(e){return N(N({},e),{},{type:t.value})}))}),[])},Object.entries(t.type).map((function(e){var t=R(e,2),n=t[0],i=t[1];return r.createElement("option",{key:n,value:n},i)})))),r.createElement("label",null,r.createElement("span",null,"Search"),r.createElement("input",{type:"search",value:n.search,onChange:(0,r.useCallback)((function(e){var t=e.target;return i((function(e){return N(N({},e),{},{search:t.value})}))}),[])})),r.createElement("label",null,r.createElement("span",null,"Sort"),r.createElement("select",{value:n.sortBy,onChange:(0,r.useCallback)((function(e){var t=e.target;return i((function(e){return N(N({},e),{},{sortBy:t.value})}))}),[])},Object.entries(I).map((function(e){var t=R(e,1)[0];return r.createElement("option",{key:t,value:t},t)})))))}function V(e){var t=e.version,n=void 0===t?"v1":t,i=G.read(n),u=(0,r.useMemo)((function(){return i.reduce((function(e,t){return t.params.filter((function(e){return["type"].includes(e.key)})).reduce((function(e,t){return Object.assign(e,B({},t.key,Object.assign(e[t.key],B({},t.normalizedValue,t.value))))}),e)}),{type:{}})}),[i]),s=R((0,r.useState)((function(){return{type:"dzialki-budowlane",search:"",sortBy:Object.keys(I)[0]}})),2),f=s[0],p=s[1],h=R((0,r.useState)((function(){return f})),2),d=h[0],m=h[1],v=(0,r.useMemo)((function(){return new o.x}),[]);return(0,r.useEffect)((function(){var e=v.pipe((0,a.U)((function(e){var t=e.search,n=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,_);return JSON.stringify(N(N(N({},d),n),{},{search:t.toLowerCase().trim()}))})),(0,l.x)(),(0,c.b)(400)).subscribe((function(e){return m((function(t){return N(N({},t),JSON.parse(e))}))}));return function(){return e.unsubscribe()}}),[v]),(0,r.useEffect)((function(){v.next(f)}),[f]),console.log({results:i,filters:f,queries:d}),r.createElement("div",{className:P.Section},r.createElement("h2",null,"Plots"),r.createElement(Z,{options:u,filters:f,setFilters:p}),r.createElement(U,{results:i,queries:d}))}},2459:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(272),i=n.n(r),o=n(2609),a=n.n(o)()(i());a.push([e.id,'.EOr4ulZ4BUCm13B2OADZ{color:purple;padding:1em}.jB0eGdNRHF7olYhliv6w{position:relative;min-height:160px;padding:.5em 1em .5em calc(200px + 1em);border-top:1px solid #d3d3d3}.UvsUGWcbZD20NTvuGuKw{position:absolute;top:.5em;left:.5em;width:200px;height:150px;border:1px solid #d3d3d3}.H5FNVzh7s9WLuIBMr4rw{font-size:small;margin:0;padding:0}.H5FNVzh7s9WLuIBMr4rw li{display:inline}.H5FNVzh7s9WLuIBMr4rw li+li::before{content:" · "}.z_PNdUv7zRVMA0R7eQgp{font-size:small;padding:.25em 0}.ABeFc4E4_RRa2SiLWeYH{font-size:small}.dAB4lxhVYQRKvIvVMd_w .jzyR7Pg2yW1yWXgkaH8A{float:right;text-align:right}',"",{version:3,sources:["webpack://./src/containers/Plots/styles.module.scss"],names:[],mappings:"AAAA,sBAAA,YACE,CAAA,WACA,CAAA,sBAEF,iBACE,CAAA,gBACA,CAAA,uCACA,CAAA,4BACA,CAAA,sBAEF,iBACE,CAAA,QACA,CAAA,SACA,CAAA,WACA,CAAA,YACA,CAAA,wBACA,CAAA,sBAEF,eACE,CAAA,QACA,CAAA,SACA,CAAA,yBACA,cACE,CAAA,oCACA,aACE,CAAA,sBAIN,eACE,CAAA,eACA,CAAA,sBAEF,eACE,CAAA,4CAGA,WACE,CAAA,gBACA",sourcesContent:['.Section {\n  color: purple;\n  padding: 1em;\n}\n.Row {\n  position: relative;\n  min-height: 160px;\n  padding: 0.5em 1em 0.5em calc(200px + 1em);\n  border-top: 1px solid lightgray;\n}\n.Gallery {\n  position: absolute;\n  top: 0.5em;\n  left: 0.5em;\n  width: 200px;\n  height: 150px;\n  border: 1px solid lightgray;\n}\n.Parameters {\n  font-size: small;\n  margin: 0;\n  padding: 0;\n  li {\n    display: inline;\n    & + li::before {\n      content: " · ";\n    }\n  }\n}\n.Description {\n  font-size: small;\n  padding: 0.25em 0;\n}\n.Location {\n  font-size: small;\n}\n.Item {\n  .Right {\n    float: right;\n    text-align: right;\n  }\n}\n'],sourceRoot:""}]),a.locals={Section:"EOr4ulZ4BUCm13B2OADZ",Row:"jB0eGdNRHF7olYhliv6w",Gallery:"UvsUGWcbZD20NTvuGuKw",Parameters:"H5FNVzh7s9WLuIBMr4rw",Description:"z_PNdUv7zRVMA0R7eQgp",Location:"ABeFc4E4_RRa2SiLWeYH",Item:"dAB4lxhVYQRKvIvVMd_w",Right:"jzyR7Pg2yW1yWXgkaH8A"};const l=a},8283:(e,t,n)=>{n.d(t,{Z:()=>f});var r=n(2784),i=n(3980),o=n.n(i),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){var e;c(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return o.state={},o.styles={ellipsis:{position:"fixed",visibility:"hidden",top:0,left:0}},o.elements={},o.onResize=o.onResize.bind(o),o.onTruncate=o.onTruncate.bind(o),o.calcTargetWidth=o.calcTargetWidth.bind(o),o.measureWidth=o.measureWidth.bind(o),o.getLines=o.getLines.bind(o),o.renderLine=o.renderLine.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this.elements.text,t=this.calcTargetWidth,n=this.onResize,r=document.createElement("canvas");this.canvasContext=r.getContext("2d"),t((function(){e&&e.parentNode.removeChild(e)})),window.addEventListener("resize",n)}},{key:"componentDidUpdate",value:function(e){this.props.children!==e.children&&this.forceUpdate(),this.props.width!==e.width&&this.calcTargetWidth()}},{key:"componentWillUnmount",value:function(){var e=this.elements.ellipsis,t=this.onResize,n=this.timeout;e.parentNode.removeChild(e),window.removeEventListener("resize",t),window.cancelAnimationFrame(n)}},{key:"innerText",value:function(e){var t=document.createElement("div"),n="innerText"in window.HTMLElement.prototype?"innerText":"textContent";t.innerHTML=e.innerHTML.replace(/\r\n|\r|\n/g," ");var r=t[n],i=document.createElement("div");return i.innerHTML="foo<br/>bar","foo\nbar"!==i[n].replace(/\r\n|\r/g,"\n")&&(t.innerHTML=t.innerHTML.replace(/<br.*?[\/]?>/gi,"\n"),r=t[n]),r}},{key:"onResize",value:function(){this.calcTargetWidth()}},{key:"onTruncate",value:function(e){var t=this.props.onTruncate;"function"==typeof t&&(this.timeout=window.requestAnimationFrame((function(){t(e)})))}},{key:"calcTargetWidth",value:function(e){var t=this.elements.target,n=this.calcTargetWidth,r=this.canvasContext,i=this.props.width;if(t){var o=i||Math.floor(t.parentNode.getBoundingClientRect().width);if(!o)return window.requestAnimationFrame((function(){return n(e)}));var a=window.getComputedStyle(t),l=[a["font-weight"],a["font-style"],a["font-size"],a["font-family"]].join(" ");r.font=l,this.setState({targetWidth:o},e)}}},{key:"measureWidth",value:function(e){return this.canvasContext.measureText(e).width}},{key:"ellipsisWidth",value:function(e){return e.offsetWidth}},{key:"trimRight",value:function(e){return e.replace(/\s+$/,"")}},{key:"getLines",value:function(){for(var e=this.elements,t=this.props,n=t.lines,i=t.ellipsis,o=t.trimWhitespace,a=this.state.targetWidth,l=this.innerText,c=this.measureWidth,u=this.onTruncate,s=this.trimRight,f=[],p=l(e.text).split("\n").map((function(e){return e.split(" ")})),h=!0,d=this.ellipsisWidth(this.elements.ellipsis),m=1;m<=n;m++){var v=p[0];if(0!==v.length){var y=v.join(" ");if(c(y)<=a&&1===p.length){h=!1,f.push(y);break}if(m===n){for(var g=v.join(" "),b=0,A=g.length-1;b<=A;){var w=Math.floor((b+A)/2);c(g.slice(0,w+1))+d<=a?b=w+1:A=w-1}var E=g.slice(0,b);if(o)for(E=s(E);!E.length&&f.length;)E=s(f.pop());y=r.createElement("span",null,E,i)}else{for(var C=0,x=v.length-1;C<=x;){var O=Math.floor((C+x)/2);c(v.slice(0,O+1).join(" "))<=a?C=O+1:x=O-1}if(0===C){m=n-1;continue}y=v.slice(0,C).join(" "),p[0].splice(0,C)}f.push(y)}else f.push(),p.shift(),m--}return u(h),f}},{key:"renderLine",value:function(e,t,n){if(t===n.length-1)return r.createElement("span",{key:t},e);var i=r.createElement("br",{key:t+"br"});return e?[r.createElement("span",{key:t},e),i]:i}},{key:"render",value:function(){var e=this,t=this.elements.target,n=this.props,i=n.children,o=n.ellipsis,l=n.lines,c=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(n,["children","ellipsis","lines"]),u=this.state.targetWidth,s=this.getLines,f=this.renderLine,p=this.onTruncate,h=void 0;return"undefined"!=typeof window&&!(!t||!u)&&(l>0?h=s().map(f):(h=i,p(!1))),delete c.onTruncate,delete c.trimWhitespace,r.createElement("span",a({},c,{ref:function(t){e.elements.target=t}}),r.createElement("span",null,h),r.createElement("span",{ref:function(t){e.elements.text=t}},i),r.createElement("span",{ref:function(t){e.elements.ellipsis=t},style:this.styles.ellipsis},o))}}]),t}(r.Component);s.propTypes={children:o().node,ellipsis:o().node,lines:o().oneOfType([o().oneOf([!1]),o().number]),trimWhitespace:o().bool,width:o().number,onTruncate:o().func},s.defaultProps={children:"",ellipsis:"…",lines:1,trimWhitespace:!1,width:0};const f=s},8871:(e,t,n)=>{n.d(t,{b:()=>a});var r=n(997),i=n(1118),o=n(7394);function a(e,t){return void 0===t&&(t=r.z),(0,i.e)((function(n,r){var i=null,a=null,l=null,c=function(){if(i){i.unsubscribe(),i=null;var e=a;a=null,r.next(e)}};function u(){var n=l+e,o=t.now();if(o<n)return i=this.schedule(void 0,n-o),void r.add(i);c()}n.subscribe((0,o.x)(r,(function(n){a=n,l=t.now(),i||(i=t.schedule(u,e),r.add(i))}),(function(){c(),r.complete()}),void 0,(function(){a=i=null})))}))}},9369:(e,t,n)=>{n.d(t,{x:()=>a});var r=n(9676),i=n(1118),o=n(7394);function a(e,t){return void 0===t&&(t=r.y),e=null!=e?e:l,(0,i.e)((function(n,r){var i,a=!0;n.subscribe((0,o.x)(r,(function(n){var o=t(n);!a&&e(i,o)||(a=!1,i=o,r.next(n))})))}))}function l(e,t){return e===t}},7984:(e,t,n)=>{n.d(t,{U:()=>o});var r=n(1118),i=n(7394);function o(e,t){return(0,r.e)((function(n,r){var o=0;n.subscribe((0,i.x)(r,(function(n){r.next(e.call(t,n,o++))})))}))}}}]);
//# sourceMappingURL=331.js.map