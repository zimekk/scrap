"use strict";(self.webpackChunk_dev_web=self.webpackChunk_dev_web||[]).push([[435],{8435:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ee});var r=n(1283),a=n(7946),l=n(965),o=n(2451),u=n(7162),c=n.n(u),i=n(2784),s=n(3081),f=n(357),d=n(369),p=n(9635),m=n(2779),v=n.n(m),b=n(1148),h=n(5120),g=n(2335),y=n(9468),E=n(4437);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=200,Z={id:"id",station_id:"station_id",network_id:"network_id",_petrol_on:"_petrol_on",_petrol_pb:"_petrol_pb",_distance:"_distance",_created:"_created",_updated:"_updated"};function j(e){var t=e.list,n=(0,i.useState)(null),r=(0,a.Z)(n,2),l=r[0],o=r[1],u=(0,i.useState)((function(){return{xProp:"network_id",yProp:"_petrol_pb"}})),c=(0,a.Z)(u,2),s=c[0],f=s.xProp,m=s.yProp,O=c[1],j=(0,i.useRef)(null),w=(0,i.useRef)(null),S=(0,i.useRef)(null),P=(0,i.useMemo)((function(){return new b.x}),[]);return(0,i.useEffect)((function(){var e=P.pipe((0,g.w)((function(e){return(0,h.of)(e).pipe((0,y.g)(e?0:800))}))).subscribe((function(e){return o(e)}));return function(){return e.unsubscribe()}}),[P]),(0,i.useEffect)((function(){var e=t.filter((function(e){var t=e.item;return t[f]&&t[m]})).slice(0,2e3).map((function(e){var t=e.item;return[t[f],t[m],"[".concat(t.id,"] ").concat(t.network_name," (").concat(t[f]," / ").concat(t[m],")")]})),n=e.map((function(e){var t=(0,a.Z)(e,1)[0];return void 0===t?0:t})),r=e.map((function(e){var t=(0,a.Z)(e,2)[1];return void 0===t?0:t})),l=[Math.min.apply(Math,(0,d.Z)(n)),Math.max.apply(Math,(0,d.Z)(n))],o=[Math.min.apply(Math,(0,d.Z)(r)),Math.max.apply(Math,(0,d.Z)(r))],u=(0,p.BYU)().domain(l).range([10,310]),c=(0,p.BYU)().domain(o).range([180,20]),i=(0,p.BYU)().domain(l).range(["red","blue"]);(0,p.Ys)(S.current).selectAll("circle").remove(),(0,p.Ys)(S.current).selectAll("circle").data(e).join((function(e){return e.append("circle").attr("cx",(function(e){var t=(0,a.Z)(e,1)[0];return u(void 0===t?0:t)})).attr("cy",(function(e){var t=(0,a.Z)(e,2)[1];return c(void 0===t?0:t)})).attr("r",0).attr("fill",(function(e){var t=(0,a.Z)(e,1)[0];return i(void 0===t?0:t)})).on("mouseover",(function(e,t){var n=(0,a.Z)(t,3)[2];return P.next({left:e.layerX,top:e.layerY,label:n})})).on("mouseout",(function(e,t){return P.next(null)})).call((function(e){return e.transition().duration(200).attr("r",2).style("opacity",1)}))}),(function(e){return e.attr("fill","lightgrey")}),(function(e){return e.attr("fill","tomato").call((function(e){return e.transition().duration(200).attr("r",0).style("opacity",0).remove()}))}));var s=(0,p.LLu)(u).ticks(5).tickSizeOuter(0);(0,p.Ys)(j.current).call(s);var v=(0,p.y4O)(c).ticks(5).tickSizeOuter(0);(0,p.Ys)(w.current).call(v)}),[t,f,m]),i.createElement("div",{className:v()(E.Z.Chart)},i.createElement("fieldset",null,i.createElement("label",null,i.createElement("span",null,"x"),i.createElement("select",{value:f,onChange:function(e){return O((function(t){return k(k({},t),{},{xProp:e.target.value})}))}},Object.entries(Z).map((function(e){var t=(0,a.Z)(e,2),n=t[0],r=t[1];return i.createElement("option",{key:n,value:n},r)})))),i.createElement("label",null,i.createElement("span",null,"y"),i.createElement("select",{value:m,onChange:function(e){return O((function(t){return k(k({},t),{},{yProp:e.target.value})}))}},Object.entries(Z).map((function(e){var t=(0,a.Z)(e,2),n=t[0],r=t[1];return i.createElement("option",{key:n,value:n},r)}))))),i.createElement("svg",{ref:S,width:320,height:_,viewBox:"0, 0, ".concat(320,", ").concat(_)},i.createElement("g",{transform:"translate(0, ".concat(180,")"),ref:j}),i.createElement("g",{transform:"translate(".concat(10,", 0)"),ref:w})),l&&i.createElement("div",{className:E.Z.Tooltip,style:{top:l.top,left:l.left}},l.label))}var w=n(5062),S=n.n(w),P=n(809),x=n(7234),C=n(5804),N=n(493),M=n(8969),T=n(9982),U=n(6127),I=n(9530),D=n(5096),Y=n(7815);function H(e){var t=e.position,n=e.children,r=e.setPosition,a=(0,i.useRef)(null),l=(0,i.useMemo)((function(){return{dragend:function(){var e=a.current;null!=e&&r(e.getLatLng())}}}),[]);return i.createElement(P.J,{draggable:!0,eventHandlers:l,position:t,ref:a},i.createElement(x.u,null,n))}function L(){var e=(0,C.Sx)(),t=(0,i.useCallback)((function(t){t.preventDefault(),e.locate({setView:!0})}),[e]);return i.createElement("div",{className:"leaflet-top leaflet-left",style:{top:80,fontSize:16}},i.createElement("div",{className:"leaflet-control-locate leaflet-bar leaflet-control"},i.createElement("a",{className:"leaflet-bar-part leaflet-bar-part-single",title:"Locate",href:"#",onClick:t},i.createElement(I.G,{icon:D.KS0}))))}function G(e){var t=e.data;return i.createElement("div",null,i.createElement("table",null,i.createElement("tbody",null,i.createElement("tr",null,i.createElement("td",null),Object.keys(t.header).map((function(e,t){return i.createElement("th",{key:t},e)}))),t.rows.sort((function(e,t){return t.date-e.date})).map((function(e,n){var r=e.date,a=e.list;return i.createElement("tr",{key:n},i.createElement("th",null,new Date(r).toISOString().split("T")[0]),Object.keys(t.header).map((function(e,t){return i.createElement("td",{key:t},a[e])})))})))))}function B(e){return(0,i.useMemo)((function(){return S().featureGroup(e.map((function(e){var t=e.position,n=t.lat,r=t.lng;return S().marker([n,r])}))).getBounds()}),[])}function A(e){var t=e.bounds,r=e.center,o=e.setCenter,u=e.list,c=e.zoom,s=void 0===c?12:c;(0,i.useEffect)((function(){delete S().Icon.Default.prototype._getIconUrl,S().Icon.Default.mergeOptions({iconRetinaUrl:n(1963).Z,iconUrl:n(379).Z,shadowUrl:n(6179).Z})}),[]);var f=(0,i.useMemo)((function(){return i.createElement(N.h,{bounds:t,center:r,zoom:s,className:v()(Y.Z.Map)},i.createElement(M.I,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),i.createElement(H,{position:r,setPosition:o},"".concat(r.lat,",").concat(r.lng)),u.map((function(e){var t=e.i,n=e.id,o=e.position,u=e.name,c=e.item;return i.createElement(T.c,{key:t,center:o,pathOptions:{color:"purple"}},i.createElement(U.G,{minWidth:90},i.createElement("section",null,i.createElement("header",null,"[".concat(n,"] ").concat([u].concat(c.address||[]).join(" - ")," (").concat(r.distanceTo(o).toFixed(0)/1e3," km)")),i.createElement(G,{data:Object.entries(Object.assign((0,l.Z)({},c._updated||c._created,c.petrol_list.reduce((function(e,t){var n=t.type,r=t.price;return Object.assign(e,(0,l.Z)({},n,r))}),{})),c._history)).reduce((function(e,t){var n=(0,a.Z)(t,2),r=n[0],o=n[1];return Object.assign(e,{header:Object.keys(o).reduce((function(e,t){return Object.assign(e,(0,l.Z)({},t,t))}),e.header),rows:e.rows.concat([{date:Number(r),list:o}])})}),{header:{},rows:[]})}))))})),i.createElement(L,null))}),[u,r]);return i.createElement("div",{className:v()(Y.Z.Layout)},f)}var R=n(4772),z=n(8723),Q=["position","item"];function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F=[1,3,5,10,20,50,100,500],K=[0,1,2,3,4,5,6,7,8,9,10],V={_distance:1,_petrol_pb:1,"_petrol_pb+":1,_petrol_on:1,"_petrol_on+":1,network_name:1,address:1,_created:-1,_updated:-1},W={"":"",pb:"pb","pb+":"pb+",on:"on","on+":"on+",lpg:"lpg","lpg+":"lpg+"},q=(0,f.k)(function(){var e=(0,o.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("api/stations/data.json?".concat(t));case 2:return n=e.sent,e.next=5,n.json().then((function(e){return{results:e.results.map((function(e){return X(X({},e.petrol_list.reduce((function(e,t){var n=t.type,r=t.price;return Object.assign(e,(0,l.Z)({},"_petrol_".concat(n),Number(r)||0))}),{})),e)}))}}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());function $(e){var t=e.version,n=void 0===t?"v1":t,l=q.read(n).results,o=(0,i.useState)(""),u=(0,a.Z)(o,2),c=u[0],f=u[1],d=(0,R.Z)(c),p=(0,a.Z)(d,1)[0],m=(0,i.useCallback)((function(e){var t=e.target;return f(t.value)}),[]),v=(0,i.useState)(5),b=(0,a.Z)(v,2),h=b[0],g=b[1],y=(0,i.useCallback)((function(e){var t=e.target;return g(Number(t.value))}),[]),E=(0,i.useState)((function(){return Object.keys(W)[1]})),O=(0,a.Z)(E,2),k=O[0],_=O[1],Z=(0,i.useCallback)((function(e){var t=e.target;return _(t.value)}),[]),w=(0,i.useState)(K[0]),S=(0,a.Z)(w,2),P=S[0],x=S[1],C=(0,i.useState)(K[K.length-1]),N=(0,a.Z)(C,2),M=N[0],T=N[1],U=(0,i.useState)((function(){return Object.keys(V)[0]})),I=(0,a.Z)(U,2),D=I[0],Y=I[1],H=(0,i.useCallback)((function(e){var t=e.target;return T((function(e){var n=Number(t.value);return x(n),e<n?n:e}))}),[]),L=(0,i.useCallback)((function(e){var t=e.target;return x((function(e){var n=Number(t.value);return T(n),n>e?e:n}))}),[]),G=(0,i.useCallback)((function(e){var t=e.target;return Y(t.value)}),[]);console.log({results:l});var z=(0,i.useMemo)((function(){return l.map((function(e,t){return{i:t,id:e.station_id,position:{lat:e.x,lng:e.y},name:e.network_name,item:e}})).filter((function(e){var t,n=e.name,r=e.item,a=r.petrol_list,l=r.address,o=void 0===l?"":l;return(n.toLowerCase().match(p)||o.toLowerCase().match(p))&&(!k||(t=a.find((function(e){return e.type===k})),Boolean(t)&&P<=t.price&&t.price<=M))}))}),[l,p,k,P,M]),J=B([{position:{lat:52.1793,lng:21.0498}}]),$=(0,i.useState)((function(){return J.getCenter()})),ee=(0,a.Z)($,2),te=ee[0],ne=ee[1],re=(0,i.useMemo)((function(){return z.map((function(e){var t=e.position,n=e.item,a=(0,r.Z)(e,Q);return X({position:t,item:X(X({},n),{},{_distance:te.distanceTo(t)})},a)})).filter((function(e){return e.item._distance<1e3*h}))}),[z,te,h]),ae=(0,i.useMemo)((function(){return re.sort((function(e,t){return V[D]*(e.item[D]===t.item[D]?0:(e.item[D]||0)>(t.item[D]||0)?1:-1)}))}),[re,D]),le=B(re);return i.createElement("div",null,i.createElement(A,{bounds:le,center:te,setCenter:ne,list:re}),i.createElement(j,{list:re}),i.createElement("fieldset",null,i.createElement("div",null,i.createElement("label",null,i.createElement("span",null,"Search"),i.createElement("input",{type:"search",value:c,onChange:m})),i.createElement("label",null,i.createElement("span",null,"Radius"),i.createElement("input",{type:"range",list:"range-list",min:F[0],max:F[F.length-1],value:h,onChange:y}),i.createElement("datalist",{id:"range-list"},F.map((function(e){return i.createElement("option",{key:e,value:e,label:[1,25,100].includes(e)?"".concat(e," km"):void 0})}))),i.createElement("span",null,"max ".concat(h," km")))),i.createElement("div",null,i.createElement("label",null,i.createElement("span",null,"Type"),i.createElement("select",{value:k,onChange:Z},Object.entries(W).map((function(e){var t=(0,a.Z)(e,2),n=t[0],r=t[1];return i.createElement("option",{key:n,value:n},r)})))),i.createElement("label",null,i.createElement("span",null,"Sort"),i.createElement("select",{value:D,onChange:G},Object.entries(V).map((function(e){var t=(0,a.Z)(e,1)[0];return i.createElement("option",{key:t,value:t},t)}))))),i.createElement("div",null,i.createElement("label",null,i.createElement("span",null,"Price From"),i.createElement("input",{type:"range",list:"price-list",min:K[0],max:K[K.length-1],value:P,onChange:H}),i.createElement("datalist",{id:"price-list"},K.map((function(e){return i.createElement("option",{key:e,value:e,label:[0,1,2,3,4,5].includes(e)?"".concat(e," pln/l"):void 0})})))),i.createElement("label",null,i.createElement("span",null,"Price To"),i.createElement("input",{type:"range",list:"price-list",min:K[0],max:K[K.length-1],value:M,onChange:L}),i.createElement("span",null,"".concat(P,"-").concat(M," pln/l"))))),i.createElement("table",null,ae.map((function(e,t){var n=e.i,r=e.name,a=e.item;return i.createElement("tr",{key:t},i.createElement("td",null,n),Object.keys(W).map((function(e){var t;return i.createElement("td",{key:e},e?null!==(t=a.petrol[e])&&void 0!==t?t:"-":i.createElement("div",null,r," ",i.createElement("span",null,a.address)))})),i.createElement("td",null,(0,s.Z)(a._updated,"yyyy-MM-dd")))}))))}function ee(){return i.createElement("div",{className:z.Z.Section},i.createElement("h2",null,"Stations"),i.createElement($,null))}},4772:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(7946),a=n(2784);function l(e){var t=(0,a.useState)(e),n=(0,r.Z)(t,2),l=n[0],o=n[1],u=(0,a.useRef)();return(0,a.useEffect)((function(){return clearTimeout(u.current),u.current=setTimeout((function(){return o(e.toLowerCase())}),400),function(){clearTimeout(u.current)}}),[e]),[l]}},8365:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var r=n(9601),a=n.n(r),l=n(2609),o=n.n(l)()(a());o.push([e.id,".NjHXg9NGgpl1h6itsGUI{position:relative;border:2px solid red}.NjHXg9NGgpl1h6itsGUI svg{width:100%;height:50vh}.NjHXg9NGgpl1h6itsGUI .Qeuu3ubiYLZshSsQhUN6{position:absolute}.Qeuu3ubiYLZshSsQhUN6{background:#fff;border:1px solid #add8e6;color:orange;padding:.25em}",""]),o.locals={Chart:"NjHXg9NGgpl1h6itsGUI",Tooltip:"Qeuu3ubiYLZshSsQhUN6"};const u=o},4312:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var r=n(9601),a=n.n(r),l=n(2609),o=n.n(l),u=n(9138),c=o()(a());c.i(u.Z),c.push([e.id,".cStyiPbxd0HI9tByMkkY{height:75vh;border:2px solid red}.cStyiPbxd0HI9tByMkkY header{font-weight:bold}",""]),c.locals={Map:"cStyiPbxd0HI9tByMkkY"};const i=c},7938:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var r=n(9601),a=n.n(r),l=n(2609),o=n.n(l)()(a());o.push([e.id,".JTHop_UDHoyJmmN4pc6w{color:blue}",""]),o.locals={Section:"JTHop_UDHoyJmmN4pc6w"};const u=o},4437:(e,t,n)=>{n.d(t,{Z:()=>E});var r=n(6062),a=n.n(r),l=n(4036),o=n.n(l),u=n(6793),c=n.n(u),i=n(7892),s=n.n(i),f=n(1173),d=n.n(f),p=n(2464),m=n.n(p),v=n(8365),b={};b.styleTagTransform=m(),b.setAttributes=s(),b.insert=c().bind(null,"head"),b.domAPI=o(),b.insertStyleElement=d();var h=a()(v.default,b);if(!v.default.locals||e.hot.invalidate){var g=!v.default.locals,y=g?v:v.default.locals;e.hot.accept(8365,(t=>{v=n(8365),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if((!n||"default"!==r)&&e[r]!==t[r])return!1;for(r in t)if(!(n&&"default"===r||e[r]))return!1;return!0}(y,g?v:v.default.locals,g)?(y=g?v:v.default.locals,h(v.default)):e.hot.invalidate()}))}e.hot.dispose((function(){h()}));const E=v.default&&v.default.locals?v.default.locals:void 0},7815:(e,t,n)=>{n.d(t,{Z:()=>E});var r=n(6062),a=n.n(r),l=n(4036),o=n.n(l),u=n(6793),c=n.n(u),i=n(7892),s=n.n(i),f=n(1173),d=n.n(f),p=n(2464),m=n.n(p),v=n(4312),b={};b.styleTagTransform=m(),b.setAttributes=s(),b.insert=c().bind(null,"head"),b.domAPI=o(),b.insertStyleElement=d();var h=a()(v.default,b);if(!v.default.locals||e.hot.invalidate){var g=!v.default.locals,y=g?v:v.default.locals;e.hot.accept(4312,(t=>{v=n(4312),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if((!n||"default"!==r)&&e[r]!==t[r])return!1;for(r in t)if(!(n&&"default"===r||e[r]))return!1;return!0}(y,g?v:v.default.locals,g)?(y=g?v:v.default.locals,h(v.default)):e.hot.invalidate()}))}e.hot.dispose((function(){h()}));const E=v.default&&v.default.locals?v.default.locals:void 0},8723:(e,t,n)=>{n.d(t,{Z:()=>E});var r=n(6062),a=n.n(r),l=n(4036),o=n.n(l),u=n(6793),c=n.n(u),i=n(7892),s=n.n(i),f=n(1173),d=n.n(f),p=n(2464),m=n.n(p),v=n(7938),b={};b.styleTagTransform=m(),b.setAttributes=s(),b.insert=c().bind(null,"head"),b.domAPI=o(),b.insertStyleElement=d();var h=a()(v.default,b);if(!v.default.locals||e.hot.invalidate){var g=!v.default.locals,y=g?v:v.default.locals;e.hot.accept(7938,(t=>{v=n(7938),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if((!n||"default"!==r)&&e[r]!==t[r])return!1;for(r in t)if(!(n&&"default"===r||e[r]))return!1;return!0}(y,g?v:v.default.locals,g)?(y=g?v:v.default.locals,h(v.default)):e.hot.invalidate()}))}e.hot.dispose((function(){h()}));const E=v.default&&v.default.locals?v.default.locals:void 0}}]);