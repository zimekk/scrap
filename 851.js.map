{"version":3,"file":"851.js","mappings":"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","sources":["webpack://@dev/web/./src/containers/Quotes/Chart.module.scss?912e","webpack://@dev/web/./src/containers/Quotes/Chart2.tsx","webpack://@dev/web/./src/containers/Quotes/styles.module.scss?548c","webpack://@dev/web/./src/containers/Quotes/index.tsx","webpack://@dev/web/./src/containers/Quotes/Chart.module.scss","webpack://@dev/web/./src/containers/Quotes/styles.module.scss","webpack://@dev/web/../../node_modules/rxjs/dist/esm5/internal/operators/debounceTime.js","webpack://@dev/web/../../node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js"],"sourcesContent":["\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./Chart.module.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./Chart.module.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport { format } from \"date-fns\";\n// import { axisBottom, axisLeft, select, scaleLinear, timeFormat } from \"d3\";\nimport * as d3 from \"d3\";\n// import { Subject, of } from \"rxjs\";\n// import { delay, switchMap } from \"rxjs/operators\";\nimport cx from \"classnames\";\nimport styles from \"./Chart.module.scss\";\n\n// const { width, height, left, right, top, bottom } = {\n//   width: 640,\n//   height: 200,\n//   left: 5,\n//   right: 5,\n//   top: 5,\n//   bottom: 20,\n// };\n\n// { list: Record<string,{\n//   date: string;\n//   value: number;\n// }> }\n\nexport default function Chart({ list }: any) {\n  // const [selected, setSelected] = useState<{\n  //   top: number;\n  //   left: number;\n  //   label: string;\n  // } | null>(null);\n  // const xAxisRef = useRef(null);\n  // const yAxisRef = useRef(null);\n  const svgRef = useRef(null);\n\n  // const selected$ = useMemo(\n  //   () => new Subject<{ left: number; top: number; label: string }>(),\n  //   []\n  // );\n  // useEffect(() => {\n  //   const subscription = selected$\n  //     .pipe(\n  //       switchMap((selected) => of(selected).pipe(delay(selected ? 0 : 800)))\n  //     )\n  //     .subscribe((selected) => setSelected(selected));\n\n  //   return () => subscription.unsubscribe();\n  // }, [selected$]);\n\n  const { width, height, margin } = {\n    width: 600,\n    height: 300,\n    margin: { top: 30, right: 30, bottom: 30, left: 60 },\n  };\n\n  useEffect(() => {\n    const el = d3.select(svgRef.current);\n    el.selectAll(\"*\").remove();\n\n    const data = list.map(({ date, value }) => ({\n      date: new Date(date),\n      value,\n    }));\n\n    console.log({ data });\n\n    const xScale = d3\n      .scaleTime()\n      .domain(d3.extent(data, (d) => d.date))\n      .range([0, width]);\n    const yScale = d3\n      .scaleLinear()\n      .domain([\n        0,\n        // d3.min(data, (d) => d.value),\n        d3.max(data, (d) => d.value),\n      ])\n      .range([height, 0]);\n\n    const svg = el\n      .append(\"g\")\n      .attr(\"transform\", `translate(${margin.left},${margin.top})`)\n      .on(\"touchstart\", (event) => event.preventDefault())\n      .on(\"pointermove\", pointermoved);\n\n    const formatDate = (date) => format(date, \"yyyy-MM-dd\");\n\n    function update(date) {\n      // date = Xs[d3.bisectCenter(Xs, date)];\n      rule.attr(\"transform\", `translate(${xScale(date)},0)`);\n      ruleLabel.text(formatDate(date));\n      // serie.attr(\"transform\", ([, I]) => {\n      //   const i = I[d3.bisector(i => X[i]).center(I, date)];\n      //   return `translate(0,${yScale(1) - yScale(Y[i] / Y[I[0]])})`;\n      // });\n      // svg.property(\"value\", date).dispatch(\"input\", {bubbles: true}); // for viewof\n    }\n\n    function pointermoved(event) {\n      update(xScale.invert(d3.pointer(event)[0]));\n    }\n\n    const rule = svg.append(\"g\");\n\n    rule\n      .append(\"line\")\n      .attr(\"y1\", margin.top)\n      .attr(\"y2\", height - margin.bottom - 15)\n      .attr(\"stroke\", \"currentColor\");\n\n    const ruleLabel = rule\n      .append(\"text\")\n      .attr(\"y\", height - margin.bottom - 15)\n      .attr(\"fill\", \"currentColor\")\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"dy\", \"1em\");\n\n    const xAxis = d3\n      .axisBottom(xScale)\n      .ticks(5)\n      .tickSize(-height + margin.bottom);\n    const xAxisGroup = svg\n      .append(\"g\")\n      .attr(\"transform\", `translate(0, ${height - margin.bottom})`)\n      .call(xAxis);\n    xAxisGroup.select(\".domain\").remove();\n    xAxisGroup.selectAll(\"line\").attr(\"stroke\", \"rgba(0, 0, 0, 0.2)\");\n    xAxisGroup\n      .selectAll(\"text\")\n      .attr(\"opacity\", 0.5)\n      .attr(\"color\", \"blue\")\n      .attr(\"font-size\", \"0.75rem\");\n\n    const yAxis = d3\n      .axisLeft(yScale)\n      .ticks(5)\n      .tickSize(-width)\n      .tickFormat((val) => `${val}%`);\n    const yAxisGroup = svg.append(\"g\").call(yAxis);\n    yAxisGroup.select(\".domain\").remove();\n    yAxisGroup.selectAll(\"line\").attr(\"stroke\", \"rgba(0, 0, 0, 0.2)\");\n    yAxisGroup\n      .selectAll(\"text\")\n      .attr(\"opacity\", 0.5)\n      .attr(\"color\", \"blue\")\n      .attr(\"font-size\", \"0.75rem\");\n\n    const line = d3\n      .line()\n      .x((d) => xScale(d.date))\n      .y((d) => yScale(d.value));\n\n    svg\n      .selectAll(\".line\")\n      .data(data)\n      .enter()\n      .append(\"circle\")\n      .attr(\"cx\", (d) => xScale(d.date))\n      .attr(\"cy\", (d) => yScale(d.value))\n      .attr(\"r\", 2)\n      .attr(\"fill\", (d) => \"currentColor\");\n    // .append(\"path\")\n    // .attr(\"fill\", \"#ccc\")\n    // .attr(\"stroke\", (d) => '#ddd')\n    // .attr(\"stroke-width\", 3)\n    // .attr(\"d\", (d) => line(d));\n\n    // const dataset = list.map((item) => [\n    //   new Date(item.date),\n    //   item.value,\n    //   `${item.date}, ${item.value}`,\n    // ]);\n\n    // const xx = dataset.map(([x = 0]) => x);\n    // const yy = dataset.map(([, y = 0]) => y);\n\n    // // const xDomain = [Math.min(...xx), Math.max(...xx)];\n    // const xDomain = [new Date('2020-01-01'), Math.max(...xx)];\n    // const yDomain = [0, Math.max(...yy)];\n\n    // const xScale = scaleLinear()\n    //   .domain(xDomain)\n    //   .range([left, width - right]);\n\n    // const yScale = scaleLinear()\n    //   .domain(yDomain)\n    //   .range([height - bottom, top]);\n\n    // const color = scaleLinear().domain(yDomain).range([\"red\", \"blue\"]);\n\n    // select(containerRef.current).selectAll(\"circle\").remove();\n    // select(containerRef.current)\n    //   .selectAll(\"circle\")\n    //   .data(dataset)\n    //   .join(\n    //     (enter) =>\n    //       enter\n    //         .append(\"circle\")\n    //         .attr(\"cx\", ([x = 0]) => xScale(x))\n    //         .attr(\"cy\", ([, y = 0]) => yScale(y))\n    //         .attr(\"r\", 0)\n    //         .attr(\"fill\", ([x = 0]) => color(x))\n    //         .on(\"mouseover\", (e, [, , label]) =>\n    //           selected$.next({ left: e.layerX, top: e.layerY, label })\n    //         )\n    //         .on(\"mouseout\", () => selected$.next(null))\n    //         .call((enter) =>\n    //           enter.transition().duration(200).attr(\"r\", 2).style(\"opacity\", 1)\n    //         ),\n    //     (update) => update.attr(\"fill\", \"lightgrey\"),\n    //     (exit) =>\n    //       exit\n    //         .attr(\"fill\", \"tomato\")\n    //         .call((exit) =>\n    //           exit\n    //             .transition()\n    //             .duration(200)\n    //             .attr(\"r\", 0)\n    //             .style(\"opacity\", 0)\n    //             .remove()\n    //         )\n    //   );\n\n    // const xAxis = axisBottom(xScale)\n    //   .ticks(5)\n    //   .tickSizeOuter(0)\n    //   .tickFormat(timeFormat(\"%Y-%m-%d, %H:%M:%S\"));\n    // select(xAxisRef.current).call(xAxis).style(\"font-size\", \"8px\");\n\n    // const yAxis = axisLeft(yScale).ticks(5).tickSizeOuter(0);\n    // select(yAxisRef.current).call(yAxis).style(\"font-size\", \"8px\");\n  }, [list]);\n\n  return (\n    <div className={cx(styles.Chart)}>\n      <svg\n        ref={svgRef}\n        width={width + margin.left + margin.right}\n        height={height + margin.top + margin.bottom}\n        // viewBox={`0, 0, ${width}, ${height}`}\n      >\n        {/* <g transform={`translate(0, ${height - bottom})`} ref={xAxisRef} />\n        <g transform={`translate(${left}, 0)`} ref={yAxisRef} /> */}\n      </svg>\n      {/* {selected && (\n        <div\n          className={styles.Tooltip}\n          style={{ top: selected.top, left: selected.left }}\n        >\n          {selected.label}\n        </div>\n      )} */}\n    </div>\n  );\n}\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./styles.module.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./styles.module.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { Subject } from \"rxjs\";\nimport { debounceTime, distinctUntilChanged, map } from \"rxjs/operators\";\nimport { createAsset } from \"use-asset\";\nimport Chart from \"./Chart\";\nimport Chart2 from \"./Chart2\";\nimport styles from \"./styles.module.scss\";\n\nimport type { Meta, Item } from \"@dev/cli/src/services/QuotesService/types\";\n\n// https://github.com/pmndrs/use-asset#dealing-with-async-assets\nconst asset = createAsset(async (version) => {\n  const res = await fetch(`api/quotes/data.json?${version}`);\n  return await res.json();\n});\n\nfunction Data({ version = \"v1\" }) {\n  const { metas, objects: results } = asset.read(version) as {\n    metas: Meta[];\n    objects: Item[];\n  };\n\n  const options = useMemo(\n    () => ({\n      investment: metas\n        .map(({ id, name }) => ({ id, name }))\n        .sort((a, b) => a.name.localeCompare(b.name)),\n    }),\n    [results]\n  );\n\n  const [filters, setFilters] = useState(() => ({\n    investment: options.investment[0].id,\n    search: \"\",\n  }));\n\n  const [queries, setQueries] = useState(() => filters);\n\n  const search$ = useMemo(() => new Subject<any>(), []);\n\n  useEffect(() => {\n    const subscription = search$\n      .pipe(\n        map(({ search, ...filters }) =>\n          JSON.stringify({ ...queries, ...filters, search: search.trim() })\n        ),\n        distinctUntilChanged(),\n        debounceTime(400)\n      )\n      .subscribe((filters) =>\n        setQueries((queries) => ({ ...queries, ...JSON.parse(filters) }))\n      );\n    return () => subscription.unsubscribe();\n  }, [search$]);\n\n  useEffect(() => {\n    search$.next(filters);\n  }, [filters]);\n\n  console.log({ options, filters, results });\n\n  const list = useMemo(\n    () =>\n      results.reduce(\n        (list: any, item) =>\n          Object.assign(list, {\n            [item.investment_id]: (list[item.investment_id] || []).concat(item),\n          }),\n        {}\n      ),\n    [results]\n  );\n\n  return (\n    <div>\n      <fieldset>\n        <label>\n          <span>Investment</span>\n          <select\n            value={filters.investment}\n            onChange={useCallback(\n              ({ target }) =>\n                setFilters((filters) => ({\n                  ...filters,\n                  investment: Number(target.value),\n                })),\n              []\n            )}\n          >\n            {options.investment.map(({ id, name }) => (\n              <option key={id} value={id}>\n                {name}\n              </option>\n            ))}\n          </select>\n        </label>\n        <label>\n          <span>Search</span>\n          <input\n            type=\"search\"\n            value={filters.search}\n            onChange={useCallback(\n              ({ target }) =>\n                setFilters((filters) => ({\n                  ...filters,\n                  search: target.value,\n                })),\n              []\n            )}\n          />\n        </label>\n      </fieldset>\n      <Chart2 list={list[queries.investment]} />\n      {/* <Chart2 list={list} /> */}\n      {options.investment.map(({ id, name }) => (\n        <div key={id}>\n          <h3>{name}</h3>\n          {/* <Chart list={list[id]} /> */}\n        </div>\n      ))}\n      <pre>{JSON.stringify(metas, null, 2)}</pre>\n      <pre>{JSON.stringify(list[queries.investment].slice(0, 5), null, 2)}</pre>\n    </div>\n  );\n}\n\nexport default function Section() {\n  return (\n    <div className={styles.Section}>\n      <h2>Quotes</h2>\n      <Data />\n    </div>\n  );\n}\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".eVHbCENbT49QC3XWmnbd{position:relative;border:2px solid red}.eVHbCENbT49QC3XWmnbd svg{width:100%;height:50vh}.eVHbCENbT49QC3XWmnbd .w_36iD1m0f9OQ1GS1rMv{position:absolute}.w_36iD1m0f9OQ1GS1rMv{background:#fff;border:1px solid #add8e6;color:orange;padding:.25em}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/containers/Quotes/Chart.module.scss\"],\"names\":[],\"mappings\":\"AAAA,sBACE,iBAAA,CACA,oBAAA,CAEA,0BACE,UAAA,CACA,WAAA,CAEF,4CACE,iBAAA,CAGJ,sBACE,eAAA,CACA,wBAAA,CACA,YAAA,CACA,aAAA\",\"sourcesContent\":[\".Chart {\\n  position: relative;\\n  border: 2px solid red;\\n\\n  svg {\\n    width: 100%;\\n    height: 50vh;\\n  }\\n  .Tooltip {\\n    position: absolute;\\n  }\\n}\\n.Tooltip {\\n  background: white;\\n  border: 1px solid lightblue;\\n  color: orange;\\n  padding: 0.25em;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"Chart\": \"eVHbCENbT49QC3XWmnbd\",\n\t\"Tooltip\": \"w_36iD1m0f9OQ1GS1rMv\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"._ESpGSPPpzgrCHtLDC15{color:purple}.B5XUoft7ajzWeLY9QZQ9{clear:both;padding:.5em 0;border:2px solid transparent;margin:.5em}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/containers/Quotes/styles.module.scss\"],\"names\":[],\"mappings\":\"AAAA,sBACE,YAAA,CAEF,sBACE,UAAA,CACA,cAAA,CACA,4BAAA,CACA,WAAA\",\"sourcesContent\":[\".Section {\\n  color: purple;\\n}\\n.Row {\\n  clear: both;\\n  padding: 0.5em 0;\\n  border: 2px solid transparent;\\n  margin: 0.5em;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"Section\": \"_ESpGSPPpzgrCHtLDC15\",\n\t\"Row\": \"B5XUoft7ajzWeLY9QZQ9\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","import { asyncScheduler } from '../scheduler/async';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function debounceTime(dueTime, scheduler) {\n    if (scheduler === void 0) { scheduler = asyncScheduler; }\n    return operate(function (source, subscriber) {\n        var activeTask = null;\n        var lastValue = null;\n        var lastTime = null;\n        var emit = function () {\n            if (activeTask) {\n                activeTask.unsubscribe();\n                activeTask = null;\n                var value = lastValue;\n                lastValue = null;\n                subscriber.next(value);\n            }\n        };\n        function emitWhenIdle() {\n            var targetTime = lastTime + dueTime;\n            var now = scheduler.now();\n            if (now < targetTime) {\n                activeTask = this.schedule(undefined, targetTime - now);\n                subscriber.add(activeTask);\n                return;\n            }\n            emit();\n        }\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            lastValue = value;\n            lastTime = scheduler.now();\n            if (!activeTask) {\n                activeTask = scheduler.schedule(emitWhenIdle, dueTime);\n                subscriber.add(activeTask);\n            }\n        }, function () {\n            emit();\n            subscriber.complete();\n        }, undefined, function () {\n            lastValue = activeTask = null;\n        }));\n    });\n}\n//# sourceMappingURL=debounceTime.js.map","import { identity } from '../util/identity';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function distinctUntilChanged(comparator, keySelector) {\n    if (keySelector === void 0) { keySelector = identity; }\n    comparator = comparator !== null && comparator !== void 0 ? comparator : defaultCompare;\n    return operate(function (source, subscriber) {\n        var previousKey;\n        var first = true;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            var currentKey = keySelector(value);\n            if (first || !comparator(previousKey, currentKey)) {\n                first = false;\n                previousKey = currentKey;\n                subscriber.next(value);\n            }\n        }));\n    });\n}\nfunction defaultCompare(a, b) {\n    return a === b;\n}\n//# sourceMappingURL=distinctUntilChanged.js.map"],"names":["options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","undefined","Chart","list","svgRef","useRef","height","margin","useEffect","el","d3","current","selectAll","remove","data","map","date","value","Date","console","log","xScale","domain","d","range","yScale","svg","append","attr","on","event","preventDefault","invert","rule","ruleLabel","text","format","formatDate","xAxis","ticks","tickSize","xAxisGroup","call","select","yAxis","tickFormat","val","yAxisGroup","x","y","enter","className","cx","styles","ref","width","asset","createAsset","version","fetch","res","json","Data","read","metas","results","objects","useMemo","investment","id","name","sort","a","b","localeCompare","useState","search","filters","setFilters","queries","setQueries","search$","Subject","subscription","pipe","JSON","stringify","trim","distinctUntilChanged","debounceTime","subscribe","parse","unsubscribe","next","reduce","item","Object","assign","investment_id","concat","onChange","useCallback","target","Number","key","type","slice","Section","___CSS_LOADER_EXPORT___","push","module","locals","dueTime","scheduler","source","subscriber","activeTask","lastValue","lastTime","emit","emitWhenIdle","targetTime","now","this","schedule","add","complete","comparator","keySelector","defaultCompare","previousKey","first","currentKey"],"sourceRoot":""}