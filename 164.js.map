{"version":3,"file":"164.js","mappings":"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","sources":["webpack://@dev/web/./src/components/Map/styles.module.scss?c4f3","webpack://@dev/web/./src/components/Map/index.tsx","webpack://@dev/web/./src/containers/Vehicles/Chart.module.scss?75eb","webpack://@dev/web/./src/containers/Vehicles/Chart.tsx","webpack://@dev/web/./src/containers/Vehicles/Options.module.scss?73e8","webpack://@dev/web/./src/containers/Vehicles/Options.tsx","webpack://@dev/web/./src/containers/Vehicles/Details.module.scss?e172","webpack://@dev/web/./src/containers/Vehicles/Details.tsx","webpack://@dev/web/./src/containers/Vehicles/Map.module.scss?11ee","webpack://@dev/web/./src/containers/Vehicles/Map.tsx","webpack://@dev/web/./src/containers/Vehicles/Summary.tsx","webpack://@dev/web/./src/containers/Vehicles/styles.module.scss?cfea","webpack://@dev/web/./src/containers/Vehicles/index.tsx","webpack://@dev/web/./src/components/Map/styles.module.scss","webpack://@dev/web/./src/containers/Vehicles/Chart.module.scss","webpack://@dev/web/./src/containers/Vehicles/Details.module.scss","webpack://@dev/web/./src/containers/Vehicles/Map.module.scss","webpack://@dev/web/./src/containers/Vehicles/Options.module.scss","webpack://@dev/web/./src/containers/Vehicles/styles.module.scss"],"sourcesContent":["\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./styles.module.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./styles.module.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport L from \"leaflet\";\nimport { Marker, Tooltip, useMap } from \"react-leaflet\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faCrosshairs } from \"@fortawesome/free-solid-svg-icons\";\n// import { faMapMarkerAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport cx from \"classnames\";\nimport styles from \"./styles.module.scss\";\n\nexport function DisplayPosition({ map }: { map: L.Map }) {\n  const [initial] = useState(() => ({\n    position: map.getCenter(),\n    zoom: map.getZoom(),\n  }));\n  const [position, setPosition] = useState(map.getCenter());\n\n  const onClick = useCallback(() => {\n    map.setView(initial.position, initial.zoom);\n  }, [map]);\n\n  const onMove = useCallback(() => {\n    setPosition(map.getCenter());\n  }, [map]);\n\n  const onLocationFound = useCallback((event) => {\n    const { latlng, radius } = event;\n    console.log({ latlng, radius });\n  }, []);\n\n  useEffect(() => {\n    map.on(\"locationfound\", onLocationFound).on(\"move\", onMove);\n    return () => {\n      map.off(\"locationfound\", onLocationFound).off(\"move\", onMove);\n    };\n  }, [map, onMove]);\n\n  return (\n    <div className={cx(styles.DisplayPosition)}>\n      latitude: {position.lat.toFixed(4)}, longitude: {position.lng.toFixed(4)}{\" \"}\n      <button onClick={onClick}>Reset</button>\n      <button\n        onClick={() =>\n          map.locate({\n            setView: true,\n          })\n        }\n      >\n        Locate\n      </button>\n    </div>\n  );\n}\n\nexport function DraggableMarker({\n  position,\n  children,\n  setPosition,\n}: {\n  position: L.LatLng;\n  children: React.ReactNode;\n  setPosition: Function;\n}) {\n  const markerRef = useRef<L.Marker>(null);\n  const eventHandlers = useMemo(\n    () => ({\n      dragend() {\n        const marker = markerRef.current;\n        if (marker != null) {\n          setPosition(marker.getLatLng());\n        }\n      },\n    }),\n    []\n  );\n\n  return (\n    <Marker\n      draggable\n      eventHandlers={eventHandlers}\n      position={position}\n      ref={markerRef}\n    >\n      <Tooltip>{children}</Tooltip>\n    </Marker>\n  );\n}\n\nexport function LocateControl() {\n  const map = useMap();\n\n  const onLocate = useCallback(\n    (event) => {\n      event.preventDefault();\n      map.locate({\n        setView: true,\n      });\n    },\n    [map]\n  );\n\n  return (\n    <div className=\"leaflet-top leaflet-left\" style={{ top: 80, fontSize: 16 }}>\n      <div className=\"leaflet-control-locate leaflet-bar leaflet-control\">\n        <a\n          className=\"leaflet-bar-part leaflet-bar-part-single\"\n          title=\"Locate\"\n          href=\"#\"\n          onClick={onLocate}\n        >\n          <FontAwesomeIcon icon={faCrosshairs} />\n        </a>\n      </div>\n    </div>\n  );\n}\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./Chart.module.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./Chart.module.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport { axisBottom, axisLeft, select, scaleLinear } from \"d3\";\nimport { Subject, of } from \"rxjs\";\nimport { delay, switchMap } from \"rxjs/operators\";\nimport cx from \"classnames\";\nimport styles from \"./Chart.module.scss\";\n\nconst { width, height, left, right, top, bottom } = {\n  width: 320,\n  height: 200,\n  left: 10,\n  right: 10,\n  top: 20,\n  bottom: 20,\n};\n\nconst PROPS = {\n  accessoriesPrice: \"accessoriesPrice\",\n  age: \"age\",\n  capacity: \"capacity\",\n  consumptionFuel: \"consumptionFuel\",\n  emission: \"emission\",\n  id: \"id\",\n  images: \"images\",\n  mileage: \"mileage\",\n  newPrice: \"newPrice\",\n  optionsPrice: \"optionsPrice\",\n  powerHP: \"powerHP\",\n  powerKW: \"powerKW\",\n  productionYear: \"productionYear\",\n  transactionalPrice: \"transactionalPrice\",\n  warranty: \"warranty\",\n  _created: \"_created\",\n  _updated: \"_updated\",\n};\n\n// https://betterprogramming.pub/construct-d3-charts-in-react-cfecc2848ae2\n// https://wattenberger.com/blog/react-and-d3\nexport default function Chart({ list, onSelect }) {\n  const [selected, setSelected] = useState<{\n    top: number;\n    left: number;\n    label: string;\n  } | null>(null);\n  const [{ xProp, yProp }, setProps] = useState(() => ({\n    xProp: \"transactionalPrice\",\n    yProp: \"newPrice\",\n  }));\n  const xAxisRef = useRef(null);\n  const yAxisRef = useRef(null);\n  const containerRef = useRef(null);\n\n  // https://stackoverflow.com/questions/62066799/custom-tooltip-with-rxjs\n  const selected$ = useMemo(() => new Subject(), []);\n  useEffect(() => {\n    const subscription = selected$\n      .pipe(\n        switchMap((selected) => of(selected).pipe(delay(selected ? 0 : 800)))\n      )\n      .subscribe((selected) => setSelected(selected));\n\n    return () => subscription.unsubscribe();\n  }, [selected$]);\n\n  useEffect(() => {\n    const dataset = list\n      .slice(0, 2000)\n      .map(({ item }) => [\n        item[xProp],\n        item[yProp],\n        `[${item.id}] ${item.title}`,\n        item.id,\n      ]);\n\n    const xx = dataset.map(([x = 0]) => x);\n    const yy = dataset.map(([, y = 0]) => y);\n\n    const xDomain = [Math.min(...xx), Math.max(...xx)];\n    const yDomain = [Math.min(...yy), Math.max(...yy)];\n\n    const xScale = scaleLinear()\n      .domain(xDomain)\n      .range([left, width - right]);\n\n    const yScale = scaleLinear()\n      .domain(yDomain)\n      .range([height - bottom, top]);\n\n    const color = scaleLinear().domain(xDomain).range([\"red\", \"blue\"]);\n\n    select(containerRef.current).selectAll(\"circle\").remove();\n    select(containerRef.current)\n      .selectAll(\"circle\")\n      .data(dataset)\n      .join(\n        (enter) =>\n          enter\n            .append(\"circle\")\n            .attr(\"cx\", ([x = 0]) => xScale(x))\n            .attr(\"cy\", ([, y = 0]) => yScale(y))\n            .attr(\"r\", 0)\n            .attr(\"fill\", ([x = 0]) => color(x))\n            .on(\"click\", (e, [, , , id]) => onSelect(id))\n            .on(\"mouseover\", (e, [, , label]) =>\n              selected$.next({ left: e.layerX, top: e.layerY, label })\n            )\n            .on(\"mouseout\", (e, i) => selected$.next(null))\n            .call((enter) =>\n              enter.transition().duration(200).attr(\"r\", 2).style(\"opacity\", 1)\n            ),\n        (update) => update.attr(\"fill\", \"lightgrey\"),\n        (exit) =>\n          exit\n            .attr(\"fill\", \"tomato\")\n            .call((exit) =>\n              exit\n                .transition()\n                .duration(200)\n                .attr(\"r\", 0)\n                .style(\"opacity\", 0)\n                .remove()\n            )\n      );\n\n    const xAxis = axisBottom(xScale).ticks(5).tickSizeOuter(0);\n    select(xAxisRef.current).call(xAxis);\n\n    const yAxis = axisLeft(yScale).ticks(5).tickSizeOuter(0);\n    select(yAxisRef.current).call(yAxis);\n  }, [list, xProp, yProp]);\n\n  return (\n    <div className={cx(styles.Chart)}>\n      <fieldset>\n        <label>\n          <span>x</span>\n          <select\n            value={xProp}\n            onChange={(e) =>\n              setProps((props) => ({ ...props, xProp: e.target.value }))\n            }\n          >\n            {Object.entries(PROPS).map(([value, label]) => (\n              <option key={value} value={value}>\n                {label}\n              </option>\n            ))}\n          </select>\n        </label>\n        <label>\n          <span>y</span>\n          <select\n            value={yProp}\n            onChange={(e) =>\n              setProps((props) => ({ ...props, yProp: e.target.value }))\n            }\n          >\n            {Object.entries(PROPS).map(([value, label]) => (\n              <option key={value} value={value}>\n                {label}\n              </option>\n            ))}\n          </select>\n        </label>\n      </fieldset>\n      <svg\n        ref={containerRef}\n        width={width}\n        height={height}\n        viewBox={`0, 0, ${width}, ${height}`}\n      >\n        <g transform={`translate(0, ${height - bottom})`} ref={xAxisRef} />\n        <g transform={`translate(${left}, 0)`} ref={yAxisRef} />\n      </svg>\n      {selected && (\n        <div\n          className={styles.Tooltip}\n          style={{ top: selected.top, left: selected.left }}\n        >\n          {selected.label}\n        </div>\n      )}\n    </div>\n  );\n}\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./Options.module.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./Options.module.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { Suspense, useMemo, useState } from \"react\";\nimport { Link } from \"../../components/Link\";\nimport { getDescription, optionsAsset } from \"../Configure\";\nimport styles from \"./Options.module.scss\";\n\nconst Spinner = () => <span>Loading...</span>;\n\nfunction Details({\n  labels,\n  version = 1,\n}: {\n  labels: string[];\n  version?: number;\n}) {\n  const { availableOptions, options } = optionsAsset.read(version);\n\n  console.log({ availableOptions, options });\n\n  const prices = useMemo(\n    () =>\n      ((prices) =>\n        prices.concat(prices.reduce((sum, price) => sum + (price || 0), 0)))(\n        labels.map(\n          (label) =>\n            availableOptions.find(({ optionCode }: { optionCode: string }) =>\n              ((description) =>\n                label.toLocaleLowerCase() === description.toLowerCase())(\n                getDescription(options[optionCode])\n              )\n            )?.grossPrice\n        )\n      ),\n    [availableOptions, labels, options]\n  );\n\n  return (\n    <div className={styles.Textarea}>\n      <textarea\n        value={prices.join(\"\\n\")}\n        rows={prices.length}\n        onFocus={({ target }) => target.select()}\n        readOnly\n      />\n      <textarea\n        value={labels.join(\"\\n\")}\n        rows={labels.length}\n        onFocus={({ target }) => target.select()}\n        readOnly\n      />\n    </div>\n  );\n}\n\nexport default function Options({ options }: { options: string[] }) {\n  const [expand, setExpand] = useState(false);\n\n  return (\n    <div className={styles.Options}>\n      <Link\n        onClick={(e) => (e.preventDefault(), setExpand((expand) => !expand))}\n      >\n        {expand ? \"Hide options\" : \"Show options\"}\n      </Link>{\" \"}\n      {expand && (\n        <Suspense fallback={<Spinner />}>\n          <Details labels={options} />\n        </Suspense>\n      )}\n    </div>\n  );\n}\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./Details.module.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./Details.module.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, {\n  ComponentProps,\n  Dispatch,\n  MouseEventHandler,\n  ReactNode,\n  SetStateAction,\n  useState,\n} from \"react\";\nimport { format } from \"date-fns\";\nimport { Link } from \"../../components/Link\";\nimport { Calculator, ProductTypes, Vehicle } from \"../../components/Calculator\";\nimport Options from \"./Options\";\nimport cx from \"classnames\";\nimport styles from \"./Details.module.scss\";\n\ntype Item = {\n  id: number;\n  _history: any[];\n};\n\nconst formatNumber = (value: number) => new Intl.NumberFormat().format(value);\n\nconst formatAmount = (value: number) => `${formatNumber(value)} pln`;\n\nfunction Button({ ...props }) {\n  return <button {...props} />;\n}\n\nexport function Toggle({\n  children,\n  ...props\n}: ComponentProps<\"input\"> & { children: ReactNode }) {\n  return (\n    <label>\n      <input type=\"checkbox\" {...props} />\n      <span>{children}</span>\n    </label>\n  );\n}\n\nfunction Color({ color }: { color: { code: string; label: string } }) {\n  return (\n    <a\n      className={styles.Color}\n      style={{ backgroundColor: color.code }}\n      title={color.label}\n    ></a>\n  );\n}\n\nfunction IdLink({\n  children: id,\n  setSearch,\n}: {\n  children: string;\n  setSearch: Function;\n}) {\n  return (\n    <>\n      [\n      <Link\n        onClick={(e) => (\n          e.preventDefault(),\n          setSearch((search: string) =>\n            (e.metaKey ? search.split(\",\").map((s) => s.trim()) : [])\n              .concat(String(id))\n              .filter((s) => s.length > 0)\n              .join(\", \")\n          )\n        )}\n      >\n        {id}\n      </Link>\n      ]\n    </>\n  );\n}\n\nexport function Favorite({\n  favorites,\n  setFavorites,\n  setSearch,\n}: {\n  favorites: string[];\n  setFavorites: Dispatch<SetStateAction<string[]>>;\n  setSearch: Dispatch<SetStateAction<string>>;\n}) {\n  return favorites.length > 0 ? (\n    <div>\n      {`Your favorites: `}\n      {favorites.map((favorite, key) => (\n        <IdLink key={key} setSearch={setSearch}>\n          {favorite}\n        </IdLink>\n      ))}{\" \"}\n      <Link\n        onClick={(e) => (e.preventDefault(), setSearch(favorites.join(`, `)))}\n      >\n        search\n      </Link>{\" \"}\n      |{\" \"}\n      <Link onClick={(e) => (e.preventDefault(), setFavorites([]))}>clear</Link>\n    </div>\n  ) : (\n    <div>{`You don't have favorites`}</div>\n  );\n}\n\nexport default function Details({\n  _time,\n  item,\n  onClickCompare,\n  prev,\n  favorites,\n  setFavorites,\n  setSearch,\n}: {\n  _time?: string;\n  item: any;\n  onClickCompare?: MouseEventHandler;\n  prev?: any;\n  favorites?: string[];\n  setFavorites?: Dispatch<SetStateAction<string[]>>;\n  setSearch?: Dispatch<SetStateAction<string>>;\n}) {\n  const {\n    id,\n    href,\n    title,\n    brand,\n    series = {},\n    seriesCode,\n    bodyType,\n    modelCode,\n    productionYear,\n    transactionalPrice,\n    newPrice,\n  } = item;\n\n  const changed = (prop: string) => item && prev && item[prop] !== prev[prop];\n\n  return (\n    <ul className={styles.Details}>\n      {!prev && (\n        <li>\n          <Color color={item.color} />\n          <IdLink setSearch={setSearch}>{id}</IdLink>{\" \"}\n          <Link href={href}>{title}</Link>{\" \"}\n          {onClickCompare && (\n            <Button onClick={onClickCompare} value={item._id}>\n              Compare\n            </Button>\n          )}\n          {setFavorites && (\n            <Toggle\n              checked={favorites.includes(id)}\n              onChange={(e) =>\n                setFavorites((favorites) =>\n                  e.target.checked\n                    ? favorites.concat(id)\n                    : favorites.filter((favorite) => favorite !== id)\n                )\n              }\n            >\n              Favorite\n            </Toggle>\n          )}\n        </li>\n      )}\n      {!prev && (\n        <li>\n          <IdLink setSearch={setSearch}>\n            {typeof seriesCode === \"object\" ? seriesCode.label : seriesCode}\n          </IdLink>{\" \"}\n          {brand.label} {series.label} {bodyType.label} {item.fuel.label}{\" \"}\n          {item.transmission.label}\n        </li>\n      )}\n      {!prev && (\n        <li>\n          <IdLink setSearch={setSearch}>\n            {typeof modelCode === \"object\" ? modelCode.label : modelCode}\n          </IdLink>{\" \"}\n          {item.capacity && <span>capacity: {item.capacity}</span>}{\" \"}\n          {item.powerHP && <span>powerHP: {item.powerHP}</span>}{\" \"}\n          {item.consumptionFuel && (\n            <span>consumptionFuel: {item.consumptionFuel}</span>\n          )}{\" \"}\n          {item.emission && <span>emission: {item.emission}</span>}\n        </li>\n      )}\n      <li>\n        <span\n          className={cx(\n            styles.Compare,\n            changed(\"productionYear\") && styles.changed\n          )}\n        >\n          productionYear: {productionYear}\n        </span>{\" \"}\n        {Boolean(newPrice) && (\n          <span\n            className={cx(\n              styles.Compare,\n              changed(\"newPrice\") && styles.changed\n            )}\n          >\n            newPrice: {formatAmount(newPrice)}\n          </span>\n        )}{\" \"}\n        {Boolean(item.optionsPrice) && (\n          <span\n            className={cx(\n              styles.Compare,\n              changed(\"optionsPrice\") && styles.changed\n            )}\n          >\n            optionsPrice: {formatAmount(item.optionsPrice)}\n          </span>\n        )}{\" \"}\n        {Boolean(item.accessoriesPrice) && (\n          <span\n            className={cx(\n              styles.Compare,\n              changed(\"accessoriesPrice\") && styles.changed\n            )}\n          >\n            accessoriesPrice: {formatAmount(item.accessoriesPrice)}\n          </span>\n        )}\n      </li>\n      {Boolean(item.registration || item.age || item.mileage) && (\n        <li>\n          {item.registration && (\n            <span\n              className={cx(\n                styles.Compare,\n                changed(\"registration\") && styles.changed\n              )}\n            >\n              registration: {item.registration.split(\"T\")[0]}\n            </span>\n          )}{\" \"}\n          {Boolean(item.age) && (\n            <span\n              className={cx(styles.Compare, changed(\"age\") && styles.changed)}\n            >\n              age: {item.age}\n            </span>\n          )}{\" \"}\n          {Boolean(item.mileage) && (\n            <span\n              className={cx(\n                styles.Compare,\n                changed(\"mileage\") && styles.changed\n              )}\n            >\n              mileage: {formatNumber(item.mileage)} km\n            </span>\n          )}\n        </li>\n      )}\n      <li>\n        <span\n          className={cx(\n            styles.Compare,\n            changed(\"transactionalPrice\") && styles.changed\n          )}\n        >\n          transactionalPrice: {formatAmount(transactionalPrice)}\n          {Boolean(newPrice) && (\n            <span> ({Math.round((100 * transactionalPrice) / newPrice)}%)</span>\n          )}\n        </span>{\" \"}\n        {Boolean(item.transactionalPriceUpdated) && (\n          <span\n            className={cx(\n              styles.Compare,\n              changed(\"transactionalPriceUpdated\") && styles.changed\n            )}\n            title={item.transactionalPriceUpdated.split(\"+\")[0]}\n          >\n            transactionalPriceUpdated:{\" \"}\n            {item.transactionalPriceUpdated.split(\"T\")[0]}\n          </span>\n        )}{\" \"}\n        {Boolean(item.vatReclaimable) && (\n          <span\n            className={cx(\n              styles.Compare,\n              changed(\"vatReclaimable\") && styles.changed\n            )}\n          >\n            vatReclaimable\n          </span>\n        )}{\" \"}\n        {Boolean(item.warranty) && (\n          <span\n            className={cx(\n              styles.Compare,\n              changed(\"warranty\") && styles.changed\n            )}\n          >\n            warranty: {item.warranty}\n          </span>\n        )}\n      </li>\n      {(_time || item.imagesLastChanged) && (\n        <li>\n          [{_time ? format(Number(_time), \"yyyy-MM-dd HH:mm\") : \"-\"}]{\" \"}\n          <span\n            className={cx(styles.Compare, changed(\"created\") && styles.changed)}\n            title={item.created.split(\"+\")[0]}\n          >\n            created: {item.created.split(\"T\")[0]}\n          </span>{\" \"}\n          {item.imagesLastChanged && (\n            <span\n              className={cx(\n                styles.Compare,\n                changed(\"imagesLastChanged\") && styles.changed\n              )}\n              title={item.imagesLastChanged.split(\"+\")[0]}\n            >\n              imagesLastChanged: {item.imagesLastChanged.split(\"T\")[0]}\n            </span>\n          )}\n        </li>\n      )}\n      {(item._created || item._updated || item._removed) && (\n        <li>\n          {item._created > 0 && (\n            <span className={cx(styles.Compare)}>\n              _created: {format(Number(item._created), \"yyyy-MM-dd HH:mm\")}{\" \"}\n            </span>\n          )}\n          {item._updated > 0 && (\n            <span className={cx(styles.Compare)}>\n              _updated: {format(Number(item._updated), \"yyyy-MM-dd HH:mm\")}{\" \"}\n            </span>\n          )}\n          {item._removed > 0 && (\n            <span className={cx(styles.Compare)}>\n              _removed: {format(Number(item._removed), \"yyyy-MM-dd HH:mm\")}{\" \"}\n            </span>\n          )}\n        </li>\n      )}\n      {!prev && item.leasable && (\n        <li>\n          <Leasing item={item} />\n        </li>\n      )}\n      {!prev && item.options && (\n        <li>\n          <Options options={item.options} />\n        </li>\n      )}\n      {!prev && item._history && (\n        <li>\n          <History item={item} />\n        </li>\n      )}\n    </ul>\n  );\n}\n\nfunction History({ item }: { item: Item }) {\n  const [expand, setExpand] = useState(false);\n\n  const { id } = item;\n\n  return (\n    <div>\n      <div>\n        <Link\n          onClick={(e) => (e.preventDefault(), setExpand((expand) => !expand))}\n        >\n          {expand ? \"Hide history\" : \"Show history\"}\n        </Link>{\" \"}\n        ({Object.keys(item._history).length})\n      </div>\n      {expand &&\n        Object.entries(item._history)\n          .reverse()\n          .map(([_time, _item], key, list) => (\n            <Details\n              key={_time}\n              _time={_time}\n              item={{ id, ..._item }}\n              prev={key ? list[key - 1][1] : item}\n            />\n          ))}\n    </div>\n  );\n}\n\nfunction Leasing({ item }: { item: Vehicle }) {\n  const [expand, setExpand] = useState(false);\n\n  return (\n    <div>\n      <div>\n        <Link\n          onClick={(e) => (e.preventDefault(), setExpand((expand) => !expand))}\n        >\n          {expand ? \"Hide leasing\" : \"Show leasing\"}\n        </Link>{\" \"}\n        {item.comfortLeaseProduct &&\n          (({ label, type, calculationMode }) => (\n            <span>{`${label} (${[type, calculationMode]\n              .filter(Boolean)\n              .join(\" / \")})`}</span>\n          ))(item.comfortLeaseProduct)}{\" \"}\n        {item.leaseProduct &&\n          (({ label, type, calculationMode }) => (\n            <span>{`${label} (${[type, calculationMode]\n              .filter(Boolean)\n              .join(\" / \")})`}</span>\n          ))(item.leaseProduct)}\n      </div>\n      {expand && item.comfortLeaseProduct && (\n        <Calculator productType={ProductTypes.COMFORT_LEASE} vehicle={item} />\n      )}\n      {expand && item.leaseProduct && (\n        <Calculator productType={ProductTypes.LEASE} vehicle={item} />\n      )}\n    </div>\n  );\n}\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./Map.module.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./Map.module.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { useEffect, useMemo, useState } from \"react\";\nimport L from \"leaflet\";\nimport { CircleMarker, MapContainer, TileLayer, Popup } from \"react-leaflet\";\nimport { DraggableMarker, LocateControl } from \"../../components/Map\";\nimport cx from \"classnames\";\nimport styles from \"./Map.module.scss\";\n\nexport function useBounds(list: { position: L.LatLng }[]) {\n  return useMemo(\n    () =>\n      L.featureGroup(\n        list.map(({ position: { lat, lng } }) => L.marker([lat, lng]))\n      ).getBounds(),\n    []\n  );\n}\n\nexport default function Map({ bounds, center, setCenter, list }) {\n  // https://stackoverflow.com/questions/40719689/how-to-include-leaflet-css-in-a-react-app-with-webpack\n  useEffect(() => {\n    delete L.Icon.Default.prototype._getIconUrl;\n    L.Icon.Default.mergeOptions({\n      iconRetinaUrl: require(\"leaflet/dist/images/marker-icon-2x.png\").default,\n      iconUrl: require(\"leaflet/dist/images/marker-icon.png\").default,\n      shadowUrl: require(\"leaflet/dist/images/marker-shadow.png\").default,\n    });\n  }, []);\n\n  // const [map, setMap] = useState<L.Map | null>(null);\n\n  const displayMap = useMemo(\n    () => (\n      <MapContainer\n        bounds={bounds}\n        // whenCreated={setMap}\n        zoom={13}\n        className={cx(styles.Map)}\n      >\n        <TileLayer\n          attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        />\n        <DraggableMarker position={center} setPosition={setCenter}>\n          {`${center.lat},${center.lng}`}\n        </DraggableMarker>\n        {list.map(({ i, id, position, name, item }) => (\n          <CircleMarker\n            key={i}\n            center={position}\n            pathOptions={{ color: \"purple\" }}\n          >\n            <Popup minWidth={90}>\n              <section>\n                <header>\n                  {`[${id}] ${name} (${\n                    center.distanceTo(position).toFixed(0) / 1000\n                  } km)`}\n                </header>\n                {/* <table>\n                  <tbody>\n                    {item.petrol_list.map(({ type, price }, key) => (\n                      <tr key={key}>\n                        <th>{type}</th>\n                        <td>{price}</td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table> */}\n              </section>\n            </Popup>\n          </CircleMarker>\n        ))}\n        <LocateControl />\n      </MapContainer>\n    ),\n    [list, center]\n  );\n\n  // https://react-leaflet.js.org/docs/start-setup/\n  return (\n    <div\n      className={cx(styles.Layout)}\n      onClick={(e) =>\n        ((a) => a && a.getAttribute(\"href\") === \"#close\" && e.preventDefault())(\n          (e.target as Element).closest(\"a\")\n        )\n      }\n    >\n      {displayMap}\n    </div>\n  );\n}\n","import React, { useMemo, useState } from \"react\";\nimport { format } from \"date-fns\";\nimport update from \"immutability-helper\";\nimport { Link } from \"../../components/Link\";\n\nconst sortByKey = (list: object) =>\n  Object.entries(list)\n    .sort(([a], [b]) => (a < b ? 1 : -1))\n    .reduce((list, [key, item]) => Object.assign(list, { [key]: item }), {});\n\nexport default function Summary({\n  list,\n  results,\n}: {\n  list: { item: { _created?: number; _updated?: number; _removed?: number } }[];\n  results: {\n    item: { _created?: number; _updated?: number; _removed?: number };\n  }[];\n}) {\n  const [expand, setExpand] = useState(false);\n  const summary = useMemo(\n    () =>\n      update(\n        list.reduce(\n          (summary, { item }) =>\n            Object.assign(\n              summary,\n              item._created\n                ? {\n                    created: update(summary.created, {\n                      [format(item._created, \"yyyy-MM-dd\")]: {\n                        $apply: (count = 0) => count + 1,\n                      },\n                    }),\n                  }\n                : {},\n              item._updated\n                ? {\n                    updated: update(summary.updated, {\n                      [format(item._updated, \"yyyy-MM-dd\")]: {\n                        $apply: (count = 0) => count + 1,\n                      },\n                    }),\n                  }\n                : {},\n              item._removed\n                ? {\n                    removed: update(summary.removed, {\n                      [format(item._removed, \"yyyy-MM-dd\")]: {\n                        $apply: (count = 0) => count + 1,\n                      },\n                    }),\n                  }\n                : {}\n            ),\n          {\n            created: {},\n            updated: {},\n            removed: {},\n          }\n        ),\n        {\n          created: {\n            $apply: sortByKey,\n          },\n          updated: {\n            $apply: sortByKey,\n          },\n          removed: {\n            $apply: sortByKey,\n          },\n        }\n      ),\n    [list]\n  );\n  return (\n    <div>\n      <div>\n        {`Found ${list.length} vehicles out of a total of ${results.length}`}{\" \"}\n        <Link\n          onClick={(e) => (e.preventDefault(), setExpand((expand) => !expand))}\n        >\n          {expand ? \"Hide summary\" : \"Show summary\"}\n        </Link>\n      </div>\n      {expand && <pre>{JSON.stringify(summary, null, 2)}</pre>}\n    </div>\n  );\n}\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./styles.module.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./styles.module.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, {\n  ChangeEventHandler,\n  Dispatch,\n  MouseEventHandler,\n  SetStateAction,\n  useCallback,\n  useEffect,\n  useMemo,\n  useState,\n} from \"react\";\nimport { Subject } from \"rxjs\";\nimport { debounceTime, distinctUntilChanged, map } from \"rxjs/operators\";\nimport { format } from \"date-fns\";\nimport { createAsset } from \"use-asset\";\nimport createKDTree from \"static-kdtree\";\nimport createPersistedState from \"use-persisted-state\";\nimport update from \"immutability-helper\";\nimport { Gallery } from \"../../components/Gallery\";\nimport { Link } from \"../../components/Link\";\nimport Chart from \"./Chart\";\nimport Details, { Favorite, Toggle } from \"./Details\";\nimport Map, { useBounds } from \"./Map\";\nimport Summary from \"./Summary\";\nimport styles from \"./styles.module.scss\";\n\ntype Criterion = {\n  selected: string;\n  list: {\n    criteria: unknown;\n    label: string;\n  }[];\n};\n\nconst GROUP_BY = {\n  \"\": \"\",\n  brand: \"Brand\",\n  modelCode: \"Model Code\",\n  seriesCode: \"Series Code\",\n  productionYear: \"Production Year\",\n  _removed: \"Sold\",\n};\nconst SORT_BY = {\n  registration: -1,\n  transactionalPrice: 1,\n  mileage: 1,\n  consumptionFuel: 1,\n  productionYear: -1,\n  powerHP: -1,\n  newPrice: -1,\n  optionsPrice: -1,\n  accessoriesPrice: -1,\n  warranty: -1,\n  modelCode: 1,\n  seriesCode: 1,\n  title: 1,\n  _created: -1,\n  _updated: -1,\n  _removed: -1,\n};\nconst RADIUS_LIST = [1, 3, 5, 10, 20, 50, 100, 500];\nconst PRICE_LIST = [\n  0, 100000, 200000, 300000, 400000, 500000, 600000, 700000, 800000, 900000,\n  1000000,\n];\nconst MILEAGE_LIST = [\n  0, 1000, 5000, 10000, 20000, 50000, 100000, 150000, 200000, 500000,\n];\nconst POWER_LIST = [0, 100, 150, 200, 250, 300, 400, 500, 600, 700, 800, 900];\nconst TYPES = {\n  \"\": \"\",\n  N: \"New\",\n  U: \"Used\",\n};\nconst YEAR_LIST = [...Array(15)]\n  .map((_, i) => new Date().getFullYear() - i)\n  .reverse();\n\nconst formatNumber = (value: number) => new Intl.NumberFormat().format(value);\n\nconst formatAmount = (value: number) => `${formatNumber(value)} pln`;\n\nconst useCriterion = createPersistedState<Criterion>(\"criterion-vehicles\");\nconst useFavorites = createPersistedState<string[]>(\"favorites-vehicles\");\n\nconst priceHistory = ({\n  _history = {},\n  ...item\n}: {\n  _history: Record<string, { transactionalPrice: number }>;\n  transactionalPrice: number;\n}) =>\n  [item.transactionalPrice]\n    .concat(Object.values(_history).map((item) => item.transactionalPrice))\n    .filter(\n      (value: any, index: number, array: any[]) =>\n        array.indexOf(value) === index\n    );\n\n// https://github.com/pmndrs/use-asset#dealing-with-async-assets\nconst asset = createAsset(async (version) => {\n  const res = await fetch(`api/vehicles/data.json?${version}`);\n  return await res\n    .json()\n    .then(({ results }) => results) // 236 MB -> 26.1 MB\n    .then((list: Record<string, any>[]) => ({\n      results: list,\n      options: list.reduce(\n        (options, item) =>\n          [\n            \"dealer\",\n            \"bodyType\",\n            \"driveType\",\n            \"brand\",\n            \"color\",\n            \"fuel\",\n            \"series\",\n            \"seriesCode\",\n            \"modelCode\",\n            \"transmission\",\n            \"gearBox\",\n            \"vatReclaimable\",\n            \"warranty\",\n          ].reduce(\n            (options, prop) => ({\n              ...options,\n              [prop]: Object.assign(\n                {},\n                options[prop],\n                typeof item[prop] === \"object\"\n                  ? {\n                      [item[prop].id]: item[prop].label || item[prop].name,\n                    }\n                  : {\n                      [item[prop]]: item[prop],\n                    }\n              ),\n            }),\n            options\n          ),\n        {}\n      ),\n    }))\n    .then(({ options, ...rest }) => {\n      Object.keys(options).forEach((key) =>\n        Object.assign(options, {\n          [key]: Object.entries(options[key])\n            .sort(([a], [b]) => (String(a) > String(b) ? 1 : -1))\n            .reduce(\n              (result, [key, value]) => Object.assign(result, { [key]: value }),\n              {}\n            ),\n        })\n      );\n      return { options, ...rest };\n    });\n});\n\nconst createCriteria =\n  ({ search, options }: { search: string; options: object }) =>\n  (defaults = {}) =>\n    Object.assign(\n      {\n        filter: search,\n        groupBy: Object.keys(GROUP_BY)[0],\n        sortBy: Object.keys(SORT_BY)[13],\n        type: Object.keys(TYPES)[0],\n        radius: RADIUS_LIST[RADIUS_LIST.length - 1],\n\n        priceFrom: PRICE_LIST[0],\n        priceTo: PRICE_LIST[PRICE_LIST.length - 1],\n\n        mileageFrom: MILEAGE_LIST[0],\n        mileageTo: MILEAGE_LIST[MILEAGE_LIST.length - 1],\n\n        powerFrom: POWER_LIST[0],\n        powerTo: POWER_LIST[POWER_LIST.length - 1],\n\n        yearFrom: YEAR_LIST[0],\n        yearTo: YEAR_LIST[YEAR_LIST.length - 1],\n\n        createdFrom: format(Date.now() - 1000 * 3600 * 24 * 30, \"yyyy-MM-dd\"),\n        createdTo: format(Date.now(), \"yyyy-MM-dd\"),\n\n        entries: Object.keys(options).reduce(\n          (criteria, prop) =>\n            Object.assign(criteria, {\n              [prop]: \"\",\n            }),\n          {}\n        ),\n\n        options: \"\",\n\n        removed: \"0\",\n        changedPrice: false,\n      },\n      defaults\n    );\n\ntype CriteriaType = ReturnType<ReturnType<typeof createCriteria>>;\n\nfunction Data({ version = \"v1\" }) {\n  const { results, options } = asset.read(version); // As many cache keys as you need\n\n  const [search, setSearch] = useState(\"\");\n\n  const [criteria, setCriteria] = useState(createCriteria({ search, options }));\n\n  const search$ = useMemo(() => new Subject<string>(), []);\n\n  useEffect(() => {\n    const subscription = search$\n      .pipe(\n        map((search) => search.trim()),\n        distinctUntilChanged(),\n        debounceTime(400)\n      )\n      .subscribe((filter) =>\n        setCriteria((criteria) => ({ ...criteria, filter }))\n      );\n    return () => subscription.unsubscribe();\n  }, [search$]);\n\n  useEffect(() => {\n    search$.next(search);\n  }, [search]);\n\n  const onClickCompare = useCallback<MouseEventHandler>(\n    ({ target }) => {\n      const _id = (target as HTMLButtonElement).value;\n      const getPoint = (item: any) => [\n        // item.capacity,\n        item.powerHP,\n        // item.consumptionFuel,\n        // item.emission,\n        item.newPrice,\n        item.optionsPrice,\n        item.productionYear,\n        // item.age,\n        item.mileage,\n        item.transactionalPrice,\n        item.warranty,\n      ];\n\n      const tree = createKDTree(results.map(getPoint));\n\n      console.table(\n        tree\n          .knn(getPoint(results.find((item: any) => item._id === _id)), 10)\n          .slice(0, 10)\n          .map((index) => results[index])\n          .map((item) => [\n            item.id,\n            item.title,\n            // item.capacity,\n            item.powerHP,\n            // item.consumptionFuel,\n            // item.emission,\n            item.newPrice,\n            item.optionsPrice,\n            item.productionYear,\n            // item.age,\n            item.mileage,\n            item.transactionalPrice,\n            item.warranty,\n          ])\n      );\n    },\n    [results]\n  );\n\n  console.log({ options, criteria, results });\n\n  const list = useMemo(() => {\n    const criteriaOptions = criteria.options\n      .split(\"\\n\")\n      .map((line) => line.trim())\n      .filter(Boolean);\n    console.log({ criteriaOptions });\n    return results\n      .map((item, i) => {\n        const {\n          id,\n          dealer: { name, lat, lng },\n        } = item;\n        return {\n          i,\n          id,\n          position: { lat, lng },\n          name,\n          item,\n        };\n      })\n      .filter(({ item }) =>\n        ((labels) =>\n          labels.includes(String(item.id)) ||\n          ((item.title.toLowerCase().match(criteria.filter) ||\n            labels.includes(\n              typeof item.seriesCode === \"object\"\n                ? item.seriesCode.label\n                : item.seriesCode\n            ) ||\n            labels.includes(\n              typeof item.modelCode === \"object\"\n                ? item.modelCode.label\n                : item.modelCode\n            )) &&\n            [\"\", item.isNew ? \"N\" : \"U\"].includes(criteria.type) &&\n            (criteria.removed == \"\" ||\n              criteria.removed === ((item._removed || 0) > 0 ? \"1\" : \"0\")) &&\n            criteria.priceFrom <= item.transactionalPrice &&\n            item.transactionalPrice <= criteria.priceTo &&\n            (item.mileage === undefined ||\n              (criteria.mileageFrom <= item.mileage &&\n                item.mileage <= criteria.mileageTo)) &&\n            criteria.powerFrom <= item.powerHP &&\n            item.powerHP <= criteria.powerTo &&\n            criteria.yearFrom <= item.productionYear &&\n            item.productionYear <= criteria.yearTo &&\n            new Date(`${criteria.createdFrom} 00:00:00`).getTime() <=\n              item._created &&\n            item._created <=\n              new Date(`${criteria.createdTo} 23:59:59`).getTime() &&\n            (!criteria.changedPrice || priceHistory(item).length > 1) &&\n            (!criteriaOptions.length ||\n              criteriaOptions.every((option) =>\n                (item.options || []).includes(option)\n              )) &&\n            Object.entries(criteria.entries).findIndex(\n              ([prop, value]) =>\n                ![\n                  String(\n                    typeof item[prop] === \"object\" ? item[prop].id : item[prop]\n                  ),\n                  \"\",\n                ].includes(value)\n            ) === -1))(\n          (criteria.filter as string).split(\",\").map((s) => s.trim())\n        )\n      );\n  }, [results, criteria]);\n\n  const bounds = useBounds(\n    list.length\n      ? list\n      : [\n          {\n            position: {\n              lat: process.env.NEARBY_LAT,\n              lng: process.env.NEARBY_LNG,\n            },\n          },\n        ]\n  );\n  const [center, setCenter] = useState(() => bounds.getCenter());\n\n  const nearby = useMemo(\n    () =>\n      list.filter(\n        ({ position }: { position: { lat: number; lng: number } }) =>\n          center.distanceTo(position) < criteria.radius * 1000\n      ),\n    [list, center, criteria.radius]\n  );\n\n  const sorted = useMemo(\n    () =>\n      list.sort(\n        (a, b) =>\n          SORT_BY[criteria.sortBy as keyof typeof SORT_BY] *\n          (a.item[criteria.sortBy] === b.item[criteria.sortBy]\n            ? 0\n            : (a.item[criteria.sortBy] || 0) > (b.item[criteria.sortBy] || 0)\n            ? 1\n            : -1)\n      ),\n    [list, criteria.sortBy]\n  );\n\n  const grouped = useMemo(\n    () =>\n      sorted.reduce(\n        (grouped: Record<string, object[]>, item: any) =>\n          ((group) =>\n            Object.assign(grouped, {\n              [group]: (grouped[group] || []).concat(item),\n            }))(\n            typeof item.item[criteria.groupBy] === \"object\"\n              ? item.item[criteria.groupBy].label\n              : item.item[criteria.groupBy] || \"\"\n          ),\n        {}\n      ),\n    [sorted, criteria.groupBy]\n  );\n\n  const [favorites, setFavorites] = useFavorites([]);\n\n  const [criterion, setCriterion] = useCriterion(() => ({\n    selected: \"\",\n    list: [],\n  }));\n\n  useEffect(() => {\n    if (criterion.selected !== \"\") {\n      const { criteria } = criterion.list[Number(criterion.selected)] as {\n        criteria: CriteriaType;\n      };\n      setCriteria(createCriteria({ search, options })(criteria));\n      setSearch(criteria.filter);\n    }\n  }, [setCriteria, setSearch, criterion.selected]);\n\n  const [expand, setExpand] = useState(() => ({ map: false, chart: false }));\n\n  return (\n    <div>\n      <div>\n        <Link\n          onClick={(e) => (\n            e.preventDefault(),\n            setExpand((expand) => ({ ...expand, map: !expand.map }))\n          )}\n        >\n          {expand.map ? \"Hide map\" : \"Show map\"}\n        </Link>{\" \"}\n        {expand.map && (\n          <Map\n            bounds={bounds}\n            center={center}\n            setCenter={setCenter}\n            list={nearby}\n          />\n        )}\n      </div>\n      <div>\n        <Link\n          onClick={(e) => (\n            e.preventDefault(),\n            setExpand((expand) => ({ ...expand, chart: !expand.chart }))\n          )}\n        >\n          {expand.chart ? \"Hide chart\" : \"Show chart\"}\n        </Link>{\" \"}\n        {expand.chart && (\n          <Chart list={list} onSelect={(id: number) => setSearch(String(id))} />\n        )}\n      </div>\n      <Criteria\n        criteria={criteria}\n        options={options}\n        setCriteria={setCriteria}\n        search={search}\n        setSearch={setSearch}\n      />\n      <CriteriaLabel {...criteria} options={options} />\n      <SavedFilters\n        criterion={criterion}\n        setCriterion={setCriterion}\n        criteria={criteria}\n      />\n      <Favorite\n        favorites={favorites}\n        setFavorites={setFavorites}\n        setSearch={setSearch}\n      />\n      <Summary list={list} results={results} />\n      {Object.entries(grouped).map(([group, sorted]) => (\n        <section key={group}>\n          {group && <h3>{group}</h3>}\n          <ol>\n            {sorted\n              .slice(0, 100)\n              .map(({ item }) => item)\n              .map(\n                ({\n                  id,\n                  images,\n                  srcSet,\n                  ...item\n                }: {\n                  id: string;\n                  images: string[];\n                  srcSet: string[];\n                }) => (\n                  <li key={id} className={styles.Row}>\n                    <Gallery\n                      className={styles.Gallery}\n                      images={images}\n                      srcSet={srcSet}\n                    />\n                    <Details\n                      item={{ id, ...item }}\n                      onClickCompare={onClickCompare}\n                      favorites={favorites}\n                      setFavorites={setFavorites}\n                      setSearch={setSearch}\n                    />\n                  </li>\n                )\n              )}\n          </ol>\n        </section>\n      ))}\n    </div>\n  );\n}\n\nfunction SavedFilters({\n  criterion,\n  setCriterion,\n  criteria,\n}: {\n  criterion: Criterion;\n  setCriterion: Dispatch<SetStateAction<Criterion>>;\n  criteria: CriteriaType;\n}) {\n  const onCreateFilter = useCallback(\n    () =>\n      ((label) =>\n        label &&\n        setCriterion((criterion) => ({\n          ...criterion,\n          selected: String(criterion.list.length),\n          list: criterion.list.concat([{ label, criteria }]),\n        })))(prompt(\"Filter name:\")),\n    [criterion, criteria]\n  );\n\n  const onUpdateFilter = useCallback(\n    () =>\n      setCriterion((criterion) =>\n        update(criterion, {\n          list: {\n            [criterion.selected]: {\n              criteria: {\n                $apply: () => criteria,\n              },\n            },\n          },\n        })\n      ),\n    [criterion, criteria]\n  );\n\n  const onRenameFilter = useCallback(\n    () =>\n      setCriterion((criterion) =>\n        update(criterion, {\n          list: {\n            [criterion.selected]: {\n              label: {\n                $apply: (label: string) =>\n                  prompt(\"Rename filter:\", label) || label,\n              },\n            },\n          },\n        })\n      ),\n    [criterion]\n  );\n\n  const onRemoveFilter = useCallback(\n    () =>\n      confirm(\"Remove criteria?\") &&\n      setCriterion((criterion) => ({\n        ...criterion,\n        selected: \"\",\n        list: criterion.list.filter(\n          (_item, key) => String(key) !== criterion.selected\n        ),\n      })),\n    [criterion]\n  );\n\n  const sameCriteria = useMemo(\n    () =>\n      criterion.selected !== \"\" &&\n      JSON.stringify(criterion.list[Number(criterion.selected)].criteria) ===\n        JSON.stringify(criteria),\n    [criterion, criteria]\n  );\n\n  return (\n    <div>\n      <label>\n        <span>Saved Filters</span>\n        <select\n          value={criterion.selected}\n          onChange={useCallback<ChangeEventHandler<HTMLSelectElement>>(\n            ({ target }) =>\n              setCriterion((criterion) => ({\n                ...criterion,\n                selected: target.value,\n              })),\n            [criterion]\n          )}\n        >\n          <option value=\"\">--</option>\n          {criterion.list.map(({ label }, value) => (\n            <option key={value} value={String(value)}>\n              {label}\n            </option>\n          ))}\n        </select>\n        {criterion.selected === \"\" ? (\n          <button onClick={onCreateFilter}>Save as new criteria</button>\n        ) : (\n          <>\n            <button onClick={onUpdateFilter} disabled={sameCriteria}>\n              Update criteria\n            </button>\n            <button onClick={onRenameFilter}>Rename criteria</button>\n            <button onClick={onRemoveFilter}>Remove criteria</button>\n          </>\n        )}\n      </label>\n    </div>\n  );\n}\n\nfunction CriteriaLabel({\n  filter,\n  options,\n  entries,\n  groupBy,\n  type,\n  yearFrom,\n  yearTo,\n  createdFrom,\n  createdTo,\n  priceFrom,\n  priceTo,\n  mileageFrom,\n  mileageTo,\n  powerFrom,\n  powerTo,\n  radius,\n  sortBy,\n}: CriteriaType) {\n  return (\n    <fieldset>\n      {type && (\n        <div>\n          <span>Type</span> <span>{TYPES[type as keyof typeof TYPES]}</span>\n        </div>\n      )}\n      {filter && (\n        <div>\n          <span>Search</span> <span>{filter}</span>\n        </div>\n      )}\n      <div>\n        <span>Sort</span> <span>{sortBy}</span>\n      </div>\n      {groupBy && (\n        <div>\n          <span>GroupBy</span> <span>{groupBy}</span>\n        </div>\n      )}\n      <div>\n        <span>Radius</span> <span>{`max ${radius} km`}</span>\n      </div>\n      <div>\n        <span>Year</span> <span>{`${yearFrom} - ${yearTo}`}</span>\n      </div>\n      <div>\n        <span>Mileage</span>{\" \"}\n        <span>{`${formatNumber(mileageFrom)} - ${formatNumber(\n          mileageTo\n        )} km`}</span>\n      </div>\n      <div>\n        <span>Price</span>{\" \"}\n        <span>{`${formatNumber(priceFrom)} - ${formatAmount(priceTo)}`}</span>\n      </div>\n      <div>\n        <span>Power</span> <span>{`${powerFrom} - ${powerTo} hp`}</span>\n      </div>\n      <div>\n        <span>Created</span> <span>{`${createdFrom} - ${createdTo}`}</span>\n      </div>\n      {Object.entries(entries)\n        .filter(([, value]: any) => value !== \"\")\n        .map(([name, value]: any, key) => (\n          <div key={key}>\n            <span>{name}</span> <span>{options[name][value]}</span>\n          </div>\n        ))}\n    </fieldset>\n  );\n}\n\nfunction Criteria({\n  criteria: {\n    entries,\n    groupBy,\n    type,\n    yearFrom,\n    yearTo,\n    createdFrom,\n    createdTo,\n    priceFrom,\n    priceTo,\n    mileageFrom,\n    mileageTo,\n    powerFrom,\n    powerTo,\n    radius,\n    sortBy,\n    removed,\n    changedPrice,\n    options,\n  },\n  options: entriesOptions,\n  search,\n  setCriteria,\n  setSearch,\n}: {\n  criteria: CriteriaType;\n  options: Record<string, any>;\n  search: string;\n  setCriteria: Dispatch<SetStateAction<CriteriaType>>;\n  setSearch: Dispatch<SetStateAction<string>>;\n}) {\n  const onChangeSearch = useCallback<ChangeEventHandler<HTMLInputElement>>(\n    ({ target }) => setSearch(target.value),\n    []\n  );\n\n  const onChangeCriteria = useCallback<ChangeEventHandler<HTMLSelectElement>>(\n    ({ target }) =>\n      setCriteria(({ entries, ...criteria }) => ({\n        ...criteria,\n        entries: {\n          ...entries,\n          [target.name]: target.value,\n        },\n      })),\n    []\n  );\n\n  const onChangeRadius = useCallback<ChangeEventHandler<HTMLInputElement>>(\n    ({ target }) =>\n      setCriteria((criteria) => ({\n        ...criteria,\n        radius: Number(target.value),\n      })),\n    []\n  );\n\n  const onChangePriceFrom = useCallback<ChangeEventHandler<HTMLInputElement>>(\n    ({ target }) =>\n      setCriteria(({ priceTo, ...criteria }) => {\n        const priceFrom = Number(target.value);\n        return {\n          ...criteria,\n          priceFrom,\n          priceTo: priceTo < priceFrom ? priceFrom : priceTo,\n        };\n      }),\n    []\n  );\n  const onChangePriceTo = useCallback<ChangeEventHandler<HTMLInputElement>>(\n    ({ target }) =>\n      setCriteria(({ priceFrom, ...criteria }) => {\n        const priceTo = Number(target.value);\n        return {\n          ...criteria,\n          priceFrom: priceTo > priceFrom ? priceFrom : priceTo,\n          priceTo,\n        };\n      }),\n    []\n  );\n\n  const onChangeMileageFrom = useCallback<ChangeEventHandler<HTMLInputElement>>(\n    ({ target }) =>\n      setCriteria(({ mileageTo, ...criteria }) => {\n        const mileageFrom = Number(target.value);\n        return {\n          ...criteria,\n          mileageFrom,\n          mileageTo: mileageTo < mileageFrom ? mileageFrom : mileageTo,\n        };\n      }),\n    []\n  );\n  const onChangeMileageTo = useCallback<ChangeEventHandler<HTMLInputElement>>(\n    ({ target }) =>\n      setCriteria(({ mileageFrom, ...criteria }) => {\n        const mileageTo = Number(target.value);\n        return {\n          ...criteria,\n          mileageFrom: mileageTo > mileageFrom ? mileageFrom : mileageTo,\n          mileageTo,\n        };\n      }),\n    []\n  );\n\n  const onChangePowerFrom = useCallback<ChangeEventHandler<HTMLInputElement>>(\n    ({ target }) =>\n      setCriteria(({ powerTo, ...criteria }) => {\n        const powerFrom = Number(target.value);\n        return {\n          ...criteria,\n          powerFrom,\n          powerTo: powerTo < powerFrom ? powerFrom : powerTo,\n        };\n      }),\n    []\n  );\n  const onChangePowerTo = useCallback<ChangeEventHandler<HTMLInputElement>>(\n    ({ target }) =>\n      setCriteria(({ powerFrom, ...criteria }) => {\n        const powerTo = Number(target.value);\n        return {\n          ...criteria,\n          powerFrom: powerTo > powerFrom ? powerFrom : powerTo,\n          powerTo,\n        };\n      }),\n    []\n  );\n\n  const onChangeYearFrom = useCallback<ChangeEventHandler<HTMLInputElement>>(\n    ({ target }) =>\n      setCriteria(({ yearTo, ...criteria }) => {\n        const yearFrom = Number(target.value);\n        return {\n          ...criteria,\n          yearFrom,\n          yearTo: yearTo < yearFrom ? yearFrom : yearTo,\n        };\n      }),\n    []\n  );\n  const onChangeYearTo = useCallback<ChangeEventHandler<HTMLInputElement>>(\n    ({ target }) =>\n      setCriteria(({ yearFrom, ...criteria }) => {\n        const yearTo = Number(target.value);\n        return {\n          ...criteria,\n          yearFrom: yearTo > yearFrom ? yearFrom : yearTo,\n          yearTo,\n        };\n      }),\n    []\n  );\n\n  const onChangeCreatedFrom = useCallback<ChangeEventHandler<HTMLInputElement>>(\n    ({ target }) =>\n      setCriteria(({ createdTo, ...criteria }) => {\n        const createdFrom = target.value;\n        return {\n          ...criteria,\n          createdFrom,\n          createdTo: createdTo < createdFrom ? createdFrom : createdTo,\n        };\n      }),\n    []\n  );\n  const onChangeCreatedTo = useCallback<ChangeEventHandler<HTMLInputElement>>(\n    ({ target }) =>\n      setCriteria(({ createdFrom, ...criteria }) => {\n        const createdTo = target.value;\n        return {\n          ...criteria,\n          createdFrom: createdTo > createdFrom ? createdFrom : createdTo,\n          createdTo,\n        };\n      }),\n    []\n  );\n\n  return (\n    <fieldset className={styles.Filters}>\n      <div>\n        <label>\n          <span>Type</span>\n          <select\n            value={type}\n            onChange={useCallback<ChangeEventHandler<HTMLSelectElement>>(\n              ({ target }) =>\n                setCriteria((criteria) => ({\n                  ...criteria,\n                  type: target.value,\n                })),\n              []\n            )}\n          >\n            {Object.entries(TYPES).map(([value, label]) => (\n              <option key={value} value={value}>\n                {label}\n              </option>\n            ))}\n          </select>\n        </label>\n        <label>\n          <span>Search</span>\n          <input type=\"search\" value={search} onChange={onChangeSearch} />\n        </label>\n        <label>\n          <span>Sort</span>\n          <select\n            value={sortBy}\n            onChange={useCallback<ChangeEventHandler<HTMLSelectElement>>(\n              ({ target }) =>\n                setCriteria((criteria) => ({\n                  ...criteria,\n                  sortBy: target.value,\n                })),\n              []\n            )}\n          >\n            {Object.entries(SORT_BY).map(([value]) => (\n              <option key={value} value={value}>\n                {value}\n              </option>\n            ))}\n          </select>\n        </label>\n        <label>\n          <span>GroupBy</span>\n          <select\n            value={groupBy}\n            onChange={useCallback<ChangeEventHandler<HTMLSelectElement>>(\n              ({ target }) =>\n                setCriteria((criteria) => ({\n                  ...criteria,\n                  groupBy: target.value,\n                })),\n              []\n            )}\n          >\n            {Object.entries(GROUP_BY).map(([value, label]) => (\n              <option key={value} value={value}>\n                {label}\n              </option>\n            ))}\n          </select>\n        </label>\n      </div>\n      <div>\n        <label>\n          <span>Radius</span>\n          <input\n            type=\"range\"\n            list=\"range-list\"\n            min={RADIUS_LIST[0]}\n            max={RADIUS_LIST[RADIUS_LIST.length - 1]}\n            value={radius}\n            onChange={onChangeRadius}\n          />\n          <datalist id=\"range-list\">\n            {RADIUS_LIST.map((value) => (\n              <option\n                key={value}\n                value={value}\n                label={[1, 25, 100].includes(value) ? `${value} km` : undefined}\n              ></option>\n            ))}\n          </datalist>\n          <span>{`max ${radius} km`}</span>\n        </label>\n      </div>\n      <div>\n        <label>\n          <span>Year From</span>\n          <input\n            type=\"range\"\n            list=\"year-list\"\n            min={YEAR_LIST[0]}\n            max={YEAR_LIST[YEAR_LIST.length - 1]}\n            value={yearFrom}\n            onChange={onChangeYearFrom}\n          />\n          <datalist id=\"year-list\">\n            {YEAR_LIST.map((value) => (\n              <option\n                key={value}\n                value={value}\n                label={\n                  [0, 2010, 2015, 2020].includes(value) ? `${value}` : undefined\n                }\n              ></option>\n            ))}\n          </datalist>\n        </label>\n        <label>\n          <span>Year To</span>\n          <input\n            type=\"range\"\n            list=\"year-list\"\n            min={YEAR_LIST[0]}\n            max={YEAR_LIST[YEAR_LIST.length - 1]}\n            value={yearTo}\n            onChange={onChangeYearTo}\n          />\n          <span>{`${yearFrom} - ${yearTo}`}</span>\n        </label>\n      </div>\n      <div>\n        <label>\n          <span>Mileage From</span>\n          <input\n            type=\"range\"\n            list=\"mileage-list\"\n            min={MILEAGE_LIST[0]}\n            max={MILEAGE_LIST[MILEAGE_LIST.length - 1]}\n            value={mileageFrom}\n            onChange={onChangeMileageFrom}\n          />\n          <datalist id=\"mileage-list\">\n            {MILEAGE_LIST.map((value) => (\n              <option\n                key={value}\n                value={value}\n                label={MILEAGE_LIST.includes(value) ? `${value}` : undefined}\n              ></option>\n            ))}\n          </datalist>\n        </label>\n        <label>\n          <span>Mileage To</span>\n          <input\n            type=\"range\"\n            list=\"mileage-list\"\n            min={MILEAGE_LIST[0]}\n            max={MILEAGE_LIST[MILEAGE_LIST.length - 1]}\n            value={mileageTo}\n            onChange={onChangeMileageTo}\n          />\n          <span>{`${mileageFrom} - ${mileageTo} km`}</span>\n        </label>\n      </div>\n      <div>\n        <label>\n          <span>Price From</span>\n          <input\n            type=\"range\"\n            list=\"price-list\"\n            min={PRICE_LIST[0]}\n            max={PRICE_LIST[PRICE_LIST.length - 1]}\n            value={priceFrom}\n            onChange={onChangePriceFrom}\n          />\n          <datalist id=\"price-list\">\n            {PRICE_LIST.map((value) => (\n              <option\n                key={value}\n                value={value}\n                label={\n                  [0, 100000, 200000, 300000, 400000, 500000].includes(value)\n                    ? formatAmount(value)\n                    : undefined\n                }\n              ></option>\n            ))}\n          </datalist>\n        </label>\n        <label>\n          <span>Price To</span>\n          <input\n            type=\"range\"\n            list=\"price-list\"\n            min={PRICE_LIST[0]}\n            max={PRICE_LIST[PRICE_LIST.length - 1]}\n            value={priceTo}\n            onChange={onChangePriceTo}\n          />\n          <span>{`${formatNumber(priceFrom)} - ${formatAmount(priceTo)}`}</span>\n        </label>\n      </div>\n      <div>\n        <label>\n          <span>Power From</span>\n          <input\n            type=\"range\"\n            list=\"power-list\"\n            min={POWER_LIST[0]}\n            max={POWER_LIST[POWER_LIST.length - 1]}\n            value={powerFrom}\n            onChange={onChangePowerFrom}\n          />\n          <datalist id=\"power-list\">\n            {POWER_LIST.map((value) => (\n              <option\n                key={value}\n                value={value}\n                label={POWER_LIST.includes(value) ? `${value} hp` : undefined}\n              ></option>\n            ))}\n          </datalist>\n        </label>\n        <label>\n          <span>Power To</span>\n          <input\n            type=\"range\"\n            list=\"power-list\"\n            min={POWER_LIST[0]}\n            max={POWER_LIST[POWER_LIST.length - 1]}\n            value={powerTo}\n            onChange={onChangePowerTo}\n          />\n          <span>{`${powerFrom} - ${powerTo} hp`}</span>\n        </label>\n      </div>\n      <div>\n        <label>\n          <span>Created From</span>\n          <input\n            type=\"date\"\n            value={createdFrom}\n            onChange={onChangeCreatedFrom}\n          />\n        </label>\n        <label>\n          <span>Created To</span>\n          <input type=\"date\" value={createdTo} onChange={onChangeCreatedTo} />\n        </label>\n      </div>\n      {Object.entries(entries)\n        .filter(([name]) => entriesOptions[name])\n        .map(([name, value]: [string, any], key) => (\n          <div key={key}>\n            <label>\n              <span>{name}</span>\n              <select name={name} value={value} onChange={onChangeCriteria}>\n                <option value={\"\"}>--</option>\n                {Object.entries(entriesOptions[name]).map(\n                  ([value, label]: any) => (\n                    <option key={value} value={value}>\n                      {label}\n                    </option>\n                  )\n                )}\n              </select>\n            </label>\n          </div>\n        ))}\n      <div>\n        <label>\n          <span>Sold</span>\n          <select\n            value={removed}\n            onChange={useCallback<ChangeEventHandler<HTMLSelectElement>>(\n              ({ target }) =>\n                setCriteria((criteria) => ({\n                  ...criteria,\n                  removed: target.value,\n                })),\n              []\n            )}\n          >\n            {[\"\", \"0\", \"1\"].map((value) => (\n              <option key={value} value={value}>\n                {value}\n              </option>\n            ))}\n          </select>\n        </label>\n        <Toggle\n          checked={changedPrice}\n          onChange={() =>\n            setCriteria(({ changedPrice, ...criteria }) => ({\n              ...criteria,\n              changedPrice: !changedPrice,\n            }))\n          }\n        >\n          Changed Price\n        </Toggle>\n      </div>\n      <div className={styles.Textarea}>\n        <textarea\n          value={options}\n          onChange={({ target }) =>\n            setCriteria(({ ...criteria }) => ({\n              ...criteria,\n              options: target.value,\n            }))\n          }\n          rows={4}\n        />\n      </div>\n    </fieldset>\n  );\n}\n\nexport default function Section() {\n  return (\n    <div className={styles.Section}>\n      <h2>Vehicles</h2>\n      <Data />\n    </div>\n  );\n}\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".jym2UAfwYghQzKOP2VHa{position:relative;border:2px solid red}.jym2UAfwYghQzKOP2VHa svg{width:100%;height:50vh}.jym2UAfwYghQzKOP2VHa .s381NcqWwmo0Qir3pBAh{position:absolute}.s381NcqWwmo0Qir3pBAh{background:#fff;border:1px solid #add8e6;color:orange;padding:.25em}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/containers/Vehicles/Chart.module.scss\"],\"names\":[],\"mappings\":\"AAAA,sBACE,iBAAA,CACA,oBAAA,CAEA,0BACE,UAAA,CACA,WAAA,CAEF,4CACE,iBAAA,CAGJ,sBACE,eAAA,CACA,wBAAA,CACA,YAAA,CACA,aAAA\",\"sourcesContent\":[\".Chart {\\n  position: relative;\\n  border: 2px solid red;\\n\\n  svg {\\n    width: 100%;\\n    height: 50vh;\\n  }\\n  .Tooltip {\\n    position: absolute;\\n  }\\n}\\n.Tooltip {\\n  background: white;\\n  border: 1px solid lightblue;\\n  color: orange;\\n  padding: 0.25em;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"Chart\": \"jym2UAfwYghQzKOP2VHa\",\n\t\"Tooltip\": \"s381NcqWwmo0Qir3pBAh\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".WxZjqAgDNtEj1r0BAH_n{display:inline-block;width:1em;height:1em;border:2px solid #000;border-radius:50%}.sntbET3DFXccQAcVLZoR{color:gray}.sntbET3DFXccQAcVLZoR .n7Ckn4B51ojnidtrmrHE{color:#000}.sntbET3DFXccQAcVLZoR .n7Ckn4B51ojnidtrmrHE.uYB5YawKyZmXpM6I8lyQ{color:red}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/containers/Vehicles/Details.module.scss\"],\"names\":[],\"mappings\":\"AAAA,sBACE,oBAAA,CACA,SAAA,CACA,UAAA,CACA,qBAAA,CACA,iBAAA,CAEF,sBACE,UAAA,CAEA,4CACE,UAAA,CACA,iEACE,SAAA\",\"sourcesContent\":[\".Color {\\n  display: inline-block;\\n  width: 1em;\\n  height: 1em;\\n  border: 2px solid black;\\n  border-radius: 50%;\\n}\\n.Details {\\n  color: gray;\\n\\n  .Compare {\\n    color: black;\\n    &.changed {\\n      color: red;\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"Color\": \"WxZjqAgDNtEj1r0BAH_n\",\n\t\"Details\": \"sntbET3DFXccQAcVLZoR\",\n\t\"Compare\": \"n7Ckn4B51ojnidtrmrHE\",\n\t\"changed\": \"uYB5YawKyZmXpM6I8lyQ\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_AT_RULE_IMPORT_0___ from \"-!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/leaflet/dist/leaflet.css\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n___CSS_LOADER_EXPORT___.i(___CSS_LOADER_AT_RULE_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".vXpyyqKMf2Eg0uZBGb3A{height:75vh;border:2px solid red}.vXpyyqKMf2Eg0uZBGb3A header{font-weight:bold}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/containers/Vehicles/Map.module.scss\"],\"names\":[],\"mappings\":\"AAKA,sBACE,WAAA,CACA,oBAAA,CAEA,6BACE,gBAAA\",\"sourcesContent\":[\"@import \\\"~leaflet/dist/leaflet.css\\\";\\n\\n.Layout {\\n}\\n\\n.Map {\\n  height: 75vh;\\n  border: 2px solid red;\\n\\n  header {\\n    font-weight: bold;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"Map\": \"vXpyyqKMf2Eg0uZBGb3A\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".A48Tt3SsPLTNCzMDyazB .twRmur0UI32srRAUz_Uw{display:flex;flex-direction:row}.A48Tt3SsPLTNCzMDyazB .twRmur0UI32srRAUz_Uw textarea:first-of-type{width:4em;text-align:right}.A48Tt3SsPLTNCzMDyazB .twRmur0UI32srRAUz_Uw textarea:last-of-type{flex-grow:1}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/containers/Vehicles/Options.module.scss\"],\"names\":[],\"mappings\":\"AACE,4CACE,YAAA,CACA,kBAAA,CAGE,mEACE,SAAA,CACA,gBAAA,CAEF,kEACE,WAAA\",\"sourcesContent\":[\".Options {\\n  .Textarea {\\n    display: flex;\\n    flex-direction: row;\\n\\n    textarea {\\n      &:first-of-type {\\n        width: 4em;\\n        text-align: right;\\n      }\\n      &:last-of-type {\\n        flex-grow: 1;\\n      }\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"Options\": \"A48Tt3SsPLTNCzMDyazB\",\n\t\"Textarea\": \"twRmur0UI32srRAUz_Uw\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".dnNulWhTs84wB_yi0tu2{color:green}.eZcT7zT7zcKeynqlJ5cC{clear:both}.WV27lBhC9zjxECQGlM6O{float:left;width:200px;height:150px}.ZgRdCtql_9FDO3ook5vD .sVmi9FA2y8ggDUalGhwt{display:flex;flex-direction:column}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/containers/Vehicles/styles.module.scss\"],\"names\":[],\"mappings\":\"AAAA,sBACE,WAAA,CAEF,sBACE,UAAA,CAEF,sBACE,UAAA,CACA,WAAA,CACA,YAAA,CAGA,4CACE,YAAA,CACA,qBAAA\",\"sourcesContent\":[\".Section {\\n  color: green;\\n}\\n.Row {\\n  clear: both;\\n}\\n.Gallery {\\n  float: left;\\n  width: 200px;\\n  height: 150px;\\n}\\n.Filters {\\n  .Textarea {\\n    display: flex;\\n    flex-direction: column;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"Section\": \"dnNulWhTs84wB_yi0tu2\",\n\t\"Row\": \"eZcT7zT7zcKeynqlJ5cC\",\n\t\"Gallery\": \"WV27lBhC9zjxECQGlM6O\",\n\t\"Filters\": \"ZgRdCtql_9FDO3ook5vD\",\n\t\"Textarea\": \"sVmi9FA2y8ggDUalGhwt\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["options","DraggableMarker","position","children","setPosition","markerRef","useRef","eventHandlers","useMemo","dragend","marker","current","getLatLng","Marker","draggable","ref","Tooltip","LocateControl","map","useMap","onLocate","useCallback","event","preventDefault","locate","setView","className","style","top","fontSize","title","href","onClick","icon","faCrosshairs","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","undefined","height","PROPS","accessoriesPrice","age","capacity","consumptionFuel","emission","id","images","mileage","newPrice","optionsPrice","powerHP","powerKW","productionYear","transactionalPrice","warranty","_created","_updated","Chart","list","onSelect","useState","selected","setSelected","xProp","yProp","setProps","xAxisRef","yAxisRef","containerRef","selected$","Subject","useEffect","subscription","pipe","switchMap","of","delay","subscribe","unsubscribe","dataset","slice","item","xx","yy","xDomain","Math","min","max","yDomain","xScale","scaleLinear","domain","range","width","yScale","color","select","selectAll","remove","data","join","enter","append","attr","on","e","label","next","left","layerX","layerY","i","call","transition","duration","update","exit","xAxis","axisBottom","ticks","tickSizeOuter","yAxis","axisLeft","cx","styles","value","onChange","props","target","Object","entries","key","viewBox","transform","Spinner","Details","labels","version","optionsAsset","availableOptions","console","log","prices","concat","reduce","sum","price","find","description","optionCode","getDescription","toLocaleLowerCase","toLowerCase","grossPrice","rows","length","onFocus","readOnly","Options","expand","setExpand","Link","Suspense","fallback","formatNumber","Intl","NumberFormat","format","formatAmount","Button","Toggle","type","Color","backgroundColor","code","IdLink","setSearch","search","metaKey","split","s","trim","String","filter","Favorite","favorites","setFavorites","favorite","_time","onClickCompare","prev","brand","series","seriesCode","bodyType","modelCode","changed","prop","_id","checked","includes","fuel","transmission","Boolean","registration","round","transactionalPriceUpdated","vatReclaimable","imagesLastChanged","Number","created","_removed","leasable","Leasing","_history","History","keys","reverse","_item","calculationMode","comfortLeaseProduct","leaseProduct","Calculator","productType","ProductTypes","vehicle","Map","bounds","center","setCenter","L","iconRetinaUrl","require","iconUrl","shadowUrl","displayMap","MapContainer","zoom","TileLayer","attribution","url","D","lat","lng","name","CircleMarker","pathOptions","Popup","minWidth","distanceTo","toFixed","a","closest","getAttribute","sortByKey","sort","assign","Summary","results","summary","$apply","count","updated","removed","JSON","stringify","GROUP_BY","SORT_BY","RADIUS_LIST","PRICE_LIST","MILEAGE_LIST","POWER_LIST","TYPES","N","U","YEAR_LIST","Array","_","Date","getFullYear","useCriterion","createPersistedState","useFavorites","asset","createAsset","fetch","res","json","then","rest","forEach","b","result","createCriteria","defaults","groupBy","sortBy","radius","priceFrom","priceTo","mileageFrom","mileageTo","powerFrom","powerTo","yearFrom","yearTo","createdFrom","now","createdTo","criteria","changedPrice","Data","read","setCriteria","search$","distinctUntilChanged","debounceTime","getPoint","tree","createKDTree","table","knn","index","criteriaOptions","line","dealer","match","isNew","getTime","values","array","indexOf","every","option","findIndex","getBounds","useBounds","process","getCenter","nearby","sorted","grouped","group","criterion","setCriterion","chart","Criteria","CriteriaLabel","SavedFilters","srcSet","Gallery","onCreateFilter","prompt","onUpdateFilter","onRenameFilter","onRemoveFilter","confirm","sameCriteria","disabled","entriesOptions","onChangeSearch","onChangeCriteria","onChangeRadius","onChangePriceFrom","onChangePriceTo","onChangeMileageFrom","onChangeMileageTo","onChangePowerFrom","onChangePowerTo","onChangeYearFrom","onChangeYearTo","onChangeCreatedFrom","onChangeCreatedTo","Section","___CSS_LOADER_EXPORT___","push","module","locals"],"sourceRoot":""}