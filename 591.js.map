{"version":3,"file":"591.js","mappings":";2WAWIA,EAAU,GAEdA,EAAQC,kBAAoB,IAC5BD,EAAQE,cAAgB,IAElBF,EAAQG,OAAS,SAAc,KAAM,QAE3CH,EAAQI,OAAS,IACjBJ,EAAQK,mBAAqB,IAEhB,IAAI,IAASL,GAKnB,QAAe,KAAW,WAAiB,gBAAiBM,qpBCzBnE,s4QAiBA,IAAMC,EAAW,CACf,GAAI,GACJC,yBAA0B,2BAC1BC,oBAAqB,sBACrBC,WAAY,aACZC,uBAAwB,yBACxBC,gBAAiB,mBAGbC,EAAU,CACdC,uBAAwB,EACxBC,kBAAmB,EACnBC,qBAAsB,EACtBJ,gBAAiB,EACjBK,UAAW,EACXC,UAAW,EACXC,UAAW,GAGPC,EAAa,CAAC,EAAG,IAAO,KAAO,IAAO,KAAO,IAAO,KAEpDC,EAAc,SAACC,GAAD,OAClB,IAAIC,KAAKC,aAAa,QAAS,CAC7BC,sBAAuB,IACtBC,OAAOJ,IAENK,GAAQC,EAAAA,EAAAA,GAAW,gCAAC,WAAOC,GAAP,uFACNC,MAAM,0BAAD,OAA2BD,IAD1B,cAClBE,EADkB,gBAEXA,EACVC,OACAC,MAAK,SAACC,GAAD,OACJC,EAAAA,EAAAA,OACU,CACNC,+BAAgCD,EAAAA,EAAAA,SAE7BE,WAAU,SAACC,GAAD,OACT,EAAI,IAAIC,gBAAgBD,GAAOE,WAAWC,QACxC,SAACC,EAAD,gBAAUC,EAAV,KAAeC,EAAf,YACEC,OAAOC,OAAOJ,EAAd,KAAyBC,EAAMC,MACjC,OAGNG,mCAAoCZ,EAAAA,EAAAA,SAEjCE,WAAU,SAACC,GAAD,OACT,EAAI,IAAIC,gBAAgBD,GAAOE,WAAWC,QACxC,SAACC,EAAD,gBAAUC,EAAV,KAAeC,EAAf,YACEC,OAAOC,OAAOJ,EAAd,KAAyBC,EAAMC,MACjC,SAIPI,cACAX,WAAU,SAACY,GAAD,UACTC,SAAUD,EAAKb,+BAA+Bc,UAC3CD,MAEJE,QACAC,WAAWlB,MAEfD,MAAK,SAACC,GAAD,MAAW,CACfA,KAAAA,EACAlC,QAASkC,EAAKO,QACZ,SAACzC,EAASiD,GAAV,MACE,CACE,2BACA,sBACA,6BACA,2BACA,YACAR,QACA,SAACzC,EAASqD,GAAV,cACKrD,GADL,QAEGqD,EAAOR,OAAOC,OAAO,GAAI9C,EAAQqD,GAA1B,KACLJ,EAAKI,GAAQJ,EAAKI,SAGvBrD,KAEJ,QArDkB,iQAAD,uDA0DzB,SAASsD,EAAT,GAAiE,QAA7CC,YAAeC,EAA8B,EAA9BA,SAAUC,EAAoB,EAApBA,UACrCC,EAAO,kCAAH,OAAqCF,EAArC,YAAiDC,EAAjD,UAEV,OACE,gBAACE,EAAA,EAAD,CAAMC,KAAMF,EAAMG,IAAI,GAAGC,OAAO,MAAMC,MAAO,CAAEC,OAAQ,YACrD,gBAAC,IAAD,CAAiBC,KAAMC,EAAAA,OA0B7B,SAASC,EAAT,GAAkC,QAAlBtC,QAAAA,OAAkB,MAAR,KAAQ,EAChC,EAA0BF,EAAMyC,KAAKvC,GAA7BK,EAAR,EAAQA,KAAMlC,EAAd,EAAcA,QAEdqE,QAAQC,IAAI,CAAEtE,QAAAA,IAEd,SAA8BuE,EAAAA,EAAAA,WAxB9B,eAACC,EAAD,uDAAY,GAAZ,OACE3B,OAAOC,OACL,CACE2B,OAAQ,GAERC,QAAS7B,OAAO8B,KAAKpE,GAAU,GAC/BqE,OAAQ/B,OAAO8B,KAAK9D,GAAS,GAE7BgE,UAAWzD,EAAW,GACtB0D,QAAS1D,EAAWA,EAAW2D,OAAS,GAExC7B,SAAU,GACV1C,yBAA0B,GAC1BwE,yBAA0B,GAC1BC,2BAA4B,IAE9BT,MAQJ,GAAOU,EAAP,KAAgBC,EAAhB,KAEMC,GAAOC,EAAAA,EAAAA,UACX,kBACEnD,EAAKoD,QACH,SAACrC,GAAD,OACEiC,EAAQL,WAAa5B,EAAKnC,wBAC1BmC,EAAKnC,wBAA0BoE,EAAQJ,SACvC,CAAC,GAAI7B,EAAKC,UAAUqC,SAASL,EAAQhC,WACrC,CAAC,GAAID,EAAKzC,0BAA0B+E,SAClCL,EAAQ1E,2BAEV,CAAC,GAAIyC,EAAK+B,0BAA0BO,SAClCL,EAAQF,2BAEV,CAAC,GAAI/B,EAAKgC,4BAA4BM,SACpCL,EAAQD,6BAEVhC,EAAKvC,WAAW8E,cAAcC,MAAMP,EAAQT,aAElD,CAACvC,EAAMgD,IAGTb,QAAQC,IAAIc,GAEZ,IAAMM,GAAUL,EAAAA,EAAAA,UAAQ,kBAAM,IAAIM,EAAAA,IAAgB,KAElDC,EAAAA,EAAAA,YAAU,WACR,IAAMC,EAAeH,EAClBI,MAAKC,EAAAA,EAAAA,MAAwBC,EAAAA,EAAAA,GAAa,MAC1CC,WAAU,SAACf,GAAD,OAAab,QAAQC,IAAIY,MACtC,OAAO,kBAAMW,EAAaK,iBACzB,CAACR,KAEJE,EAAAA,EAAAA,YAAU,WACRF,EAAQS,KAAKjB,KACZ,CAACA,IAEJ,IAAMkB,GAASf,EAAAA,EAAAA,UACb,kBACED,EAAKiB,MACH,SAACC,EAAGC,GAAJ,OACE1F,EAAQqE,EAAQN,SACf0B,EAAEpB,EAAQN,UAAY2B,EAAErB,EAAQN,QAC7B,GACC0B,EAAEpB,EAAQN,SAAW,IAAM2B,EAAErB,EAAQN,SAAW,GACjD,GACC,QAEX,CAACQ,EAAMF,EAAQN,SAGX4B,GAAUnB,EAAAA,EAAAA,UACd,kBACEe,EAAO3D,QACL,SAAC+D,EAAmCvD,GAApC,OACIwD,EAGIxD,EAAKiC,EAAQR,UAAY,GAF7B7B,OAAOC,OAAO0D,EAAd,KACGC,GAASD,EAAQC,IAAU,IAAIC,OAAOzD,KAF1C,IAACwD,IAIJ,MAEJ,CAACL,EAAQlB,EAAQR,UAGnB,OADAL,QAAQC,IAAI,CAAEkC,QAAAA,IAEZ,2BACE,gBAACG,EAAD,CAASzB,QAASA,EAASC,WAAYA,EAAYnF,QAASA,IAC5D,2CACYoF,EAAKL,OADjB,uCACsD7C,EAAK6C,QAAU,KAEpElC,OAAOL,QAAQgE,GAASI,KAAI,yBAAEH,EAAF,KAASI,EAAT,YAC3B,2BAASlE,IAAK8D,GACXA,GAAS,0BAAKA,GACf,0BACGI,EAAMD,KAAI,SAAC3D,EAAMN,GAAP,OACT,sBAAIA,IAAKA,EAAKmE,UAAWC,EAAAA,KACvB,gBAACC,EAAA,EAAD,CACEF,UAAWC,EAAAA,QACXE,OAAQ,CAAChE,EAAKiE,yBAEhB,gBAACC,EAAD,CAASL,UAAWC,EAAAA,QAAgB9D,KAAMA,cAU1D,SAAS0D,EAAT,GAAmD,IAAhCzB,EAAgC,EAAhCA,QAASC,EAAuB,EAAvBA,WAAYnF,EAAW,EAAXA,QAChCoH,GAAoBC,EAAAA,EAAAA,cACxB,gBAAGvD,EAAH,EAAGA,OAAH,OACEqB,GAAW,YAA6B,IAA1BL,EAA0B,EAA1BA,QAAYI,EAAc,OAChCL,EAAYyC,OAAOxD,EAAOlB,OAChC,OAAO,EAAP,KACKsC,GADL,IAEEL,UAAAA,EACAC,QAASA,EAAUD,EAAYA,EAAYC,SAGjD,IAEIyC,GAAkBF,EAAAA,EAAAA,cACtB,gBAAGvD,EAAH,EAAGA,OAAH,OACEqB,GAAW,YAA+B,IAA5BN,EAA4B,EAA5BA,UAAcK,EAAc,OAClCJ,EAAUwC,OAAOxD,EAAOlB,OAC9B,OAAO,EAAP,KACKsC,GADL,IAEEL,UAAWC,EAAUD,EAAYA,EAAYC,EAC7CA,QAAAA,SAGN,IAGF,OACE,4BAAUgC,UAAWC,EAAAA,SACnB,2BACE,6BACE,sCACA,yBACES,KAAK,SACL5E,MAAOsC,EAAQT,OACfgD,UAAUJ,EAAAA,EAAAA,cACR,gBAAGvD,EAAH,EAAGA,OAAH,OACEqB,GAAW,SAACD,GAAD,cACNA,GADM,IAETT,OAAQX,EAAOlB,aAEnB,OAIN,6BACE,oCACA,0BACEA,MAAOsC,EAAQN,OACf6C,UAAUJ,EAAAA,EAAAA,cACR,gBAAGvD,EAAH,EAAGA,OAAH,OACEqB,GAAW,SAACD,GAAD,cACNA,GADM,IAETN,OAAQd,EAAOlB,aAEnB,KAGDC,OAAOL,QAAQ3B,GAAS+F,KAAI,gBAAEhE,EAAF,iBAC3B,0BAAQD,IAAKC,EAAOA,MAAOA,GACxBA,QAKT,6BACE,uCACA,0BACEA,MAAOsC,EAAQR,QACf+C,UAAUJ,EAAAA,EAAAA,cACR,gBAAGvD,EAAH,EAAGA,OAAH,OACEqB,GAAW,SAACD,GAAD,cACNA,GADM,IAETR,QAASZ,EAAOlB,aAEpB,KAGDC,OAAOL,QAAQjC,GAAUqG,KAAI,yBAAEhE,EAAF,KAAS8E,EAAT,YAC5B,0BAAQ/E,IAAKC,EAAOA,MAAOA,GACxB8E,SAMX,2BACE,6BACE,0CACA,yBACEF,KAAK,QACLpC,KAAK,aACLuC,IAAKvG,EAAW,GAChBwG,IAAKxG,EAAWA,EAAW2D,OAAS,GACpCnC,MAAOsC,EAAQL,UACf4C,SAAUL,IAEZ,4BAAUS,GAAG,cACVzG,EAAWwF,KAAI,SAAChE,GAAD,OACd,0BACED,IAAKC,EACLA,MAAOA,EACP8E,MACE,CAAC,EAAG,IAAO,IAAO,IAAO,IAAO,KAAOnC,SAAS3C,GAC5CvB,EAAYuB,QACZtC,SAMd,6BACE,wCACA,yBACEkH,KAAK,QACLpC,KAAK,aACLuC,IAAKvG,EAAW,GAChBwG,IAAKxG,EAAWA,EAAW2D,OAAS,GACpCnC,MAAOsC,EAAQJ,QACf2C,SAAUF,IAEZ,sCAAUlG,EAAY6D,EAAQL,WAA9B,cAA8CxD,EAC5C6D,EAAQJ,aAId,2BACE,6BACE,wCACA,0BACElC,MAAOsC,EAAQhC,SACfuE,UAAUJ,EAAAA,EAAAA,cACR,gBAAGvD,EAAH,EAAGA,OAAH,OACEqB,GAAW,SAACD,GAAD,cACNA,GADM,IAEThC,SAAUY,EAAOlB,aAErB,KAGD,CAAC,IAAI8D,OAAO7D,OAAOiF,OAAO9H,EAAQkD,WAAW0D,KAAI,SAAChE,GAAD,OAChD,0BAAQD,IAAKC,EAAOA,MAAOA,GACxBA,SAMX,2BACE,6BACE,wDACA,0BACEA,MAAOsC,EAAQ1E,yBACfiH,UAAUJ,EAAAA,EAAAA,cACR,gBAAGvD,EAAH,EAAGA,OAAH,OACEqB,GAAW,SAACD,GAAD,cACNA,GADM,IAET1E,yBAA0BsD,EAAOlB,aAErC,KAGD,CAAC,IACC8D,OAAO7D,OAAOiF,OAAO9H,EAAQQ,2BAC7BoG,KAAI,SAAChE,GAAD,OACH,0BAAQD,IAAKC,EAAOA,MAAOA,GACxBA,SAMb,2BACE,6BACE,wDACA,0BACEA,MAAOsC,EAAQF,yBACfyC,UAAUJ,EAAAA,EAAAA,cACR,gBAAGvD,EAAH,EAAGA,OAAH,OACEqB,GAAW,SAACD,GAAD,cACNA,GADM,IAETF,yBAA0BlB,EAAOlB,aAErC,KAGD,CAAC,IACC8D,OAAO7D,OAAOiF,OAAO9H,EAAQgF,2BAC7B4B,KAAI,SAAChE,GAAD,OACH,0BAAQD,IAAKC,EAAOA,MAAOA,GACxBA,SAMb,2BACE,6BACE,0DACA,0BACEA,MAAOsC,EAAQD,2BACfwC,UAAUJ,EAAAA,EAAAA,cACR,gBAAGvD,EAAH,EAAGA,OAAH,OACEqB,GAAW,SAACD,GAAD,cACNA,GADM,IAETD,2BAA4BnB,EAAOlB,aAEvC,KAGD,CAAC,IACC8D,OAAO7D,OAAOiF,OAAO9H,EAAQiF,6BAC7B2B,KAAI,SAAChE,GAAD,OACH,0BAAQD,IAAKC,EAAOA,MAAOA,GACxBA,UAUnB,SAASuE,EAAT,GAAqC,IA4B3B,EAAGY,EAAQ7E,EA5BFD,EAAkB,EAAlBA,KAAS+E,EAAS,OACnC,KAA4BzD,EAAAA,EAAAA,WAAS,iBAAO,CAAEvC,MAAM,MAApD,GAAOiG,EAAP,KAAeC,EAAf,KAEA,OACE,sBAASF,EACP,gBAACrE,EAAA,EAAD,CACEC,KAAI,UAAKX,EAAKkF,6BAAV,OAAwClF,EAAKmF,YADnD,UAEKnF,EAAKvC,WAFV,aAEyBuC,EAAKxC,oBAF9B,eAEwDwC,EAAKoF,mBAF7D,cAEqFpF,EAAKqF,kBAF1F,aAEgHrF,EAAKgC,2BAFrH,aAEoJhC,EAAKsF,6BACzJ,gBAACjF,EAAD,CACEC,YAAa,CACXC,SAAUP,EAAKuF,mBACf/E,UAAWR,EAAKwF,uBAGpB,0BACE,8CACoBxF,EAAKyF,gBADzB,KAEGzF,EAAK+B,yBAFR,KAIA,uDAC6B/B,EAAKzC,yBADlC,KAEGyC,EAAK0F,oBAFR,KAE+B1F,EAAK2F,+BAFpC,KAIA,gDACsB3F,EAAKqF,kBAD3B,IAC+C,IAC5CrF,EAAKgC,2BAFR,KAEsChC,EAAKsF,2BAF3C,KAGGtF,EAAKrC,gBAHR,UAKKmH,GAAH,EAIC9E,EAAKb,gCAJH2F,OAAQ7E,EAAX,EAAWA,SACX,qCACW6E,EADX,eAC+B7E,IAGjC,qDAC2B7B,EAAY4B,EAAKnC,wBAD5C,KAEGO,EAAY4B,EAAKlC,mBAFpB,IAGGkC,EAAK4F,0BACJ,4BACG5F,EAAK4F,yBAAyBC,KADjC,KAEG7F,EAAK4F,yBAAyBE,UAFjC,MAMJ,wCACarH,EAAAA,EAAAA,GAAOuB,EAAKhC,SAAU,oBAChCgC,EAAK/B,UACJ,0CAAiBQ,EAAAA,EAAAA,GAAOuB,EAAK/B,SAAU,uBAI7C,gBAACyC,EAAA,EAAD,CACEqF,QAAS,SAACC,GAAD,OACPA,EAAEC,iBACFhB,GAAU,SAACD,GAAD,cAAkBA,GAAlB,IAA0BjG,MAAOiG,EAAOjG,YAGnDiG,EAAOjG,KAAO,YAAc,aAE9BiG,EAAOjG,MAAQ,2BAAMmH,KAAKC,UAAUnG,EAAM,KAAM,KAKxC,SAASoG,IACtB,OACE,uBAAKvC,UAAWC,EAAAA,SACd,sCACA,gBAAC5C,EAAD,yECpgBFmF,QAA0B,GAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAO3B,GAAI,+MAAgN,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,0DAA0D,MAAQ,GAAG,SAAW,sGAAsG,eAAiB,CAAC,qNAAqN,WAAa,MAE9rByB,EAAwBG,OAAS,CAChC,QAAW,uBACX,IAAO,uBACP,QAAW,uBACX,QAAW,wBAEZ","sources":["webpack://@dev/web/./src/containers/Holidays/styles.module.scss?6310","webpack://@dev/web/./src/containers/Holidays/index.tsx","webpack://@dev/web/./src/containers/Holidays/styles.module.scss"],"sourcesContent":["\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./styles.module.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./styles.module.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, {\n  ChangeEventHandler,\n  useCallback,\n  useEffect,\n  useMemo,\n  useState,\n} from \"react\";\nimport { Subject } from \"rxjs\";\nimport { debounceTime, distinctUntilChanged } from \"rxjs/operators\";\nimport { createAsset } from \"use-asset\";\nimport { z } from \"zod\";\nimport { format } from \"date-fns\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faMapMarkerAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport { Gallery } from \"../../components/Gallery\";\nimport { Link } from \"../../components/Link\";\nimport styles from \"./styles.module.scss\";\n\nconst GROUP_BY = {\n  \"\": \"\",\n  Hotel_Standard_Stars_Css: \"Hotel_Standard_Stars_Css\",\n  Hotel_Location_Name: \"Hotel_Location_Name\",\n  Hotel_Name: \"Hotel_Name\",\n  Merlin_ParsedStartDate: \"Merlin_ParsedStartDate\",\n  Merlin_Duration: \"Merlin_Duration\",\n};\n\nconst SORT_BY = {\n  Merlin_FullPriceParsed: 1,\n  Merlin_AdultPrice: 1,\n  Hotel_AverageRating: -1,\n  Merlin_Duration: 1,\n  _created: -1,\n  _updated: -1,\n  _removed: -1,\n};\n\nconst PRICE_LIST = [0, 10000, 15000, 20000, 25000, 30000, 100000];\n\nconst formatPrice = (price: number) =>\n  new Intl.NumberFormat(\"pl-PL\", {\n    minimumFractionDigits: 2,\n  }).format(price);\n\nconst asset = createAsset(async (version) => {\n  const res = await fetch(`api/holidays/data.json?${version}`);\n  return await res\n    .json()\n    .then((data) =>\n      z\n        .object({\n          Query_AdultsChildenQueryString: z\n            .string()\n            .transform((query) =>\n              [...new URLSearchParams(query).entries()].reduce(\n                (result, [key, value]) =>\n                  Object.assign(result, { [key]: value }),\n                {}\n              )\n            ),\n          Query_AdditionalFiltersQueryString: z\n            .string()\n            .transform((query) =>\n              [...new URLSearchParams(query).entries()].reduce(\n                (result, [key, value]) =>\n                  Object.assign(result, { [key]: value }),\n                {}\n              )\n            ),\n        })\n        .passthrough()\n        .transform((item) => ({\n          Children: item.Query_AdultsChildenQueryString.Children,\n          ...item,\n        }))\n        .array()\n        .parseAsync(data)\n    )\n    .then((data) => ({\n      data,\n      options: data.reduce(\n        (options, item) =>\n          [\n            \"Hotel_Standard_Stars_Css\",\n            \"Hotel_Location_Name\",\n            \"Merlin_ParsedStartFullDate\",\n            \"Merlin_BoardStandardDesc\",\n            \"Children\",\n          ].reduce(\n            (options, prop) => ({\n              ...options,\n              [prop]: Object.assign({}, options[prop], {\n                [item[prop]]: item[prop],\n              }),\n            }),\n            options\n          ),\n        {}\n      ),\n    }));\n});\n\nfunction Location({ coordinates: { latitude, longitude } }: any) {\n  const link = `//www.google.pl/maps?t=k&q=loc:${latitude}+${longitude}&hl=pl`;\n\n  return (\n    <Link href={link} rel=\"\" target=\"map\" style={{ margin: \"0 .25em\" }}>\n      <FontAwesomeIcon icon={faMapMarkerAlt} />\n    </Link>\n  );\n}\n\nconst createFilters =\n  ({ options }: { options: object }) =>\n  (defaults = {}) =>\n    Object.assign(\n      {\n        search: \"\",\n\n        groupBy: Object.keys(GROUP_BY)[0],\n        sortBy: Object.keys(SORT_BY)[0],\n\n        priceFrom: PRICE_LIST[0],\n        priceTo: PRICE_LIST[PRICE_LIST.length - 1],\n\n        Children: \"\",\n        Hotel_Standard_Stars_Css: \"\",\n        Merlin_BoardStandardDesc: \"\",\n        Merlin_ParsedStartFullDate: \"\",\n      },\n      defaults\n    );\n\nfunction Data({ version = \"v1\" }) {\n  const { data, options } = asset.read(version);\n\n  console.log({ options });\n\n  const [filters, setFilters] = useState(createFilters({ options }));\n\n  const list = useMemo(\n    () =>\n      data.filter(\n        (item) =>\n          filters.priceFrom <= item.Merlin_FullPriceParsed &&\n          item.Merlin_FullPriceParsed <= filters.priceTo &&\n          [\"\", item.Children].includes(filters.Children) &&\n          [\"\", item.Hotel_Standard_Stars_Css].includes(\n            filters.Hotel_Standard_Stars_Css\n          ) &&\n          [\"\", item.Merlin_BoardStandardDesc].includes(\n            filters.Merlin_BoardStandardDesc\n          ) &&\n          [\"\", item.Merlin_ParsedStartFullDate].includes(\n            filters.Merlin_ParsedStartFullDate\n          ) &&\n          item.Hotel_Name.toLowerCase().match(filters.search)\n      ),\n    [data, filters]\n  );\n\n  console.log(list);\n\n  const search$ = useMemo(() => new Subject<any>(), []);\n\n  useEffect(() => {\n    const subscription = search$\n      .pipe(distinctUntilChanged(), debounceTime(400))\n      .subscribe((filters) => console.log(filters));\n    return () => subscription.unsubscribe();\n  }, [search$]);\n\n  useEffect(() => {\n    search$.next(filters);\n  }, [filters]);\n\n  const sorted = useMemo(\n    () =>\n      list.sort(\n        (a, b) =>\n          SORT_BY[filters.sortBy as keyof typeof SORT_BY] *\n          (a[filters.sortBy] === b[filters.sortBy]\n            ? 0\n            : (a[filters.sortBy] || 0) > (b[filters.sortBy] || 0)\n            ? 1\n            : -1)\n      ),\n    [list, filters.sortBy]\n  );\n\n  const grouped = useMemo(\n    () =>\n      sorted.reduce(\n        (grouped: Record<string, object[]>, item: any) =>\n          ((group) =>\n            Object.assign(grouped, {\n              [group]: (grouped[group] || []).concat(item),\n            }))(item[filters.groupBy] || \"\"),\n        {}\n      ),\n    [sorted, filters.groupBy]\n  );\n  console.log({ grouped });\n  return (\n    <div>\n      <Filters filters={filters} setFilters={setFilters} options={options} />\n      <div>\n        {`Found ${list.length} holidays out of a total of ${data.length}`}{\" \"}\n      </div>\n      {Object.entries(grouped).map(([group, items]) => (\n        <section key={group}>\n          {group && <h3>{group}</h3>}\n          <ol>\n            {items.map((item, key) => (\n              <li key={key} className={styles.Row}>\n                <Gallery\n                  className={styles.Gallery}\n                  images={[item.Hotel_ListingImageUrl]}\n                />\n                <Details className={styles.Details} item={item} />\n              </li>\n            ))}\n          </ol>\n        </section>\n      ))}\n    </div>\n  );\n}\n\nfunction Filters({ filters, setFilters, options }) {\n  const onChangePriceFrom = useCallback<ChangeEventHandler<HTMLInputElement>>(\n    ({ target }) =>\n      setFilters(({ priceTo, ...filters }) => {\n        const priceFrom = Number(target.value);\n        return {\n          ...filters,\n          priceFrom,\n          priceTo: priceTo < priceFrom ? priceFrom : priceTo,\n        };\n      }),\n    []\n  );\n  const onChangePriceTo = useCallback<ChangeEventHandler<HTMLInputElement>>(\n    ({ target }) =>\n      setFilters(({ priceFrom, ...filters }) => {\n        const priceTo = Number(target.value);\n        return {\n          ...filters,\n          priceFrom: priceTo > priceFrom ? priceFrom : priceTo,\n          priceTo,\n        };\n      }),\n    []\n  );\n\n  return (\n    <fieldset className={styles.Filters}>\n      <div>\n        <label>\n          <span>Search</span>\n          <input\n            type=\"search\"\n            value={filters.search}\n            onChange={useCallback<ChangeEventHandler<HTMLInputElement>>(\n              ({ target }) =>\n                setFilters((filters) => ({\n                  ...filters,\n                  search: target.value,\n                })),\n              []\n            )}\n          />\n        </label>\n        <label>\n          <span>Sort</span>\n          <select\n            value={filters.sortBy}\n            onChange={useCallback<ChangeEventHandler<HTMLSelectElement>>(\n              ({ target }) =>\n                setFilters((filters) => ({\n                  ...filters,\n                  sortBy: target.value,\n                })),\n              []\n            )}\n          >\n            {Object.entries(SORT_BY).map(([value]) => (\n              <option key={value} value={value}>\n                {value}\n              </option>\n            ))}\n          </select>\n        </label>\n        <label>\n          <span>GroupBy</span>\n          <select\n            value={filters.groupBy}\n            onChange={useCallback<ChangeEventHandler<HTMLSelectElement>>(\n              ({ target }) =>\n                setFilters((filters) => ({\n                  ...filters,\n                  groupBy: target.value,\n                })),\n              []\n            )}\n          >\n            {Object.entries(GROUP_BY).map(([value, label]) => (\n              <option key={value} value={value}>\n                {label}\n              </option>\n            ))}\n          </select>\n        </label>\n      </div>\n      <div>\n        <label>\n          <span>Price From</span>\n          <input\n            type=\"range\"\n            list=\"price-list\"\n            min={PRICE_LIST[0]}\n            max={PRICE_LIST[PRICE_LIST.length - 1]}\n            value={filters.priceFrom}\n            onChange={onChangePriceFrom}\n          />\n          <datalist id=\"price-list\">\n            {PRICE_LIST.map((value) => (\n              <option\n                key={value}\n                value={value}\n                label={\n                  [0, 10000, 20000, 30000, 40000, 50000].includes(value)\n                    ? formatPrice(value)\n                    : undefined\n                }\n              ></option>\n            ))}\n          </datalist>\n        </label>\n        <label>\n          <span>Price To</span>\n          <input\n            type=\"range\"\n            list=\"price-list\"\n            min={PRICE_LIST[0]}\n            max={PRICE_LIST[PRICE_LIST.length - 1]}\n            value={filters.priceTo}\n            onChange={onChangePriceTo}\n          />\n          <span>{`${formatPrice(filters.priceFrom)} - ${formatPrice(\n            filters.priceTo\n          )}`}</span>\n        </label>\n      </div>\n      <div>\n        <label>\n          <span>Children</span>\n          <select\n            value={filters.Children}\n            onChange={useCallback<ChangeEventHandler<HTMLSelectElement>>(\n              ({ target }) =>\n                setFilters((filters) => ({\n                  ...filters,\n                  Children: target.value,\n                })),\n              []\n            )}\n          >\n            {[\"\"].concat(Object.values(options.Children)).map((value) => (\n              <option key={value} value={value}>\n                {value}\n              </option>\n            ))}\n          </select>\n        </label>\n      </div>\n      <div>\n        <label>\n          <span>Hotel_Standard_Stars_Css</span>\n          <select\n            value={filters.Hotel_Standard_Stars_Css}\n            onChange={useCallback<ChangeEventHandler<HTMLSelectElement>>(\n              ({ target }) =>\n                setFilters((filters) => ({\n                  ...filters,\n                  Hotel_Standard_Stars_Css: target.value,\n                })),\n              []\n            )}\n          >\n            {[\"\"]\n              .concat(Object.values(options.Hotel_Standard_Stars_Css))\n              .map((value) => (\n                <option key={value} value={value}>\n                  {value}\n                </option>\n              ))}\n          </select>\n        </label>\n      </div>\n      <div>\n        <label>\n          <span>Merlin_BoardStandardDesc</span>\n          <select\n            value={filters.Merlin_BoardStandardDesc}\n            onChange={useCallback<ChangeEventHandler<HTMLSelectElement>>(\n              ({ target }) =>\n                setFilters((filters) => ({\n                  ...filters,\n                  Merlin_BoardStandardDesc: target.value,\n                })),\n              []\n            )}\n          >\n            {[\"\"]\n              .concat(Object.values(options.Merlin_BoardStandardDesc))\n              .map((value) => (\n                <option key={value} value={value}>\n                  {value}\n                </option>\n              ))}\n          </select>\n        </label>\n      </div>\n      <div>\n        <label>\n          <span>Merlin_ParsedStartFullDate</span>\n          <select\n            value={filters.Merlin_ParsedStartFullDate}\n            onChange={useCallback<ChangeEventHandler<HTMLSelectElement>>(\n              ({ target }) =>\n                setFilters((filters) => ({\n                  ...filters,\n                  Merlin_ParsedStartFullDate: target.value,\n                })),\n              []\n            )}\n          >\n            {[\"\"]\n              .concat(Object.values(options.Merlin_ParsedStartFullDate))\n              .map((value) => (\n                <option key={value} value={value}>\n                  {value}\n                </option>\n              ))}\n          </select>\n        </label>\n      </div>\n    </fieldset>\n  );\n}\n\nfunction Details({ item, ...props }) {\n  const [expand, setExpand] = useState(() => ({ json: false }));\n\n  return (\n    <div {...props}>\n      <Link\n        href={`${item.Hotel_OfferUrlWithOfferCode}${item.Merlin_Id}`}\n      >{`${item.Hotel_Name} (${item.Hotel_Location_Name}) / ${item.Hotel_TextCategory} / ${item.Merlin_FlightFrom}, ${item.Merlin_ParsedStartFullDate}, ${item.Merlin_ParsedDepartureTime}`}</Link>\n      <Location\n        coordinates={{\n          latitude: item.Hotel_GPS_Latitude,\n          longitude: item.Hotel_GPS_Longitude,\n        }}\n      />\n      <ul>\n        <li>\n          Hotel_Type_Name: {item.Hotel_Type_Name} (\n          {item.Merlin_BoardStandardDesc})\n        </li>\n        <li>\n          Hotel_Standard_Stars_Css: {item.Hotel_Standard_Stars_Css} (\n          {item.Hotel_LocalStandard}: {item.Hotel_Local_Standard_Stars_Css})\n        </li>\n        <li>\n          Merlin_FlightFrom: {item.Merlin_FlightFrom},{\" \"}\n          {item.Merlin_ParsedStartFullDate}, {item.Merlin_ParsedDepartureTime} (\n          {item.Merlin_Duration} dni)\n        </li>\n        {(({ Adults, Children }) => (\n          <li>\n            Adults: {Adults}, Children: {Children}\n          </li>\n        ))(item.Query_AdultsChildenQueryString)}\n        <li>\n          Merlin_FullPriceParsed: {formatPrice(item.Merlin_FullPriceParsed)} (\n          {formatPrice(item.Merlin_AdultPrice)})\n          {item.Merlin_OfferTypeSitecore && (\n            <span>\n              {item.Merlin_OfferTypeSitecore.Name} (\n              {item.Merlin_OfferTypeSitecore.ShortName})\n            </span>\n          )}\n        </li>\n        <li>\n          _created: {format(item._created, \"yyyy-MM-dd HH:mm\")}\n          {item._updated && (\n            <span>_updated: {format(item._updated, \"yyyy-MM-dd HH:mm\")}</span>\n          )}\n        </li>\n      </ul>\n      <Link\n        onClick={(e) => (\n          e.preventDefault(),\n          setExpand((expand) => ({ ...expand, json: !expand.json }))\n        )}\n      >\n        {expand.json ? \"Hide json\" : \"Show json\"}\n      </Link>\n      {expand.json && <pre>{JSON.stringify(item, null, 2)}</pre>}\n    </div>\n  );\n}\n\nexport default function Section() {\n  return (\n    <div className={styles.Section}>\n      <h2>Holidays</h2>\n      <Data />\n    </div>\n  );\n}\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".U1uuAPy3Fw36L4smQs6z{color:purple}.U1uuAPy3Fw36L4smQs6z section{clear:both}.vp3t0CERafyRQsHYj_4j{clear:both}.PfY0KX8CDswij0oy11Fd{float:left;width:200px;height:150px}.Ig_Tfc2KZChGO0NviEFG pre{clear:both}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/containers/Holidays/styles.module.scss\"],\"names\":[],\"mappings\":\"AAAA,sBACE,YAAA,CACA,8BACE,UAAA,CAGJ,sBACE,UAAA,CAEF,sBACE,UAAA,CACA,WAAA,CACA,YAAA,CAGA,0BACE,UAAA\",\"sourcesContent\":[\".Section {\\n  color: purple;\\n  section {\\n    clear: both;\\n  }\\n}\\n.Row {\\n  clear: both;\\n}\\n.Gallery {\\n  float: left;\\n  width: 200px;\\n  height: 150px;\\n}\\n.Details {\\n  pre {\\n    clear: both;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"Section\": \"U1uuAPy3Fw36L4smQs6z\",\n\t\"Row\": \"vp3t0CERafyRQsHYj_4j\",\n\t\"Gallery\": \"PfY0KX8CDswij0oy11Fd\",\n\t\"Details\": \"Ig_Tfc2KZChGO0NviEFG\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","undefined","GROUP_BY","Hotel_Standard_Stars_Css","Hotel_Location_Name","Hotel_Name","Merlin_ParsedStartDate","Merlin_Duration","SORT_BY","Merlin_FullPriceParsed","Merlin_AdultPrice","Hotel_AverageRating","_created","_updated","_removed","PRICE_LIST","formatPrice","price","Intl","NumberFormat","minimumFractionDigits","format","asset","createAsset","version","fetch","res","json","then","data","z","Query_AdultsChildenQueryString","transform","query","URLSearchParams","entries","reduce","result","key","value","Object","assign","Query_AdditionalFiltersQueryString","passthrough","item","Children","array","parseAsync","prop","Location","coordinates","latitude","longitude","link","Link","href","rel","target","style","margin","icon","faMapMarkerAlt","Data","read","console","log","useState","defaults","search","groupBy","keys","sortBy","priceFrom","priceTo","length","Merlin_BoardStandardDesc","Merlin_ParsedStartFullDate","filters","setFilters","list","useMemo","filter","includes","toLowerCase","match","search$","Subject","useEffect","subscription","pipe","distinctUntilChanged","debounceTime","subscribe","unsubscribe","next","sorted","sort","a","b","grouped","group","concat","Filters","map","items","className","styles","Gallery","images","Hotel_ListingImageUrl","Details","onChangePriceFrom","useCallback","Number","onChangePriceTo","type","onChange","label","min","max","id","values","Adults","props","expand","setExpand","Hotel_OfferUrlWithOfferCode","Merlin_Id","Hotel_TextCategory","Merlin_FlightFrom","Merlin_ParsedDepartureTime","Hotel_GPS_Latitude","Hotel_GPS_Longitude","Hotel_Type_Name","Hotel_LocalStandard","Hotel_Local_Standard_Stars_Css","Merlin_OfferTypeSitecore","Name","ShortName","onClick","e","preventDefault","JSON","stringify","Section","___CSS_LOADER_EXPORT___","push","module","locals"],"sourceRoot":""}