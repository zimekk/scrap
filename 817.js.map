{"version":3,"file":"817.js","mappings":"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","sources":["webpack://@dev/web/./src/containers/Quotes/Chart.module.scss?912e","webpack://@dev/web/./src/containers/Quotes/Chart.tsx","webpack://@dev/web/./src/containers/Quotes/styles.module.scss?548c","webpack://@dev/web/./src/containers/Quotes/index.tsx","webpack://@dev/web/../../node_modules/classnames/index.js","webpack://@dev/web/./src/containers/Quotes/Chart.module.scss","webpack://@dev/web/./src/containers/Quotes/styles.module.scss","webpack://@dev/web/../../node_modules/fast-deep-equal/index.js","webpack://@dev/web/../../node_modules/rxjs/dist/esm5/internal/operators/debounceTime.js","webpack://@dev/web/../../node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js","webpack://@dev/web/../../node_modules/use-asset/dist/index.js"],"sourcesContent":["\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./Chart.module.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./Chart.module.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport { axisBottom, axisLeft, select, scaleLinear, timeFormat } from \"d3\";\nimport { Subject, of } from \"rxjs\";\nimport { delay, switchMap } from \"rxjs/operators\";\nimport cx from \"classnames\";\nimport styles from \"./Chart.module.scss\";\n\nconst { width, height, left, right, top, bottom } = {\n  width: 320,\n  height: 200,\n  left: 10,\n  right: 10,\n  top: 20,\n  bottom: 20,\n};\n\nexport default function Chart({ list }: { list: any[] }) {\n  const [selected, setSelected] = useState<{\n    top: number;\n    left: number;\n    label: string;\n  } | null>(null);\n  const xAxisRef = useRef(null);\n  const yAxisRef = useRef(null);\n  const containerRef = useRef(null);\n\n  const selected$ = useMemo(\n    () => new Subject<{ left: number; top: number; label: string }>(),\n    []\n  );\n  useEffect(() => {\n    const subscription = selected$\n      .pipe(\n        switchMap((selected) => of(selected).pipe(delay(selected ? 0 : 800)))\n      )\n      .subscribe((selected) => setSelected(selected));\n\n    return () => subscription.unsubscribe();\n  }, [selected$]);\n\n  useEffect(() => {\n    const dataset = list.map((item) => [\n      new Date(item.date),\n      item.value,\n      `${item.date}, ${item.value}`,\n    ]);\n\n    const xx = dataset.map(([x = 0]) => x);\n    const yy = dataset.map(([, y = 0]) => y);\n\n    const xDomain = [Math.min(...xx), Math.max(...xx)];\n    const yDomain = [Math.min(...yy), Math.max(...yy)];\n\n    const xScale = scaleLinear()\n      .domain(xDomain)\n      .range([left, width - right]);\n\n    const yScale = scaleLinear()\n      .domain(yDomain)\n      .range([height - bottom, top]);\n\n    const color = scaleLinear().domain(yDomain).range([\"red\", \"blue\"]);\n\n    select(containerRef.current).selectAll(\"circle\").remove();\n    select(containerRef.current)\n      .selectAll(\"circle\")\n      .data(dataset)\n      .join(\n        (enter) =>\n          enter\n            .append(\"circle\")\n            .attr(\"cx\", ([x = 0]) => xScale(x))\n            .attr(\"cy\", ([, y = 0]) => yScale(y))\n            .attr(\"r\", 0)\n            .attr(\"fill\", ([x = 0]) => color(x))\n            .on(\"mouseover\", (e, [, , label]) =>\n              selected$.next({ left: e.layerX, top: e.layerY, label })\n            )\n            .on(\"mouseout\", () => selected$.next(null))\n            .call((enter) =>\n              enter.transition().duration(200).attr(\"r\", 2).style(\"opacity\", 1)\n            ),\n        (update) => update.attr(\"fill\", \"lightgrey\"),\n        (exit) =>\n          exit\n            .attr(\"fill\", \"tomato\")\n            .call((exit) =>\n              exit\n                .transition()\n                .duration(200)\n                .attr(\"r\", 0)\n                .style(\"opacity\", 0)\n                .remove()\n            )\n      );\n\n    const xAxis = axisBottom(xScale)\n      .ticks(5)\n      .tickSizeOuter(0)\n      .tickFormat(timeFormat(\"%Y-%m-%d, %H:%M:%S\"));\n    select(xAxisRef.current).call(xAxis).style(\"font-size\", \"8px\");\n\n    const yAxis = axisLeft(yScale).ticks(5).tickSizeOuter(0);\n    select(yAxisRef.current).call(yAxis).style(\"font-size\", \"8px\");\n  }, [list]);\n\n  return (\n    <div className={cx(styles.Chart)}>\n      <svg\n        ref={containerRef}\n        width={width}\n        height={height}\n        viewBox={`0, 0, ${width}, ${height}`}\n      >\n        <g transform={`translate(0, ${height - bottom})`} ref={xAxisRef} />\n        <g transform={`translate(${left}, 0)`} ref={yAxisRef} />\n      </svg>\n      {selected && (\n        <div\n          className={styles.Tooltip}\n          style={{ top: selected.top, left: selected.left }}\n        >\n          {selected.label}\n        </div>\n      )}\n    </div>\n  );\n}\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./styles.module.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./styles.module.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { Subject } from \"rxjs\";\nimport { debounceTime, distinctUntilChanged, map } from \"rxjs/operators\";\nimport { createAsset } from \"use-asset\";\nimport Chart from \"./Chart\";\nimport styles from \"./styles.module.scss\";\n\nimport type { Meta, Item } from \"@dev/cli/src/services/QuotesService/types\";\n\n// https://github.com/pmndrs/use-asset#dealing-with-async-assets\nconst asset = createAsset(async (version) => {\n  const res = await fetch(`api/quotes/data.json?${version}`);\n  return await res.json();\n});\n\nfunction Data({ version = \"v1\" }) {\n  const { metas, objects: results } = asset.read(version) as {\n    metas: Meta[];\n    objects: Item[];\n  };\n\n  const options = useMemo(\n    () => ({\n      investment: metas\n        .map(({ id, name }) => ({ id, name }))\n        .sort((a, b) => a.name.localeCompare(b.name)),\n    }),\n    [results]\n  );\n\n  const [filters, setFilters] = useState(() => ({\n    investment: options.investment[0].id,\n    search: \"\",\n  }));\n\n  const [queries, setQueries] = useState(() => filters);\n\n  const search$ = useMemo(() => new Subject<any>(), []);\n\n  useEffect(() => {\n    const subscription = search$\n      .pipe(\n        map(({ search, ...filters }) =>\n          JSON.stringify({ ...queries, ...filters, search: search.trim() })\n        ),\n        distinctUntilChanged(),\n        debounceTime(400)\n      )\n      .subscribe((filters) =>\n        setQueries((queries) => ({ ...queries, ...JSON.parse(filters) }))\n      );\n    return () => subscription.unsubscribe();\n  }, [search$]);\n\n  useEffect(() => {\n    search$.next(filters);\n  }, [filters]);\n\n  console.log({ options, filters, results });\n\n  const list = useMemo(\n    () =>\n      results.filter(\n        ({ investment_id }) => investment_id === queries.investment\n      ),\n    [results, queries]\n  );\n\n  return (\n    <div>\n      <fieldset>\n        <label>\n          <span>Investment</span>\n          <select\n            value={filters.investment}\n            onChange={useCallback(\n              ({ target }) =>\n                setFilters((filters) => ({\n                  ...filters,\n                  investment: Number(target.value),\n                })),\n              []\n            )}\n          >\n            {options.investment.map(({ id, name }) => (\n              <option key={id} value={id}>\n                {name}\n              </option>\n            ))}\n          </select>\n        </label>\n        <label>\n          <span>Search</span>\n          <input\n            type=\"search\"\n            value={filters.search}\n            onChange={useCallback(\n              ({ target }) =>\n                setFilters((filters) => ({\n                  ...filters,\n                  search: target.value,\n                })),\n              []\n            )}\n          />\n        </label>\n      </fieldset>\n      <Chart list={list} />\n      <pre>{JSON.stringify(metas, null, 2)}</pre>\n      <pre>{JSON.stringify(list.slice(0, 5), null, 2)}</pre>\n    </div>\n  );\n}\n\nexport default function Section() {\n  return (\n    <div className={styles.Section}>\n      <h2>Quotes</h2>\n      <Data />\n    </div>\n  );\n}\n","/*!\n  Copyright (c) 2018 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString === Object.prototype.toString) {\n\t\t\t\t\tfor (var key in arg) {\n\t\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".eVHbCENbT49QC3XWmnbd{position:relative;border:2px solid red}.eVHbCENbT49QC3XWmnbd svg{width:100%;height:50vh}.eVHbCENbT49QC3XWmnbd .w_36iD1m0f9OQ1GS1rMv{position:absolute}.w_36iD1m0f9OQ1GS1rMv{background:#fff;border:1px solid #add8e6;color:orange;padding:.25em}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/containers/Quotes/Chart.module.scss\"],\"names\":[],\"mappings\":\"AAAA,sBACE,iBAAA,CACA,oBAAA,CAEA,0BACE,UAAA,CACA,WAAA,CAEF,4CACE,iBAAA,CAGJ,sBACE,eAAA,CACA,wBAAA,CACA,YAAA,CACA,aAAA\",\"sourcesContent\":[\".Chart {\\n  position: relative;\\n  border: 2px solid red;\\n\\n  svg {\\n    width: 100%;\\n    height: 50vh;\\n  }\\n  .Tooltip {\\n    position: absolute;\\n  }\\n}\\n.Tooltip {\\n  background: white;\\n  border: 1px solid lightblue;\\n  color: orange;\\n  padding: 0.25em;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"Chart\": \"eVHbCENbT49QC3XWmnbd\",\n\t\"Tooltip\": \"w_36iD1m0f9OQ1GS1rMv\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"._ESpGSPPpzgrCHtLDC15{color:purple}.B5XUoft7ajzWeLY9QZQ9{clear:both;padding:.5em 0;border:2px solid transparent;margin:.5em}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/containers/Quotes/styles.module.scss\"],\"names\":[],\"mappings\":\"AAAA,sBACE,YAAA,CAEF,sBACE,UAAA,CACA,cAAA,CACA,4BAAA,CACA,WAAA\",\"sourcesContent\":[\".Section {\\n  color: purple;\\n}\\n.Row {\\n  clear: both;\\n  padding: 0.5em 0;\\n  border: 2px solid transparent;\\n  margin: 0.5em;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"Section\": \"_ESpGSPPpzgrCHtLDC15\",\n\t\"Row\": \"B5XUoft7ajzWeLY9QZQ9\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","import { asyncScheduler } from '../scheduler/async';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function debounceTime(dueTime, scheduler) {\n    if (scheduler === void 0) { scheduler = asyncScheduler; }\n    return operate(function (source, subscriber) {\n        var activeTask = null;\n        var lastValue = null;\n        var lastTime = null;\n        var emit = function () {\n            if (activeTask) {\n                activeTask.unsubscribe();\n                activeTask = null;\n                var value = lastValue;\n                lastValue = null;\n                subscriber.next(value);\n            }\n        };\n        function emitWhenIdle() {\n            var targetTime = lastTime + dueTime;\n            var now = scheduler.now();\n            if (now < targetTime) {\n                activeTask = this.schedule(undefined, targetTime - now);\n                subscriber.add(activeTask);\n                return;\n            }\n            emit();\n        }\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            lastValue = value;\n            lastTime = scheduler.now();\n            if (!activeTask) {\n                activeTask = scheduler.schedule(emitWhenIdle, dueTime);\n                subscriber.add(activeTask);\n            }\n        }, function () {\n            emit();\n            subscriber.complete();\n        }, undefined, function () {\n            lastValue = activeTask = null;\n        }));\n    });\n}\n//# sourceMappingURL=debounceTime.js.map","import { identity } from '../util/identity';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function distinctUntilChanged(comparator, keySelector) {\n    if (keySelector === void 0) { keySelector = identity; }\n    comparator = comparator !== null && comparator !== void 0 ? comparator : defaultCompare;\n    return operate(function (source, subscriber) {\n        var previousKey;\n        var first = true;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            var currentKey = keySelector(value);\n            if (first || !comparator(previousKey, currentKey)) {\n                first = false;\n                previousKey = currentKey;\n                subscriber.next(value);\n            }\n        }));\n    });\n}\nfunction defaultCompare(a, b) {\n    return a === b;\n}\n//# sourceMappingURL=distinctUntilChanged.js.map","import deepEqual from 'fast-deep-equal';\n\nconst globalCache = [];\n\nfunction handleAsset(fn, cache, args, lifespan = 0, preload = false) {\n  for (const entry of cache) {\n    // Find a match\n    if (deepEqual(args, entry.args)) {\n      // If we're pre-loading and the element is present, just return\n      if (preload) return; // If an error occurred, throw\n\n      if (entry.error) throw entry.error; // If a response was successful, return\n\n      if (entry.response) return entry.response; // If the promise is still unresolved, throw\n\n      throw entry.promise;\n    }\n  } // The request is new or has changed.\n\n\n  const entry = {\n    args,\n    promise: // Make the promise request.\n    fn(...args) // Response can't be undefined or else the loop above wouldn't be able to return it\n    // This is for promises that do not return results (delays for instance)\n    .then(response => entry.response = response != null ? response : true).catch(e => entry.error = e != null ? e : 'unknown error').then(() => {\n      if (lifespan > 0) {\n        setTimeout(() => {\n          const index = cache.indexOf(entry);\n          if (index !== -1) cache.splice(index, 1);\n        }, lifespan);\n      }\n    })\n  };\n  cache.push(entry);\n  if (!preload) throw entry.promise;\n}\n\nfunction clear(cache, ...args) {\n  if (args === undefined || args.length === 0) cache.splice(0, cache.length);else {\n    const entry = cache.find(entry => deepEqual(args, entry.args));\n\n    if (entry) {\n      const index = cache.indexOf(entry);\n      if (index !== -1) cache.splice(index, 1);\n    }\n  }\n}\n\nfunction createAsset(fn, lifespan = 0) {\n  const cache = [];\n  return {\n    /**\n     * @throws Suspense Promise if asset is not yet ready\n     * @throws Error if the promise rejected for some reason\n     */\n    read: (...args) => handleAsset(fn, cache, args, lifespan),\n    preload: (...args) => void handleAsset(fn, cache, args, lifespan, true),\n    clear: (...args) => clear(cache, ...args),\n    peek: (...args) => {\n      var _cache$find;\n\n      return (_cache$find = cache.find(entry => deepEqual(args, entry.args))) == null ? void 0 : _cache$find.response;\n    }\n  };\n}\n\nfunction useAsset(fn, ...args) {\n  return handleAsset(fn, globalCache, args, useAsset.lifespan);\n}\n\nuseAsset.lifespan = 0;\n\nuseAsset.clear = (...args) => clear(globalCache, ...args);\n\nuseAsset.preload = (fn, ...args) => void handleAsset(fn, globalCache, args, useAsset.lifespan, true);\n\nuseAsset.peek = (...args) => {\n  var _globalCache$find;\n\n  return (_globalCache$find = globalCache.find(entry => deepEqual(args, entry.args))) == null ? void 0 : _globalCache$find.response;\n};\n\nexport { createAsset, useAsset };\n"],"names":["options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","undefined","height","Chart","list","useState","selected","setSelected","xAxisRef","useRef","yAxisRef","containerRef","selected$","useMemo","Subject","useEffect","subscription","pipe","switchMap","of","delay","subscribe","unsubscribe","dataset","map","item","Date","date","value","xx","yy","xDomain","Math","min","max","yDomain","xScale","scaleLinear","domain","range","width","yScale","color","select","current","selectAll","remove","data","join","enter","append","attr","on","e","label","next","left","layerX","top","layerY","call","transition","duration","style","update","exit","xAxis","axisBottom","ticks","tickSizeOuter","tickFormat","timeFormat","yAxis","axisLeft","className","cx","styles","ref","viewBox","transform","asset","createAsset","version","fetch","res","json","Data","read","metas","results","objects","investment","id","name","sort","a","b","localeCompare","search","filters","setFilters","queries","setQueries","search$","JSON","stringify","trim","distinctUntilChanged","debounceTime","parse","console","log","filter","investment_id","onChange","useCallback","target","Number","key","type","slice","Section","hasOwn","hasOwnProperty","classNames","classes","i","arguments","length","arg","argType","push","Array","isArray","inner","apply","toString","Object","prototype","module","exports","default","___CSS_LOADER_EXPORT___","locals","equal","constructor","keys","RegExp","source","flags","valueOf","dueTime","scheduler","subscriber","activeTask","lastValue","lastTime","emit","emitWhenIdle","targetTime","now","this","schedule","add","complete","comparator","keySelector","defaultCompare","previousKey","first","currentKey","globalCache","handleAsset","fn","cache","args","lifespan","preload","entry","error","response","promise","then","catch","setTimeout","index","indexOf","splice","clear","find","peek","_cache$find","useAsset","_globalCache$find"],"sourceRoot":""}