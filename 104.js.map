{"version":3,"file":"104.js","mappings":"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","sources":["webpack://@dev/web/./src/components/ZoomableLineChart/styles.module.scss?37a4","webpack://@dev/web/./src/components/ZoomableLineChart/index.tsx","webpack://@dev/web/./src/hooks/useResizeObserver.ts","webpack://@dev/web/./src/components/ZoomableLineChart/styles.module.scss"],"sourcesContent":["\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./styles.module.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./styles.module.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, {\n  type ReactNode,\n  createContext,\n  useContext,\n  useEffect,\n  useId,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport {\n  type ZoomTransform,\n  area,\n  bisector,\n  brushX,\n  extent,\n  group,\n  pointer,\n  select,\n  selectAll,\n  scaleLinear,\n  scaleOrdinal,\n  scaleTime,\n  line,\n  curveCardinal,\n  axisBottom,\n  axisLeft,\n  zoom,\n  zoomIdentity,\n  brushSelection,\n  timeMonth,\n} from \"d3\";\nimport { format } from \"date-fns\";\nimport { Subject, of } from \"rxjs\";\nimport { delay, switchMap } from \"rxjs/operators\";\nimport useResizeObserver from \"../../hooks/useResizeObserver\";\nimport cx from \"classnames\";\nimport styles from \"./styles.module.scss\";\n\nconst ZoomContext = createContext<any>(undefined);\n\nexport function SyncZoomProvider({ children }: { children: ReactNode }) {\n  const events$ = useMemo(() => new Subject<any>(), []);\n  return (\n    <ZoomContext.Provider value={events$}>{children}</ZoomContext.Provider>\n  );\n}\n\n// https://github.com/muratkemaldar/using-react-hooks-with-d3/tree/16-zoomable-line-chart\nexport default function Chart({\n  legend = false,\n  list,\n  move,\n  type = \"line\",\n  rule = false,\n}: {\n  legend?: boolean;\n  list: { group: string; date: Date; value: number; value2?: number }[];\n  move?: boolean;\n  type?: \"line\" | \"area\";\n  rule?: boolean;\n}) {\n  const stream$ = useMemo(() => new Subject<any>(), []);\n  const events$ = useContext(ZoomContext) || stream$;\n  const id = useId();\n  const svgRef = useRef<SVGSVGElement>(null);\n  const tooltipRef = useRef<HTMLDivElement>(null);\n  const wrapperRef = useRef<HTMLDivElement>(null);\n  const dimensions = useResizeObserver(wrapperRef);\n  const [currentZoomState, setCurrentZoomState] = useState<ZoomTransform>();\n  const [selected, setSelected] = useState<object | null>(null);\n  const tooltip$ = useMemo(\n    () => new Subject<{ x: number; y: number; data: object } | null>(),\n    []\n  );\n\n  useEffect(() => {\n    const tooltip = select(tooltipRef.current)\n      .style(\"opacity\", 0)\n      .style(\"pointer-events\", \"none\");\n\n    const subscription = tooltip$\n      .pipe(\n        switchMap((selected) => of(selected).pipe(delay(selected ? 0 : 400)))\n      )\n      .subscribe((selected) => {\n        // console.log({selected})\n        if (selected) {\n          const margin = { x: 30, y: 30 };\n          const { x, y, data } = selected;\n\n          const wrapperRect = wrapperRef.current.getBoundingClientRect();\n          const tooltipRect = tooltipRef.current.getBoundingClientRect();\n\n          const transform = `translate(${\n            x +\n            (x < wrapperRect.width - tooltipRect.width - margin.x\n              ? margin.x\n              : -margin.x - tooltipRect.width)\n          }px,${\n            y +\n            (y < wrapperRect.height - tooltipRect.height - margin.y\n              ? margin.y\n              : margin.y - tooltipRect.height)\n          }px)`;\n\n          if (tooltip.style(\"opacity\") === \"0\") {\n            tooltip.style(\"transform\", transform);\n          }\n\n          tooltip\n            .transition()\n            .duration(300)\n            .style(\"opacity\", 0.9)\n            .style(\"transform\", transform);\n\n          setSelected(data);\n        } else {\n          tooltip.transition().duration(300).style(\"opacity\", 0);\n        }\n      });\n    return () => subscription.unsubscribe();\n  }, [tooltip$]);\n\n  const data = useMemo(() => group(list, (item) => item.group), [list]);\n  // console.log({ data });\n\n  useEffect(() => {\n    if (!wrapperRef.current || !svgRef.current) {\n      return;\n    }\n    // https://github.com/d3/d3-axis/blob/v3.0.0/README.md#axis_tickSizeInner\n    // https://observablehq.com/@d3/styled-axes?collection=@d3/d3-axis\n    const margin = {\n      top: 10,\n      bottom: 10,\n      left: 10,\n      right: 10,\n    };\n    const svg = select<Element, unknown>(svgRef.current);\n    const svgContent = svg.select(\".content\");\n    const { width, height } =\n      dimensions || wrapperRef.current.getBoundingClientRect();\n\n    // scales + line generator\n    const xScale = scaleTime()\n      .domain(extent(list, (d) => d.date))\n      .range([margin.left, width - margin.right]);\n\n    if (currentZoomState) {\n      const newXScale = currentZoomState.rescaleX(xScale);\n      xScale.domain(newXScale.domain());\n    }\n\n    const yScale = scaleLinear()\n      // .domain([0, max(list, (d) => d.value)])\n      .domain(\n        extent(\n          list\n            .map(({ value }) => value)\n            .concat(type === \"area\" ? list.map(({ value2 }) => value2) : [])\n        )\n      )\n      .range([height - margin.bottom, margin.top]);\n\n    const lineGenerator = line()\n      .x((d) => xScale(d.date))\n      .y((d) => yScale(d.value))\n      .curve(curveCardinal);\n\n    // https://d3-graph-gallery.com/graph/stackedarea_basic.html\n    // https://d3-graph-gallery.com/graph/stackedarea_template.html\n    const areaGenerator = area()\n      .x(function (d) {\n        return xScale(d.date);\n      })\n      .y0(function (d) {\n        return yScale(d.value);\n      })\n      .y1(function (d) {\n        return yScale(d.value2);\n      });\n\n    const color = scaleOrdinal()\n      .domain(Array.from(data.keys(), String))\n      .range([\n        \"#e41a1c\",\n        \"#377eb8\",\n        \"#4daf4a\",\n        \"#984ea3\",\n        \"#ff7f00\",\n        \"#ffff33\",\n        \"#a65628\",\n        \"#f781bf\",\n        \"#999999\",\n      ]);\n\n    // render the line\n    svgContent\n      .selectAll(\".myLine\")\n      .data(data)\n      .join(\"path\")\n      .attr(\"class\", \"myLine\")\n      .attr(\"stroke\", (d) => color(d[0]))\n      .attr(\"fill-opacity\", \"0.5\")\n      .attr(\"fill\", (d) => (type === \"area\" ? color(d[0]) : \"none\"))\n      .attr(\"d\", (d) =>\n        type === \"area\" ? areaGenerator(d[1]) : lineGenerator(d[1])\n      );\n\n    svgContent\n      .selectAll(\".myDot\")\n      .data(\n        (([start, end]) => timeMonth.count(start, end))(xScale.domain()) > 6\n          ? []\n          : list\n      )\n      .join(\"circle\")\n      .attr(\"class\", \"myDot\")\n      .attr(\"stroke\", \"black\")\n      .attr(\"r\", 3)\n      .attr(\"fill\", (d) => color(d.group))\n      .attr(\"cx\", (d) => xScale(d.date))\n      .attr(\"cy\", (d) => yScale(d.value))\n      .on(\"mouseenter\", (_, data) => {\n        const x = xScale(data.date);\n        const y = yScale(data.value);\n        tooltip$.next({ x, y, data });\n      })\n      .on(\"mouseleave\", () => {\n        tooltip$.next(null);\n      });\n\n    // axes\n    const xAxis = axisBottom(xScale).tickSizeInner(\n      margin.top + margin.bottom - height\n    );\n    svg\n      .select<SVGGElement>(\".x-axis\")\n      .attr(\"transform\", `translate(0, ${height})`)\n      .call(xAxis)\n      .call((g) =>\n        g\n          .selectAll(\".tick line\")\n          .attr(\"transform\", `translate(0,${-margin.bottom})`)\n          .attr(\"stroke-opacity\", 0.5)\n          .attr(\"stroke-dasharray\", \"2,2\")\n      );\n\n    const yAxis = axisLeft(yScale).tickSizeInner(\n      margin.left + margin.right - width\n    );\n    svg\n      .select<SVGGElement>(\".y-axis\")\n      .call(yAxis)\n      .call((g) =>\n        g\n          .selectAll(\".tick line\")\n          .attr(\"transform\", `translate(${margin.left},0)`)\n          .attr(\"stroke-opacity\", 0.5)\n          .attr(\"stroke-dasharray\", \"2,2\")\n      );\n\n    // brush\n    const brush = brushX()\n      .extent([\n        [0, 0],\n        [width, height],\n      ])\n      .on(\"start brush end\", ({ sourceEvent, selection }) => {\n        if (selection) {\n          // console.log('brush.event', sourceEvent)\n          if (sourceEvent) {\n            events$.next({\n              type: \"select\",\n              selection,\n            });\n          }\n        }\n      });\n\n    // zoom\n    const zoomBehavior = zoom()\n      .scaleExtent([1, 20])\n      .translateExtent([\n        [0, 0],\n        [width, height],\n      ])\n      .on(\"zoom\", ({ sourceEvent, transform }) => {\n        // console.log('zoom.event', sourceEvent)\n        events$.next({\n          type: \"zoom\",\n          sourceEvent,\n          transform,\n        });\n      });\n\n    if (move) {\n      svg\n        .select<SVGGElement>(\".brush\")\n        .call(brush)\n        .on(\"dblclick\", function () {\n          // https://observablehq.com/@d3/double-click-brush-clear\n          // const selection = brushSelection(this) ? null : xScale.range();\n          const selection = brushSelection(this) ? null : [0, width];\n          select(this).call(brush.move, selection);\n        });\n    } else {\n      svg.call(zoomBehavior);\n    }\n\n    const cities = color.domain();\n\n    if (legend) {\n      const labels = svg\n        .select<SVGGElement>(\".legend\")\n        .selectAll(\".label\")\n        .data(cities)\n        .join((enter) => {\n          const label = enter\n            .append(\"g\")\n            .style(\"color\", (d) => color(d) as string);\n\n          label.append(\"circle\").attr(\"fill\", \"currentColor\").attr(\"r\", 7);\n\n          label.append(\"text\").attr(\"transform\", \"translate(10,4)\");\n\n          return label;\n        })\n        .attr(\"class\", \"label\")\n        .attr(\n          \"transform\",\n          (_, i) =>\n            `translate(${\n              margin.left +\n              ((width - margin.left - margin.right) / cities.length) * (i + 0.2)\n            },${height * 0.05})`\n        )\n        .select(\"text\")\n        .text((d) => d);\n    }\n\n    // https://bl.ocks.org/larsenmtl/e3b8b7c2ca4787f77d78f58d41c3da91\n    if (rule) {\n      // var cities = color.domain().map(function(name) {\n      //   return {\n      //     name: name,\n      //     values: data.map(function(d) {\n      //       return {\n      //         date: d.date,\n      //         temperature: +d[name]\n      //       };\n      //     })\n      //   };\n      // });\n      const cursor = svg.select<SVGGElement>(\".cursor\").style(\"opacity\", \"0\");\n\n      cursor\n        .selectAll(\".mouse-line\")\n        .data([0])\n        .join(\"path\")\n        .attr(\"class\", \"mouse-line\")\n        .style(\"stroke\", \"black\")\n        .style(\"stroke-width\", \"1px\")\n        .style(\"stroke-dasharray\", \"1,1\");\n\n      cursor\n        .selectAll(\".mouse-text\")\n        .data([0])\n        .join(\"text\")\n        .attr(\"class\", \"mouse-text\")\n        .attr(\"transform\", \"translate(10,3)\")\n        .attr(\"filter\", \"url(#bg-text)\")\n        .style(\"fill\", \"black\")\n        .style(\"font\", \"11px arial\");\n\n      const mousePerLine = cursor\n        .selectAll(\".mouse-per-line\")\n        .data(cities)\n        .enter()\n        .append(\"g\")\n        .attr(\"class\", \"mouse-per-line\")\n        .style(\"color\", (d) => color(d) as string);\n\n      mousePerLine\n        .append(\"circle\")\n        .attr(\"r\", 6)\n        .style(\"stroke\", \"currentColor\")\n        .style(\"fill\", \"none\")\n        .style(\"stroke-width\", \"1px\");\n\n      mousePerLine\n        .append(\"text\")\n        .attr(\"transform\", \"translate(10,3)\")\n        .attr(\"filter\", \"url(#bg-text)\")\n        .style(\"fill\", \"black\")\n        .style(\"font\", \"11px arial\");\n\n      svg\n        .select<SVGRectElement>(\".mouse\")\n        .attr(\"width\", width) // can't catch mouse events on a g element\n        .attr(\"height\", height)\n        .attr(\"fill\", \"none\")\n        .attr(\"pointer-events\", \"all\")\n        .on(\"mouseout\", function () {\n          // on mouse out hide line, circles and text\n          // console.log([\"mouseout\"]);\n          select(\".cursor\").style(\"opacity\", \"0\");\n        })\n        .on(\"mouseover\", function () {\n          // on mouse in show line, circles and text\n          // console.log([\"mouseover\"]);\n          select(\".cursor\").style(\"opacity\", \"1\");\n        })\n        .on(\"mousemove\", function (event) {\n          // mouse moving over canvas\n          const [x, y] = pointer(event);\n          // console.log([\"mousemove\"], x, y);\n          select(\".mouse-line\").attr(\"d\", () => `M${x},${height} ${x},${0}`);\n          selectAll(\".mouse-per-line\")\n            .attr(\"visibility\", (d: any): string =>\n              data.get(d) ? \"visible\" : \"hidden\"\n            )\n            .attr(\"transform\", function (d: any, i: number): string {\n              const xDate = xScale.invert(x);\n              const values = data.get(d);\n              if (!values) {\n                return \"\";\n              }\n              const bisect = bisector((d: { date: Date }) => d.date).center;\n              const idx = bisect(values, xDate);\n              const item = values[idx];\n              const y = yScale(item.value);\n              select(this).select(\"text\").text(`${item.value}`);\n              if (!i) {\n                select(\".mouse-text\").text(\n                  format(item.date, \"dd.MM.yyyy HH:mm\")\n                );\n              }\n              return \"translate(\" + xScale(item.date) + \",\" + y + \")\";\n            });\n        });\n    }\n\n    const subscription = events$.subscribe((action) => {\n      if (move) {\n        if (action.type === \"zoom\") {\n          const { sourceEvent, transform } = action;\n          if (sourceEvent) {\n            // const selection = xScale.range().map(transform.invertX, transform)\n            const selection = [0, width].map(transform.invertX, transform);\n            svg.select<SVGGElement>(\".brush\").call(brush.move, selection);\n          }\n        }\n      } else {\n        if (action.type === \"zoom\") {\n          const { sourceEvent, transform } = action;\n          if (svgRef.current && sourceEvent) {\n            if (!svgRef.current.contains(sourceEvent.target)) {\n              svg.call(zoomBehavior.transform, transform);\n            }\n          }\n          setCurrentZoomState(transform);\n        } else if (action.type === \"select\") {\n          const { selection } = action;\n          if (selection[1] > selection[0]) {\n            // const indexSelection = selection.map(xScale.invert);\n            svg\n              .call(zoomBehavior)\n              .call(\n                zoomBehavior.transform,\n                zoomIdentity\n                  .scale(width / (selection[1] - selection[0]))\n                  .translate(-selection[0], 0)\n              );\n          }\n        }\n      }\n    });\n    return () => subscription.unsubscribe();\n  }, [currentZoomState, data, dimensions, move, events$]);\n\n  return (\n    <div className={cx(styles.Chart)} ref={wrapperRef}>\n      <div ref={tooltipRef} className={styles.Tooltip}>\n        {selected && <pre>{JSON.stringify(selected, null, 2)}</pre>}\n      </div>\n      <svg\n        ref={svgRef}\n        style={\n          move\n            ? {\n                height: 150,\n              }\n            : {}\n        }\n      >\n        <defs>\n          <clipPath id={id}>\n            <rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" />\n          </clipPath>\n          <filter x=\"0\" y=\"0\" width=\"1\" height=\"1\" id=\"bg-text\">\n            <feFlood floodColor=\"rgba(255,255,255,0.75)\" />\n            <feMerge>\n              <feMergeNode in=\"bg\" />\n              <feMergeNode in=\"SourceGraphic\" />\n            </feMerge>{\" \"}\n          </filter>\n        </defs>\n        <g className=\"content\" clipPath={`url(#${id})`}></g>\n        <g className=\"x-axis\" />\n        <g className=\"y-axis\" />\n        <g className=\"brush\" />\n        <g className=\"legend\" />\n        <g className=\"cursor\" />\n        <rect className=\"mouse\" />\n      </svg>\n    </div>\n  );\n}\n","import { type RefObject, useEffect, useState } from \"react\";\nimport ResizeObserver from \"resize-observer-polyfill\";\n\n// https://github.com/muratkemaldar/using-react-hooks-with-d3/blob/16-zoomable-line-chart/src/useResizeObserver.js\nexport default function useResizeObserver(ref: RefObject<Element>) {\n  const [dimensions, setDimensions] = useState<DOMRect | null>(null);\n  useEffect(() => {\n    const observeTarget = ref.current;\n    if (observeTarget) {\n      const resizeObserver = new ResizeObserver((entries) => {\n        entries.forEach((entry) => {\n          setDimensions(entry.contentRect);\n        });\n      });\n      resizeObserver.observe(observeTarget);\n      return () => {\n        resizeObserver.unobserve(observeTarget);\n      };\n    }\n  }, [ref]);\n  return dimensions;\n}\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".TM2RQ5NCM80BeuU4weFg{position:relative;padding:2em}.TM2RQ5NCM80BeuU4weFg svg{display:block;width:100%;height:300px;background:#f7f7f7;overflow:visible}.TM2RQ5NCM80BeuU4weFg svg rect.D6JO0K0U9pALPDqqDDkn{stroke:none}.TM2RQ5NCM80BeuU4weFg svg .d3pFeUS0CMMgf0_zItXX text{font:11px arial;color:#000}.TM2RQ5NCM80BeuU4weFg .My38BlBqUTAUd9UrSUrO{position:absolute}.My38BlBqUTAUd9UrSUrO{background:#fff;border:1px solid #d3d3d3;color:orange;padding:.25em}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/ZoomableLineChart/styles.module.scss\"],\"names\":[],\"mappings\":\"AAAA,sBACE,iBAAA,CACA,WAAA,CAEA,0BACE,aAAA,CACA,UAAA,CACA,YAAA,CACA,kBAAA,CACA,gBAAA,CAEA,oDACE,WAAA,CAGA,qDACE,eAAA,CACA,UAAA,CAKN,4CACE,iBAAA,CAGJ,sBACE,eAAA,CACA,wBAAA,CACA,YAAA,CACA,aAAA\",\"sourcesContent\":[\".Chart {\\n  position: relative;\\n  padding: 2em;\\n\\n  svg {\\n    display: block;\\n    width: 100%;\\n    height: 300px;\\n    background: #f7f7f7;\\n    overflow: visible;\\n\\n    rect.selection {\\n      stroke: none;\\n    }\\n    .mouse-per-line {\\n      text {\\n        font: 11px arial;\\n        color: black;\\n      }\\n    }\\n  }\\n\\n  .Tooltip {\\n    position: absolute;\\n  }\\n}\\n.Tooltip {\\n  background: white;\\n  border: 1px solid lightgray;\\n  color: orange;\\n  padding: 0.25em;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"Chart\": \"TM2RQ5NCM80BeuU4weFg\",\n\t\"selection\": \"D6JO0K0U9pALPDqqDDkn\",\n\t\"mouse-per-line\": \"d3pFeUS0CMMgf0_zItXX\",\n\t\"Tooltip\": \"My38BlBqUTAUd9UrSUrO\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","undefined","ZoomContext","createContext","SyncZoomProvider","_ref","children","events$","useMemo","Subject","React","Provider","value","Chart","_ref2","_ref2$legend","legend","list","move","_ref2$type","type","_ref2$rule","rule","stream$","useContext","id","useId","svgRef","useRef","tooltipRef","wrapperRef","dimensions","ref","_useState2","useState","setDimensions","useEffect","observeTarget","current","resizeObserver","ResizeObserver","entries","forEach","entry","contentRect","observe","unobserve","useResizeObserver","_slicedToArray","currentZoomState","setCurrentZoomState","_useState4","selected","setSelected","tooltip$","tooltip","select","style","subscription","pipe","switchMap","of","delay","subscribe","margin","x","y","data","wrapperRect","getBoundingClientRect","tooltipRect","transform","concat","width","height","transition","duration","unsubscribe","group","item","svg","svgContent","_ref3","xScale","scaleTime","domain","extent","d","date","range","newXScale","rescaleX","_ref6","_ref7","start","end","yScale","scaleLinear","map","_ref4","_ref5","value2","lineGenerator","line","curve","curveCardinal","areaGenerator","area","y0","y1","color","scaleOrdinal","Array","from","keys","String","selectAll","join","attr","timeMonth","on","_","next","xAxis","axisBottom","tickSizeInner","call","g","yAxis","axisLeft","brush","brushX","_ref8","sourceEvent","selection","zoomBehavior","zoom","scaleExtent","translateExtent","_ref9","brushSelection","this","cities","enter","label","append","i","length","text","cursor","mousePerLine","event","_pointer2","pointer","get","xDate","invert","values","bisect","bisector","center","format","action","invertX","contains","target","zoomIdentity","translate","className","cx","styles","JSON","stringify","floodColor","in","clipPath","___CSS_LOADER_EXPORT___","push","module","locals"],"sourceRoot":""}