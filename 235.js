(self.webpackChunk_dev_web=self.webpackChunk_dev_web||[]).push([[235],{5235:(t,e,r)=>{"use strict";r.d(e,{u:()=>j,A:()=>L});var n=r(4041),a=r(4895),l=r(3046),o=r(6004),c=r(5118),i=r(8737),u=r(2818),s=r(9126);function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var m=r(3373),d=r.n(m),A=r(2591),y=r.n(A),v=r(1740),p=r.n(v),g=r(8128),h=r.n(g),b=r(855),x=r.n(b),C=r(3051),E=r.n(C),w=r(3656),k=r.n(w),M=r(5754),U=r.n(M),B={};B.styleTagTransform=k(),B.setAttributes=x(),B.insert=h().bind(null,"head"),B.domAPI=p(),B.insertStyleElement=E(),y()(U(),B);const S=U()&&U().locals?U().locals:void 0;function N(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,l,o,c=[],i=!0,u=!1;try{if(l=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;i=!1}else for(;!(i=(n=l.call(r)).done)&&(c.push(n.value),c.length!==e);i=!0);}catch(t){u=!0,a=t}finally{try{if(!i&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return R(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?R(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var T=(0,n.createContext)(void 0);function j(t){var e=t.children,r=(0,n.useMemo)((function(){return new o.B}),[]);return n.createElement(T.Provider,{value:r},e)}function L(t){var e=t.legend,r=void 0!==e&&e,m=t.list,A=t.move,y=t.type,v=void 0===y?"line":y,p=t.rule,g=void 0!==p&&p,h=(0,n.useMemo)((function(){return new o.B}),[]),b=(0,n.useContext)(T)||h,x=(0,n.useId)(),C=(0,n.useRef)(null),E=(0,n.useRef)(null),w=(0,n.useRef)(null),k=function(t){var e,r,a=(e=(0,n.useState)(null),r=2,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,l,o,c=[],i=!0,u=!1;try{if(l=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;i=!1}else for(;!(i=(n=l.call(r)).done)&&(c.push(n.value),c.length!==e);i=!0);}catch(t){u=!0,a=t}finally{try{if(!i&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return c}}(e,r)||function(t,e){if(t){if("string"==typeof t)return f(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(t,e):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=a[0],o=a[1];return(0,n.useEffect)((function(){var e=t.current;if(e){var r=new s.A((function(t){t.forEach((function(t){o(t.contentRect)}))}));return r.observe(e),function(){r.unobserve(e)}}}),[t]),l}(w),M=N((0,n.useState)(),2),U=M[0],B=M[1],R=N((0,n.useState)(null),2),j=R[0],L=R[1],O=(0,n.useMemo)((function(){return new o.B}),[]);(0,n.useEffect)((function(){var t=(0,a.Ltv)(E.current).style("opacity",0).style("pointer-events","none"),e=O.pipe((0,i.n)((function(t){return(0,c.of)(t).pipe((0,u.c)(t?0:400))}))).subscribe((function(e){if(e){var r={x:30,y:30},n=e.x,a=e.y,l=e.data,o=w.current.getBoundingClientRect(),c=E.current.getBoundingClientRect(),i="translate(".concat(n+(n<o.width-c.width-r.x?r.x:-r.x-c.width),"px,").concat(a+(a<o.height-c.height-r.y?r.y:r.y-c.height),"px)");"0"===t.style("opacity")&&t.style("transform",i),t.transition().duration(300).style("opacity",.9).style("transform",i),L(l)}else t.transition().duration(300).style("opacity",0)}));return function(){return e.unsubscribe()}}),[O]);var I=(0,n.useMemo)((function(){return(0,a.Os0)(m,(function(t){return t.group}))}),[m]);return(0,n.useEffect)((function(){if(w.current&&C.current){var t=(0,a.Ltv)(C.current),e=t.select(".content"),n=k||w.current.getBoundingClientRect(),o=n.width,c=n.height,i=(0,a.w7C)().domain((0,a.Xxv)(m,(function(t){return t.date}))).range([10,o-10]);if(U){var u=U.rescaleX(i);i.domain(u.domain())}var s,f,d,y,p=(0,a.m4Y)().domain((0,a.Xxv)(m.map((function(t){return t.value})).concat("area"===v?m.map((function(t){return t.value2})):[]))).range([c-10,10]),h=(0,a.n8j)().x((function(t){return i(t.date)})).y((function(t){return p(t.value)})).curve(a.y8u),x=(0,a.Wcw)().x((function(t){return i(t.date)})).y0((function(t){return p(t.value)})).y1((function(t){return p(t.value2)})),E=(0,a.UMr)().domain(Array.from(I.keys(),String)).range(["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"]);e.selectAll(".myLine").data(I).join("path").attr("class","myLine").attr("stroke",(function(t){return E(t[0])})).attr("fill-opacity","0.5").attr("fill",(function(t){return"area"===v?E(t[0]):"none"})).attr("d",(function(t){return"area"===v?x(t[1]):h(t[1])})),e.selectAll(".myDot").data((s=i.domain(),f=N(s,2),d=f[0],y=f[1],a.Ui6.count(d,y)>6?[]:m)).join("circle").attr("class","myDot").attr("stroke","black").attr("r",3).attr("fill",(function(t){return E(t.group)})).attr("cx",(function(t){return i(t.date)})).attr("cy",(function(t){return p(t.value)})).on("mouseenter",(function(t,e){var r=i(e.date),n=p(e.value);O.next({x:r,y:n,data:e})})).on("mouseleave",(function(){O.next(null)}));var M=(0,a.l78)(i).tickSizeInner(20-c);t.select(".x-axis").attr("transform","translate(0, ".concat(c,")")).call(M).call((function(t){return t.selectAll(".tick line").attr("transform","translate(0,".concat(-10,")")).attr("stroke-opacity",.5).attr("stroke-dasharray","2,2")}));var S=(0,a.V4s)(p).tickSizeInner(20-o);t.select(".y-axis").call(S).call((function(t){return t.selectAll(".tick line").attr("transform","translate(".concat(10,",0)")).attr("stroke-opacity",.5).attr("stroke-dasharray","2,2")}));var R=(0,a.n55)().extent([[0,0],[o,c]]).on("start brush end",(function(t){var e=t.sourceEvent,r=t.selection;r&&e&&b.next({type:"select",selection:r})})),T=(0,a.s_O)().scaleExtent([1,20]).translateExtent([[0,0],[o,c]]).on("zoom",(function(t){var e=t.sourceEvent,r=t.transform;b.next({type:"zoom",sourceEvent:e,transform:r})}));A?t.select(".brush").call(R).on("dblclick",(function(){var t=(0,a.ZRL)(this)?null:[0,o];(0,a.Ltv)(this).call(R.move,t)})):t.call(T);var j=E.domain();if(r&&t.select(".legend").selectAll(".label").data(j).join((function(t){var e=t.append("g").style("color",(function(t){return E(t)}));return e.append("circle").attr("fill","currentColor").attr("r",7),e.append("text").attr("transform","translate(10,4)"),e})).attr("class","label").attr("transform",(function(t,e){return"translate(".concat(10+(o-10-10)/j.length*(e+.2),",").concat(.05*c,")")})).select("text").text((function(t){return t})),g){var L=t.select(".cursor").style("opacity","0");L.selectAll(".mouse-line").data([0]).join("path").attr("class","mouse-line").style("stroke","black").style("stroke-width","1px").style("stroke-dasharray","1,1"),L.selectAll(".mouse-text").data([0]).join("text").attr("class","mouse-text").attr("transform","translate(10,3)").attr("filter","url(#bg-text)").style("fill","black").style("font","11px arial");var D=L.selectAll(".mouse-per-line").data(j).enter().append("g").attr("class","mouse-per-line").style("color",(function(t){return E(t)}));D.append("circle").attr("r",6).style("stroke","currentColor").style("fill","none").style("stroke-width","1px"),D.append("text").attr("transform","translate(10,3)").attr("filter","url(#bg-text)").style("fill","black").style("font","11px arial"),t.select(".mouse").attr("width",o).attr("height",c).attr("fill","none").attr("pointer-events","all").on("mouseout",(function(){(0,a.Ltv)(".cursor").style("opacity","0")})).on("mouseover",(function(){(0,a.Ltv)(".cursor").style("opacity","1")})).on("mousemove",(function(t){var e=N((0,a.WnM)(t),2),r=e[0];e[1],(0,a.Ltv)(".mouse-line").attr("d",(function(){return"M".concat(r,",").concat(c," ").concat(r,",",0)})),(0,a.Ubm)(".mouse-per-line").attr("visibility",(function(t){return I.get(t)?"visible":"hidden"})).attr("transform",(function(t,e){var n=i.invert(r),o=I.get(t);if(!o)return"";var c=(0,a.ylB)((function(t){return t.date})).center,u=o[c(o,n)],s=p(u.value);return(0,a.Ltv)(this).select("text").text("".concat(u.value)),e||(0,a.Ltv)(".mouse-text").text((0,l.GP)(u.date,"dd.MM.yyyy HH:mm")),"translate("+i(u.date)+","+s+")"}))}))}var F=b.subscribe((function(e){if(A){if("zoom"===e.type){var r=e.sourceEvent,n=e.transform;if(r){var l=[0,o].map(n.invertX,n);t.select(".brush").call(R.move,l)}}}else if("zoom"===e.type){var c=e.sourceEvent,i=e.transform;C.current&&c&&(C.current.contains(c.target)||t.call(T.transform,i)),B(i)}else if("select"===e.type){var u=e.selection;u[1]>u[0]&&t.call(T).call(T.transform,a.GSI.scale(o/(u[1]-u[0])).translate(-u[0],0))}}));return function(){return F.unsubscribe()}}}),[U,I,k,A,b]),n.createElement("div",{className:d()(S.Chart),ref:w},n.createElement("div",{ref:E,className:S.Tooltip},j&&n.createElement("pre",null,JSON.stringify(j,null,2))),n.createElement("svg",{ref:C,style:A?{height:150}:{}},n.createElement("defs",null,n.createElement("clipPath",{id:x},n.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%"})),n.createElement("filter",{x:"0",y:"0",width:"1",height:"1",id:"bg-text"},n.createElement("feFlood",{floodColor:"rgba(255,255,255,0.75)"}),n.createElement("feMerge",null,n.createElement("feMergeNode",{in:"bg"}),n.createElement("feMergeNode",{in:"SourceGraphic"}))," ")),n.createElement("g",{className:"content",clipPath:"url(#".concat(x,")")}),n.createElement("g",{className:"x-axis"}),n.createElement("g",{className:"y-axis"}),n.createElement("g",{className:"brush"}),n.createElement("g",{className:"legend"}),n.createElement("g",{className:"cursor"}),n.createElement("rect",{className:"mouse"})))}},5754:(t,e,r)=>{var n=r(2001),a=r(935)(n);a.push([t.id,".TM2RQ5NCM80BeuU4weFg{position:relative;padding:2em}.TM2RQ5NCM80BeuU4weFg svg{display:block;width:100%;height:300px;background:#f7f7f7;overflow:visible}.TM2RQ5NCM80BeuU4weFg svg rect.D6JO0K0U9pALPDqqDDkn{stroke:none}.TM2RQ5NCM80BeuU4weFg svg .d3pFeUS0CMMgf0_zItXX text{font:11px arial;color:#000}.TM2RQ5NCM80BeuU4weFg .My38BlBqUTAUd9UrSUrO{position:absolute}.My38BlBqUTAUd9UrSUrO{background:#fff;border:1px solid #d3d3d3;color:orange;padding:.25em}","",{version:3,sources:["webpack://./src/components/ZoomableLineChart/styles.module.scss"],names:[],mappings:"AAAA,sBACE,iBAAA,CACA,WAAA,CAEA,0BACE,aAAA,CACA,UAAA,CACA,YAAA,CACA,kBAAA,CACA,gBAAA,CAEA,oDACE,WAAA,CAGA,qDACE,eAAA,CACA,UAAA,CAKN,4CACE,iBAAA,CAGJ,sBACE,eAAA,CACA,wBAAA,CACA,YAAA,CACA,aAAA",sourceRoot:""}]),a.locals={Chart:"TM2RQ5NCM80BeuU4weFg",selection:"D6JO0K0U9pALPDqqDDkn","mouse-per-line":"d3pFeUS0CMMgf0_zItXX",Tooltip:"My38BlBqUTAUd9UrSUrO"},t.exports=a}}]);
//# sourceMappingURL=235.js.map