{"version":3,"file":"254.js","mappings":"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","sources":["webpack://@dev/web/./src/containers/Exchange/styles.module.scss?7a6c","webpack://@dev/web/./src/containers/Exchange/index.tsx","webpack://@dev/web/./src/containers/Exchange/styles.module.scss"],"sourcesContent":["\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./styles.module.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./styles.module.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, {\n  ChangeEventHandler,\n  useCallback,\n  useMemo,\n  useState,\n} from \"react\";\nimport { createAsset } from \"use-asset\";\nimport { format } from \"date-fns\";\nimport Chart, { SyncZoomProvider } from \"../../components/ZoomableLineChart\";\nimport styles from \"./styles.module.scss\";\n\nimport type { Rate } from \"@dev/cli/src/services/RatesService/types\";\n\nconst CODES = [\"EUR\", \"USD\", \"CHF\", \"GBP\"];\n\nconst asset = createAsset(async (version) => {\n  const res = await fetch(`api/exchange/data.json?${version}`);\n  return await res.json();\n});\n\nexport default function Section({ version = \"v1\" }) {\n  const { rates } = asset.read(version) as {\n    rates: Rate[];\n  };\n  const [code, setCode] = useState(\"CHF\");\n  const [checked, setCheckedOptions] = useState(CODES);\n  const values = useMemo(\n    () => ({\n      [\"2019-02-22\"]: 443.03, // 1.93 CHF\n      [\"2019-03-22\"]: 443.03,\n      [\"2019-04-23\"]: 443.03,\n      [\"2019-05-23\"]: 444.15,\n      [\"2019-06-21\"]: 444.15,\n      [\"2019-07-23\"]: 444.15,\n      [\"2019-08-23\"]: 442.27,\n      [\"2019-09-23\"]: 442.27,\n      [\"2019-10-23\"]: 442.27,\n      [\"2019-11-22\"]: 441.49,\n      [\"2019-12-23\"]: 441.49,\n      [\"2020-01-23\"]: 441.49,\n      [\"2020-02-21\"]: 446.11,\n      [\"2020-03-23\"]: 446.11,\n      [\"2020-04-23\"]: 446.11,\n      [\"2020-05-22\"]: 450.35,\n      [\"2020-06-23\"]: 450.35,\n      [\"2020-07-23\"]: 450.35,\n      [\"2020-08-21\"]: 445.27,\n      [\"2020-09-23\"]: 445.27,\n      [\"2020-10-23\"]: 445.27,\n      [\"2020-11-23\"]: 441.87,\n      [\"2020-12-23\"]: 441.87,\n      [\"2021-01-22\"]: 441.87,\n      [\"2021-02-23\"]: 442.06,\n      [\"2021-03-23\"]: 442.06,\n      [\"2021-04-23\"]: 442.06,\n      [\"2021-05-21\"]: 442.82,\n      [\"2021-06-23\"]: 442.82,\n      [\"2021-07-23\"]: 442.82,\n      [\"2021-08-23\"]: 442.46,\n      [\"2021-09-23\"]: 442.46,\n      [\"2021-10-22\"]: 442.46,\n      [\"2021-11-23\"]: 441.87,\n      [\"2021-12-23\"]: 441.87,\n      [\"2022-01-21\"]: 441.87,\n      [\"2022-02-23\"]: 444.77,\n      [\"2022-03-23\"]: 444.77,\n      [\"2022-04-22\"]: 444.77,\n      [\"2022-05-23\"]: 444.58,\n      [\"2022-06-23\"]: 444.58,\n      [\"2022-07-22\"]: 444.58,\n      [\"2022-08-23\"]: 453.04,\n      [\"2022-09-23\"]: 453.04,\n      [\"2022-10-21\"]: 453.04,\n    }),\n    []\n  );\n\n  const list = useMemo(\n    () =>\n      rates\n        .filter((item) => item.code === code)\n        .filter((item) => Object.keys(values).includes(item.date))\n        .map(({ buy, code, date, sell, spread, time, units }) => ({\n          date: new Date(date),\n          name: `${units} ${code}`,\n          buy: Number(buy),\n          sell: Number(sell),\n          spread: Number(spread),\n          value: values[date],\n          add: 60.0,\n        }))\n        .map((item) =>\n          Object.assign(item, {\n            pay: Math.round(100 * item.sell * item.value) / 100 + item.add,\n          })\n        )\n        .sort(\n          (a, b) => new Date(a.date).getTime() - new Date(b.date).getTime()\n        ),\n    [rates, values, code]\n  );\n\n  const series = useMemo(\n    () =>\n      rates\n        .filter(({ code }) => checked.includes(code))\n        .map(({ buy, sell, code, date, time, units }) => ({\n          date: new Date(`${date} ${time}`),\n          name: `${units} ${code}`,\n          value: Number(sell),\n          value2: Number(buy),\n          group: code,\n        }))\n        .sort(\n          (a, b) => new Date(a.date).getTime() - new Date(b.date).getTime()\n        ),\n    [rates, checked]\n  );\n\n  console.log({ rates, code, list });\n\n  return (\n    <div className={styles.Section}>\n      <h2>Exchange</h2>\n      <fieldset>\n        <legend>Code</legend>\n        {CODES.map((code) => (\n          <label key={code}>\n            <input\n              type=\"checkbox\"\n              value={code}\n              checked={checked.includes(code)}\n              onChange={useCallback<ChangeEventHandler<HTMLInputElement>>(\n                ({ target }) =>\n                  setCheckedOptions((checked) =>\n                    target.checked\n                      ? checked.concat(target.value)\n                      : checked.filter((value) => value !== target.value)\n                  ),\n                []\n              )}\n            />\n            <span>{code}</span>\n          </label>\n        ))}\n      </fieldset>\n      <SyncZoomProvider>\n        <Chart list={series} type=\"area\" legend rule />\n        <Chart list={series} type=\"area\" move />\n      </SyncZoomProvider>\n      <fieldset>\n        <label>\n          <span>Code</span>\n          <select\n            value={code}\n            onChange={useCallback<ChangeEventHandler<HTMLSelectElement>>(\n              ({ target }) => setCode(target.value),\n              []\n            )}\n          >\n            {CODES.map((code) => (\n              <option key={code} value={code}>\n                {code}\n              </option>\n            ))}\n          </select>\n        </label>\n      </fieldset>\n      <table>\n        <tbody>\n          <tr>\n            <th>Data</th>\n            <th>Nazwa</th>\n            <th>Kupno</th>\n            <th>Sprzedaż</th>\n            <th>Spread</th>\n            <th>Wartość</th>\n            <th>Stała</th>\n            <th>Kwota</th>\n          </tr>\n          {list.map((item, i) => (\n            <tr key={i}>\n              <td align=\"right\">{format(item.date, \"dd.MM.yyyy\")}</td>\n              <td>{item.name}</td>\n              <td align=\"right\">\n                {new Intl.NumberFormat(\"pl-PL\", {\n                  minimumFractionDigits: 4,\n                }).format(item.buy)}\n              </td>\n              <td align=\"right\">\n                {new Intl.NumberFormat(\"pl-PL\", {\n                  minimumFractionDigits: 4,\n                }).format(item.sell)}\n              </td>\n              <td align=\"right\">\n                {new Intl.NumberFormat(\"pl-PL\", {\n                  minimumFractionDigits: 4,\n                }).format(item.spread)}\n              </td>\n              <td align=\"right\">\n                {new Intl.NumberFormat(\"pl-PL\", {\n                  minimumFractionDigits: 2,\n                }).format(item.value)}\n              </td>\n              <td align=\"right\">\n                {new Intl.NumberFormat(\"pl-PL\", {\n                  minimumFractionDigits: 2,\n                }).format(item.add)}\n              </td>\n              <td align=\"right\">\n                {new Intl.NumberFormat(\"pl-PL\", {\n                  minimumFractionDigits: 2,\n                }).format(item.pay)}\n              </td>\n            </tr>\n          ))}\n        </tbody>\n        <tfoot>\n          {[\n            list.reduce(\n              ({ value, add, pay }, item) => ({\n                value: value + item.value,\n                add: add + item.add,\n                pay: pay + item.pay,\n              }),\n              {\n                value: 0,\n                add: 0,\n                pay: 0,\n              }\n            ),\n          ].map((item, i) => (\n            <tr key={i}>\n              <td colSpan={5}></td>\n              <td align=\"right\">\n                {new Intl.NumberFormat(\"pl-PL\", {\n                  minimumFractionDigits: 2,\n                }).format(item.value)}\n              </td>\n              <td align=\"right\">\n                {new Intl.NumberFormat(\"pl-PL\", {\n                  minimumFractionDigits: 2,\n                }).format(item.add)}\n              </td>\n              <td align=\"right\">\n                {new Intl.NumberFormat(\"pl-PL\", {\n                  minimumFractionDigits: 2,\n                }).format(item.pay)}\n              </td>\n            </tr>\n          ))}\n        </tfoot>\n      </table>\n    </div>\n  );\n}\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".B6Zp7eUYgBpjqmd1ubB8{color:purple}.HYOtY3B5vlGNT0uH_VzY{clear:both}.md3pkb8fMm3YUOeAjzY0{float:left;width:150px;height:200px}.tQM2WTe6cs7QpfRhslqC{color:#d3d3d3}.P19bo6gqrx6NwOpivm_e .ltBjGN_SfGcQnxrjG0DW.KcrPBqhF3Hx7FdbRnVRD{color:#8a2be2}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/containers/Exchange/styles.module.scss\"],\"names\":[],\"mappings\":\"AAAA,sBACE,YAAA,CAEF,sBACE,UAAA,CAEF,sBACE,UAAA,CACA,WAAA,CACA,YAAA,CAEF,sBACE,aAAA,CAIE,iEACE,aAAA\",\"sourcesContent\":[\".Section {\\n  color: purple;\\n}\\n.Row {\\n  clear: both;\\n}\\n.Gallery {\\n  float: left;\\n  width: 150px;\\n  height: 200px;\\n}\\n.Sale {\\n  color: lightgray;\\n}\\n.Details {\\n  .Feature {\\n    &.changed {\\n      color: blueviolet;\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"Section\": \"B6Zp7eUYgBpjqmd1ubB8\",\n\t\"Row\": \"HYOtY3B5vlGNT0uH_VzY\",\n\t\"Gallery\": \"md3pkb8fMm3YUOeAjzY0\",\n\t\"Sale\": \"tQM2WTe6cs7QpfRhslqC\",\n\t\"Details\": \"P19bo6gqrx6NwOpivm_e\",\n\t\"Feature\": \"ltBjGN_SfGcQnxrjG0DW\",\n\t\"changed\": \"KcrPBqhF3Hx7FdbRnVRD\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","undefined","CODES","asset","createAsset","version","fetch","res","json","Section","rates","read","useState","code","setCode","checked","setCheckedOptions","values","useMemo","list","filter","item","Object","keys","includes","date","map","buy","sell","spread","units","time","Date","name","Number","value","add","assign","pay","Math","round","sort","a","b","getTime","series","value2","group","console","log","className","styles","key","type","onChange","useCallback","target","concat","legend","rule","move","i","align","format","Intl","NumberFormat","minimumFractionDigits","reduce","colSpan","___CSS_LOADER_EXPORT___","push","module","id","locals"],"sourceRoot":""}