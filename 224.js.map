{"version":3,"file":"224.js","mappings":"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","sources":["webpack://@dev/web/./src/components/Map/styles.module.scss?c4f3","webpack://@dev/web/./src/components/Map/index.tsx","webpack://@dev/web/./src/containers/Stations/Chart.module.scss?e506","webpack://@dev/web/./src/containers/Stations/Chart.tsx","webpack://@dev/web/./src/containers/Stations/Map.module.scss?c01e","webpack://@dev/web/./src/containers/Stations/Map.tsx","webpack://@dev/web/./src/containers/Stations/styles.module.scss?005d","webpack://@dev/web/./src/containers/Stations/index.tsx","webpack://@dev/web/./src/containers/useDebounce.ts","webpack://@dev/web/./src/components/Map/styles.module.scss","webpack://@dev/web/./src/containers/Stations/Chart.module.scss","webpack://@dev/web/./src/containers/Stations/Map.module.scss","webpack://@dev/web/./src/containers/Stations/styles.module.scss"],"sourcesContent":["\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./styles.module.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./styles.module.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport L from \"leaflet\";\nimport { Marker, Tooltip, useMap } from \"react-leaflet\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faCrosshairs } from \"@fortawesome/free-solid-svg-icons\";\n// import { faMapMarkerAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport cx from \"classnames\";\nimport styles from \"./styles.module.scss\";\n\nexport function DisplayPosition({ map }: { map: L.Map }) {\n  const [initial] = useState(() => ({\n    position: map.getCenter(),\n    zoom: map.getZoom(),\n  }));\n  const [position, setPosition] = useState(map.getCenter());\n\n  const onClick = useCallback(() => {\n    map.setView(initial.position, initial.zoom);\n  }, [map]);\n\n  const onMove = useCallback(() => {\n    setPosition(map.getCenter());\n  }, [map]);\n\n  const onLocationFound = useCallback((event) => {\n    const { latlng, radius } = event;\n    console.log({ latlng, radius });\n  }, []);\n\n  useEffect(() => {\n    map.on(\"locationfound\", onLocationFound).on(\"move\", onMove);\n    return () => {\n      map.off(\"locationfound\", onLocationFound).off(\"move\", onMove);\n    };\n  }, [map, onMove]);\n\n  return (\n    <div className={cx(styles.DisplayPosition)}>\n      latitude: {position.lat.toFixed(4)}, longitude: {position.lng.toFixed(4)}{\" \"}\n      <button onClick={onClick}>Reset</button>\n      <button\n        onClick={() =>\n          map.locate({\n            setView: true,\n          })\n        }\n      >\n        Locate\n      </button>\n    </div>\n  );\n}\n\nexport function DraggableMarker({\n  position,\n  children,\n  setPosition,\n}: {\n  position: L.LatLng;\n  children: React.ReactNode;\n  setPosition: Function;\n}) {\n  const markerRef = useRef<L.Marker>(null);\n  const eventHandlers = useMemo(\n    () => ({\n      dragend() {\n        const marker = markerRef.current;\n        if (marker != null) {\n          setPosition(marker.getLatLng());\n        }\n      },\n    }),\n    []\n  );\n\n  return (\n    <Marker\n      draggable\n      eventHandlers={eventHandlers}\n      position={position}\n      ref={markerRef}\n    >\n      <Tooltip>{children}</Tooltip>\n    </Marker>\n  );\n}\n\nexport function LocateControl() {\n  const map = useMap();\n\n  const onLocate = useCallback(\n    (event) => {\n      event.preventDefault();\n      map.locate({\n        setView: true,\n      });\n    },\n    [map]\n  );\n\n  return (\n    <div className=\"leaflet-top leaflet-left\" style={{ top: 80, fontSize: 16 }}>\n      <div className=\"leaflet-control-locate leaflet-bar leaflet-control\">\n        <a\n          className=\"leaflet-bar-part leaflet-bar-part-single\"\n          title=\"Locate\"\n          href=\"#\"\n          onClick={onLocate}\n        >\n          <FontAwesomeIcon icon={faCrosshairs} />\n        </a>\n      </div>\n    </div>\n  );\n}\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./Chart.module.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./Chart.module.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport { axisBottom, axisLeft, select, scaleLinear } from \"d3\";\nimport { Subject, of } from \"rxjs\";\nimport { delay, switchMap } from \"rxjs/operators\";\nimport cx from \"classnames\";\nimport styles from \"./Chart.module.scss\";\n\nconst { width, height, left, right, top, bottom } = {\n  width: 320,\n  height: 200,\n  left: 10,\n  right: 10,\n  top: 20,\n  bottom: 20,\n};\n\nconst PROPS = {\n  id: \"id\",\n  station_id: \"station_id\",\n  network_id: \"network_id\",\n  _petrol_on: \"_petrol_on\",\n  _petrol_pb: \"_petrol_pb\",\n  _distance: \"_distance\",\n  _created: \"_created\",\n  _updated: \"_updated\",\n};\n\n// https://betterprogramming.pub/construct-d3-charts-in-react-cfecc2848ae2\n// https://wattenberger.com/blog/react-and-d3\nexport default function Chart({ list }: any) {\n  const [selected, setSelected] = useState<{\n    top: number;\n    left: number;\n    label: string;\n  } | null>(null);\n  const [{ xProp, yProp }, setProps] = useState(() => ({\n    xProp: \"network_id\",\n    yProp: \"_petrol_pb\",\n  }));\n  const xAxisRef = useRef(null);\n  const yAxisRef = useRef(null);\n  const containerRef = useRef(null);\n\n  // https://stackoverflow.com/questions/62066799/custom-tooltip-with-rxjs\n  const selected$ = useMemo(() => new Subject(), []);\n  useEffect(() => {\n    const subscription = selected$\n      .pipe(\n        switchMap((selected) => of(selected).pipe(delay(selected ? 0 : 800)))\n      )\n      .subscribe((selected) => setSelected(selected));\n\n    return () => subscription.unsubscribe();\n  }, [selected$]);\n\n  useEffect(() => {\n    const dataset = list\n      .filter(({ item }: any) => item[xProp] && item[yProp])\n      .slice(0, 2000)\n      .map(({ item }: any) => [\n        item[xProp],\n        item[yProp],\n        `[${item.id}] ${item.network_name} (${item[xProp]} / ${item[yProp]})`,\n      ]);\n\n    const xx = dataset.map(([x = 0]) => x);\n    const yy = dataset.map(([, y = 0]) => y);\n\n    const xDomain = [Math.min(...xx), Math.max(...xx)];\n    const yDomain = [Math.min(...yy), Math.max(...yy)];\n\n    const xScale = scaleLinear()\n      .domain(xDomain)\n      .range([left, width - right]);\n\n    const yScale = scaleLinear()\n      .domain(yDomain)\n      .range([height - bottom, top]);\n\n    const color = scaleLinear().domain(xDomain).range([\"red\", \"blue\"]);\n\n    select(containerRef.current).selectAll(\"circle\").remove();\n    select(containerRef.current)\n      .selectAll(\"circle\")\n      .data(dataset)\n      .join(\n        (enter) =>\n          enter\n            .append(\"circle\")\n            .attr(\"cx\", ([x = 0]) => xScale(x))\n            .attr(\"cy\", ([, y = 0]) => yScale(y))\n            .attr(\"r\", 0)\n            .attr(\"fill\", ([x = 0]) => color(x))\n            .on(\"mouseover\", (e, [, , label]) =>\n              selected$.next({ left: e.layerX, top: e.layerY, label })\n            )\n            .on(\"mouseout\", (e, i) => selected$.next(null))\n            .call((enter) =>\n              enter.transition().duration(200).attr(\"r\", 2).style(\"opacity\", 1)\n            ),\n        (update) => update.attr(\"fill\", \"lightgrey\"),\n        (exit) =>\n          exit\n            .attr(\"fill\", \"tomato\")\n            .call((exit) =>\n              exit\n                .transition()\n                .duration(200)\n                .attr(\"r\", 0)\n                .style(\"opacity\", 0)\n                .remove()\n            )\n      );\n\n    const xAxis = axisBottom(xScale).ticks(5).tickSizeOuter(0);\n    select(xAxisRef.current).call(xAxis);\n\n    const yAxis = axisLeft(yScale).ticks(5).tickSizeOuter(0);\n    select(yAxisRef.current).call(yAxis);\n  }, [list, xProp, yProp]);\n\n  return (\n    <div className={cx(styles.Chart)}>\n      <fieldset>\n        <label>\n          <span>x</span>\n          <select\n            value={xProp}\n            onChange={(e) =>\n              setProps((props) => ({ ...props, xProp: e.target.value }))\n            }\n          >\n            {Object.entries(PROPS).map(([value, label]) => (\n              <option key={value} value={value}>\n                {label}\n              </option>\n            ))}\n          </select>\n        </label>\n        <label>\n          <span>y</span>\n          <select\n            value={yProp}\n            onChange={(e) =>\n              setProps((props) => ({ ...props, yProp: e.target.value }))\n            }\n          >\n            {Object.entries(PROPS).map(([value, label]) => (\n              <option key={value} value={value}>\n                {label}\n              </option>\n            ))}\n          </select>\n        </label>\n      </fieldset>\n      <svg\n        ref={containerRef}\n        width={width}\n        height={height}\n        viewBox={`0, 0, ${width}, ${height}`}\n      >\n        <g transform={`translate(0, ${height - bottom})`} ref={xAxisRef} />\n        <g transform={`translate(${left}, 0)`} ref={yAxisRef} />\n      </svg>\n      {selected && (\n        <div\n          className={styles.Tooltip}\n          style={{ top: selected.top, left: selected.left }}\n        >\n          {selected.label}\n        </div>\n      )}\n    </div>\n  );\n}\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./Map.module.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./Map.module.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { useEffect, useMemo } from \"react\";\nimport L from \"leaflet\";\nimport { CircleMarker, MapContainer, TileLayer, Popup } from \"react-leaflet\";\nimport { DraggableMarker, LocateControl } from \"../../components/Map\";\nimport cx from \"classnames\";\nimport styles from \"./Map.module.scss\";\n\nfunction Table({ data }) {\n  return (\n    <div>\n      <table>\n        <tbody>\n          <tr>\n            <td></td>\n            {Object.keys(data.header).map((name, key) => (\n              <th key={key}>{name}</th>\n            ))}\n          </tr>\n          {data.rows\n            .sort((a, b) => b.date - a.date)\n            .map(({ date, list }, key) => (\n              <tr key={key}>\n                <th>{new Date(date).toISOString().split(\"T\")[0]}</th>\n                {Object.keys(data.header).map((name, key) => (\n                  <td key={key}>{list[name]}</td>\n                ))}\n              </tr>\n            ))}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n\nexport function useBounds(list) {\n  return useMemo(\n    () =>\n      L.featureGroup(\n        list.map(({ position: { lat, lng } }) => L.marker([lat, lng]))\n      ).getBounds(),\n    []\n  );\n}\n\nexport default function Map({ bounds, center, setCenter, list, zoom = 12 }) {\n  // https://stackoverflow.com/questions/40719689/how-to-include-leaflet-css-in-a-react-app-with-webpack\n  useEffect(() => {\n    delete L.Icon.Default.prototype._getIconUrl;\n    L.Icon.Default.mergeOptions({\n      iconRetinaUrl: require(\"leaflet/dist/images/marker-icon-2x.png\").default,\n      iconUrl: require(\"leaflet/dist/images/marker-icon.png\").default,\n      shadowUrl: require(\"leaflet/dist/images/marker-shadow.png\").default,\n    });\n  }, []);\n\n  const displayMap = useMemo(\n    () => (\n      <MapContainer\n        bounds={bounds}\n        center={center}\n        zoom={zoom}\n        className={cx(styles.Map)}\n      >\n        <TileLayer\n          attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        />\n        <DraggableMarker position={center} setPosition={setCenter}>\n          {`${center.lat},${center.lng}`}\n        </DraggableMarker>\n        {list.map(({ i, id, position, name, item }: any) => (\n          <CircleMarker\n            key={i}\n            center={position}\n            pathOptions={{ color: \"purple\" }}\n          >\n            <Popup minWidth={90}>\n              <section>\n                <header>\n                  {`[${id}] ${[name].concat(item.address || []).join(\" - \")} (${\n                    center.distanceTo(position).toFixed(0) / 1000\n                  } km)`}\n                </header>\n                <Table\n                  data={Object.entries(\n                    Object.assign(\n                      {\n                        [item._updated || item._created]:\n                          item.petrol_list.reduce(\n                            (list, { type, price }) =>\n                              Object.assign(list, { [type]: price }),\n                            {}\n                          ),\n                      },\n                      item._history\n                    )\n                  ).reduce(\n                    (table, [time, list]: any) =>\n                      Object.assign(table, {\n                        header: Object.keys(list).reduce(\n                          (header, item) =>\n                            Object.assign(header, { [item]: item }),\n                          table.header\n                        ),\n                        rows: table.rows.concat([\n                          {\n                            date: Number(time),\n                            list,\n                          },\n                        ]),\n                      }),\n                    {\n                      header: {},\n                      rows: [],\n                    }\n                  )}\n                />\n              </section>\n            </Popup>\n          </CircleMarker>\n        ))}\n        <LocateControl />\n      </MapContainer>\n    ),\n    [list, center]\n  );\n\n  // https://react-leaflet.js.org/docs/start-setup/\n  return <div className={cx(styles.Layout)}>{displayMap}</div>;\n}\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./styles.module.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./styles.module.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { useCallback, useMemo, useState } from \"react\";\nimport { format } from \"date-fns\";\nimport { createAsset } from \"use-asset\";\nimport Chart from \"./Chart\";\nimport Map, { useBounds } from \"./Map\";\nimport useDebounce from \"../useDebounce\";\nimport styles from \"./styles.module.scss\";\n\nimport type { StationItem } from \"@dev/cli/src/services/StationService/types\";\n\nconst RADIUS_LIST = [1, 3, 5, 10, 20, 50, 100, 500];\nconst PRICE_LIST = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10];\nconst SORT_BY = {\n  _distance: 1,\n  _petrol_pb: 1,\n  \"_petrol_pb+\": 1,\n  _petrol_on: 1,\n  \"_petrol_on+\": 1,\n  network_name: 1,\n  address: 1,\n  _created: -1,\n  _updated: -1,\n};\nconst TYPES = {\n  \"\": \"\",\n  pb: \"pb\",\n  \"pb+\": \"pb+\",\n  on: \"on\",\n  \"on+\": \"on+\",\n  lpg: \"lpg\",\n  \"lpg+\": \"lpg+\",\n};\n\n// https://github.com/pmndrs/use-asset#dealing-with-async-assets\nconst asset = createAsset(async (version) => {\n  const res = await fetch(`api/stations/data.json?${version}`);\n  return await res.json().then(({ results }) => ({\n    results: results.map((item: StationItem) => ({\n      ...item.petrol_list.reduce(\n        (list, { type, price }) =>\n          Object.assign(list, { [`_petrol_${type}`]: Number(price) || 0 }),\n        {}\n      ),\n      ...item,\n    })),\n  }));\n});\n\nfunction Data({ version = \"v1\" }) {\n  const { results } = asset.read(version); // As many cache keys as you need\n\n  const [search, setSearch] = useState(\"\");\n  const [filter] = useDebounce(search);\n\n  const onChangeSearch = useCallback(\n    ({ target }) => setSearch(target.value),\n    []\n  );\n\n  const [radius, setRadius] = useState(5);\n\n  const onChangeRadius = useCallback(\n    ({ target }) => setRadius(Number(target.value)),\n    []\n  );\n\n  const [type, setType] = useState(() => Object.keys(TYPES)[1]);\n\n  const onChangeType = useCallback(({ target }) => setType(target.value), []);\n\n  const [priceFrom, setPriceFrom] = useState(PRICE_LIST[0]);\n  const [priceTo, setPriceTo] = useState(PRICE_LIST[PRICE_LIST.length - 1]);\n\n  const [sortBy, setSortBy] = useState(() => Object.keys(SORT_BY)[0]);\n\n  const onChangePriceFrom = useCallback(\n    ({ target }) =>\n      setPriceTo((to) => {\n        const from = Number(target.value);\n        setPriceFrom(from);\n        return to < from ? from : to;\n      }),\n    []\n  );\n\n  const onChangePriceTo = useCallback(\n    ({ target }) =>\n      setPriceFrom((from) => {\n        const to = Number(target.value);\n        setPriceTo(to);\n        return to > from ? from : to;\n      }),\n    []\n  );\n\n  const onChangeSortBy = useCallback(\n    ({ target }) => setSortBy(target.value),\n    []\n  );\n\n  console.log({ results });\n\n  const list = useMemo(\n    () =>\n      results\n        .map((item: any, i: string) => {\n          const { station_id: id, x: lat, y: lng, network_name: name } = item;\n          return {\n            i,\n            id,\n            position: { lat, lng },\n            name,\n            item,\n          };\n        })\n        .filter(\n          ({ name, item: { petrol_list, address = \"\" } }: any) =>\n            (name.toLowerCase().match(filter) ||\n              address.toLowerCase().match(filter)) &&\n            (type\n              ? ((item) =>\n                  Boolean(item) &&\n                  priceFrom <= item.price &&\n                  item.price <= priceTo)(\n                  petrol_list.find((item: any) => item.type === type)\n                )\n              : true)\n        ),\n    [results, filter, type, priceFrom, priceTo]\n  );\n\n  const middle = useBounds([{ position: { lat: 52.1793, lng: 21.0498 } }]);\n\n  const [center, setCenter] = useState(() => middle.getCenter());\n\n  const nearby = useMemo(\n    () =>\n      list\n        .map(({ position, item, ...rest }: any) => ({\n          position,\n          item: {\n            ...item,\n            _distance: center.distanceTo(position),\n          },\n          ...rest,\n        }))\n        .filter(({ item }: any) => item._distance < radius * 1000),\n    [list, center, radius]\n  );\n\n  const sorted = useMemo(\n    () =>\n      nearby.sort(\n        (a, b) =>\n          SORT_BY[sortBy] *\n          (a.item[sortBy] === b.item[sortBy]\n            ? 0\n            : (a.item[sortBy] || 0) > (b.item[sortBy] || 0)\n            ? 1\n            : -1)\n      ),\n    [nearby, sortBy]\n  );\n\n  const bounds = useBounds(nearby);\n\n  return (\n    <div>\n      <Map\n        bounds={bounds}\n        center={center}\n        setCenter={setCenter}\n        list={nearby}\n      />\n      <Chart list={nearby} />\n      <fieldset>\n        <div>\n          <label>\n            <span>Search</span>\n            <input type=\"search\" value={search} onChange={onChangeSearch} />\n          </label>\n          <label>\n            <span>Radius</span>\n            <input\n              type=\"range\"\n              list=\"range-list\"\n              min={RADIUS_LIST[0]}\n              max={RADIUS_LIST[RADIUS_LIST.length - 1]}\n              value={radius}\n              onChange={onChangeRadius}\n            />\n            <datalist id=\"range-list\">\n              {RADIUS_LIST.map((value) => (\n                <option\n                  key={value}\n                  value={value}\n                  label={\n                    [1, 25, 100].includes(value) ? `${value} km` : undefined\n                  }\n                ></option>\n              ))}\n            </datalist>\n            <span>{`max ${radius} km`}</span>\n          </label>\n        </div>\n        <div>\n          <label>\n            <span>Type</span>\n            <select value={type} onChange={onChangeType}>\n              {Object.entries(TYPES).map(([value, label]) => (\n                <option key={value} value={value}>\n                  {label}\n                </option>\n              ))}\n            </select>\n          </label>\n          <label>\n            <span>Sort</span>\n            <select value={sortBy} onChange={onChangeSortBy}>\n              {Object.entries(SORT_BY).map(([value]) => (\n                <option key={value} value={value}>\n                  {value}\n                </option>\n              ))}\n            </select>\n          </label>\n        </div>\n        <div>\n          <label>\n            <span>Price From</span>\n            <input\n              type=\"range\"\n              list=\"price-list\"\n              min={PRICE_LIST[0]}\n              max={PRICE_LIST[PRICE_LIST.length - 1]}\n              value={priceFrom}\n              onChange={onChangePriceFrom}\n            />\n            <datalist id=\"price-list\">\n              {PRICE_LIST.map((value) => (\n                <option\n                  key={value}\n                  value={value}\n                  label={\n                    [0, 1, 2, 3, 4, 5].includes(value)\n                      ? `${value} pln/l`\n                      : undefined\n                  }\n                ></option>\n              ))}\n            </datalist>\n          </label>\n          <label>\n            <span>Price To</span>\n            <input\n              type=\"range\"\n              list=\"price-list\"\n              min={PRICE_LIST[0]}\n              max={PRICE_LIST[PRICE_LIST.length - 1]}\n              value={priceTo}\n              onChange={onChangePriceTo}\n            />\n            <span>{`${priceFrom}-${priceTo} pln/l`}</span>\n          </label>\n        </div>\n      </fieldset>\n      <table className={styles.Table}>\n        <tbody>\n          <tr>\n            <th>#</th>\n            {Object.keys(TYPES).map((key) => (\n              <th key={key}>{key ? key : <div>name</div>}</th>\n            ))}\n            <th>updated</th>\n          </tr>\n          {sorted.map(({ i, name, item }: any, key: string) => (\n            <tr key={key}>\n              <td>{i}</td>\n              {Object.keys(TYPES).map((key) => (\n                <td key={key}>\n                  {key ? (\n                    item.petrol[key] ?? \"-\"\n                  ) : (\n                    <div className={styles.Station}>\n                      {name} <address>{item.address}</address>\n                    </div>\n                  )}\n                </td>\n              ))}\n              <td>{format(item._updated, \"yyyy-MM-dd\")}</td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n\nexport default function Section() {\n  return (\n    <div className={styles.Section}>\n      <h2>Stations</h2>\n      <Data />\n    </div>\n  );\n}\n","import { useEffect, useRef, useState } from \"react\";\n\nexport default function useDebounce(search) {\n  const [filter, setFilter] = useState(search);\n\n  const r = useRef();\n\n  useEffect(() => {\n    clearTimeout(r.current);\n    r.current = setTimeout(() => setFilter(search.toLowerCase()), 400);\n    return () => {\n      clearTimeout(r.current);\n    };\n  }, [search]);\n\n  return [filter];\n}\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".NjHXg9NGgpl1h6itsGUI{position:relative;border:2px solid red}.NjHXg9NGgpl1h6itsGUI svg{width:100%;height:50vh}.NjHXg9NGgpl1h6itsGUI .Qeuu3ubiYLZshSsQhUN6{position:absolute}.Qeuu3ubiYLZshSsQhUN6{background:#fff;border:1px solid #add8e6;color:orange;padding:.25em}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/containers/Stations/Chart.module.scss\"],\"names\":[],\"mappings\":\"AAAA,sBACE,iBAAA,CACA,oBAAA,CAEA,0BACE,UAAA,CACA,WAAA,CAEF,4CACE,iBAAA,CAGJ,sBACE,eAAA,CACA,wBAAA,CACA,YAAA,CACA,aAAA\",\"sourcesContent\":[\".Chart {\\n  position: relative;\\n  border: 2px solid red;\\n\\n  svg {\\n    width: 100%;\\n    height: 50vh;\\n  }\\n  .Tooltip {\\n    position: absolute;\\n  }\\n}\\n.Tooltip {\\n  background: white;\\n  border: 1px solid lightblue;\\n  color: orange;\\n  padding: 0.25em;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"Chart\": \"NjHXg9NGgpl1h6itsGUI\",\n\t\"Tooltip\": \"Qeuu3ubiYLZshSsQhUN6\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_AT_RULE_IMPORT_0___ from \"-!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/leaflet/dist/leaflet.css\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n___CSS_LOADER_EXPORT___.i(___CSS_LOADER_AT_RULE_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cStyiPbxd0HI9tByMkkY{height:75vh;border:2px solid red}.cStyiPbxd0HI9tByMkkY header{font-weight:bold}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/containers/Stations/Map.module.scss\"],\"names\":[],\"mappings\":\"AAKA,sBACE,WAAA,CACA,oBAAA,CAEA,6BACE,gBAAA\",\"sourcesContent\":[\"@import \\\"~leaflet/dist/leaflet.css\\\";\\n\\n.Layout {\\n}\\n\\n.Map {\\n  height: 75vh;\\n  border: 2px solid red;\\n\\n  header {\\n    font-weight: bold;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"Map\": \"cStyiPbxd0HI9tByMkkY\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".JTHop_UDHoyJmmN4pc6w{color:blue}.dPxlg3RLmLdxM8tY5oVh address{color:#6495ed;font-size:small}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/containers/Stations/styles.module.scss\"],\"names\":[],\"mappings\":\"AAAA,sBACE,UAAA,CAGA,8BACE,aAAA,CACA,eAAA\",\"sourcesContent\":[\".Section {\\n  color: blue;\\n}\\n.Station {\\n  address {\\n    color: cornflowerblue;\\n    font-size: small;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"Section\": \"JTHop_UDHoyJmmN4pc6w\",\n\t\"Station\": \"dPxlg3RLmLdxM8tY5oVh\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","undefined","DisplayPosition","map","initial","useState","position","getCenter","zoom","getZoom","setPosition","onClick","useCallback","setView","onMove","onLocationFound","event","latlng","radius","console","log","useEffect","on","off","className","cx","styles","lat","toFixed","lng","locate","DraggableMarker","children","markerRef","useRef","eventHandlers","useMemo","dragend","marker","current","getLatLng","Marker","draggable","ref","Tooltip","LocateControl","useMap","onLocate","preventDefault","style","top","fontSize","title","href","icon","faCrosshairs","height","PROPS","id","station_id","network_id","_petrol_on","_petrol_pb","_distance","_created","_updated","Chart","list","selected","setSelected","xProp","yProp","setProps","xAxisRef","yAxisRef","containerRef","selected$","Subject","subscription","pipe","switchMap","of","delay","subscribe","unsubscribe","dataset","filter","item","slice","network_name","xx","yy","xDomain","Math","min","max","yDomain","xScale","scaleLinear","domain","range","width","yScale","color","select","selectAll","remove","data","join","enter","append","attr","e","label","next","left","layerX","layerY","i","call","transition","duration","update","exit","xAxis","axisBottom","ticks","tickSizeOuter","yAxis","axisLeft","value","onChange","props","target","Object","entries","key","viewBox","transform","Table","keys","header","name","rows","sort","a","b","date","Date","toISOString","split","useBounds","L","getBounds","Map","bounds","center","setCenter","iconRetinaUrl","require","iconUrl","shadowUrl","displayMap","MapContainer","TileLayer","attribution","url","D","CircleMarker","pathOptions","Popup","minWidth","concat","address","distanceTo","assign","petrol_list","reduce","type","price","_history","table","time","Number","RADIUS_LIST","PRICE_LIST","SORT_BY","TYPES","pb","lpg","asset","createAsset","version","fetch","res","json","then","results","Data","read","search","setSearch","useDebounce","onChangeSearch","setRadius","onChangeRadius","setType","onChangeType","priceFrom","setPriceFrom","length","priceTo","setPriceTo","sortBy","setSortBy","onChangePriceFrom","to","from","onChangePriceTo","onChangeSortBy","x","y","toLowerCase","match","find","Boolean","middle","nearby","rest","sorted","includes","petrol","format","Section","setFilter","r","clearTimeout","setTimeout","___CSS_LOADER_EXPORT___","push","module","locals"],"sourceRoot":""}