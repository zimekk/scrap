{"version":3,"file":"595.js","mappings":"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","sources":["webpack://@dev/web/./src/containers/Promos/styles.module.scss?e29a","webpack://@dev/web/./src/containers/Promos/index.tsx","webpack://@dev/web/./src/containers/Promos/styles.module.scss"],"sourcesContent":["\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./styles.module.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./styles.module.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { useState } from \"react\";\nimport IntlMessageFormat from \"intl-messageformat\";\nimport { createAsset } from \"use-asset\";\nimport type {\n  ProductType,\n  PromoType,\n} from \"@dev/cli/src/services/PromoService/types\";\nimport { Gallery } from \"../../components/Gallery\";\nimport { Link } from \"../../components/Link\";\nimport styles from \"./styles.module.scss\";\n\n// https://github.com/pmndrs/use-asset#dealing-with-async-assets\nconst asset = createAsset(async (version) => {\n  const res = await fetch(`api/promo/data.json?${version}`);\n  return await res.json();\n});\n\nfunction Product({ item }: { item: ProductType }) {\n  return (\n    <span className={styles.Product}>\n      <Gallery className={styles.Gallery} images={[item.photo]} />\n      <span>\n        <Link href={item.url}>{`[${item.id}] ${item.name}`}</Link>\n        <div>\n          <span className={styles.Rates}>\n            {item.rate_count\n              ? `${new Intl.NumberFormat(\"pl-PL\", {}).format(\n                  item.rate\n                )} (${new IntlMessageFormat(\n                  `{rate_count, plural,\n                one {# opinia}\n                few {# opinie}\n                many {# opinii}\n                other {# opinii}\n              }`,\n                  \"pl-PL\"\n                ).format(item)})`\n              : `Brak opinii`}\n          </span>\n        </div>\n        <div>\n          {item.previous_price ? (\n            <span className={styles.PreviousPrice}>{`${new Intl.NumberFormat(\n              \"pl-PL\",\n              {\n                minimumFractionDigits: 2,\n              }\n            ).format(item.previous_price)} PLN`}</span>\n          ) : null}\n          <span className={styles.Price}>{`${new Intl.NumberFormat(\"pl-PL\", {\n            minimumFractionDigits: 2,\n          }).format(item.price)} PLN`}</span>\n          {item.previous_price ? (\n            <span className={styles.Percentage}>{`(${new Intl.NumberFormat(\n              \"pl-PL\",\n              {\n                maximumFractionDigits: 2,\n              }\n            ).format((1 - item.price / item.previous_price) * 100)}%)`}</span>\n          ) : null}\n        </div>\n        {/* <pre>{JSON.stringify(item, null, 2)}</pre> */}\n      </span>\n    </span>\n  );\n}\n\nconst PRODUCTS_LIMIT = 3;\n\nfunction Products({ products }: { products: ProductType[] }) {\n  const [more, setMore] = useState(() =>\n    products.length > PRODUCTS_LIMIT ? false : true\n  );\n\n  return (\n    <div>\n      {(more ? products : products.slice(0, PRODUCTS_LIMIT)).map(\n        (item, key) => (\n          <div key={key} className={styles.Row}>\n            <Product item={item} />\n          </div>\n        )\n      )}\n      {more === false && (\n        <Link onClick={(e) => (e.preventDefault(), setMore(true))}>\n          more...\n        </Link>\n      )}\n    </div>\n  );\n}\n\nfunction Promos({ promos }: { promos: PromoType[] }) {\n  return (\n    <div>\n      {promos.map(({ name, desc, href, data }, key) => (\n        <div key={key}>\n          <h4>\n            <Link href={href}>{name}</Link>\n          </h4>\n          <p>{desc}</p>\n          {data && <Products products={data.products} />}\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport default function Section({ version = \"v1\" }) {\n  const { promos } = asset.read(version) as {\n    promos: PromoType[];\n  };\n  console.log({ promos });\n\n  return (\n    <div className={styles.Section}>\n      <h2>Promos</h2>\n      <Promos promos={promos} />\n    </div>\n  );\n}\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".y4uYsk_Qx97wBRkvDyrf{color:purple;padding:1em}.ijf0Gbi9Wv8JPvB3TdP_{position:relative;clear:both;min-height:66px;padding:1em 1em 1em calc(100px + 1em);border-top:1px solid #d3d3d3}._1sISkwK0RVc2ZUKvN8r9{position:absolute;top:.5em;left:.5em;width:95px;height:80px;border:1px solid #d3d3d3}.EICjWQ45bVT5Yh4FCRSf{margin-top:.5em;padding-top:.5em}.EICjWQ45bVT5Yh4FCRSf .wd4BpfMUbRab33CY_1EE{text-decoration:line-through;color:#d3d3d3}.EICjWQ45bVT5Yh4FCRSf .wd4BpfMUbRab33CY_1EE+.ogKTcP06uuMjUI91ckMd{margin-left:.5em}.EICjWQ45bVT5Yh4FCRSf .ogKTcP06uuMjUI91ckMd+.owOOy8RigIcWLEPpHY0J{margin-left:.5em}.EICjWQ45bVT5Yh4FCRSf .C_lu4pEAoLs7kOIwjYpl{color:gray}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/containers/Promos/styles.module.scss\"],\"names\":[],\"mappings\":\"AAAA,sBACE,YAAA,CACA,WAAA,CAEF,sBACE,iBAAA,CACA,UAAA,CACA,eAAA,CACA,qCAAA,CACA,4BAAA,CAEF,uBACE,iBAAA,CACA,QAAA,CACA,SAAA,CACA,UAAA,CACA,WAAA,CACA,wBAAA,CAEF,sBACE,eAAA,CACA,gBAAA,CACA,4CACE,4BAAA,CACA,aAAA,CACA,kEACE,gBAAA,CAIF,kEACE,gBAAA,CAGJ,4CACE,UAAA\",\"sourcesContent\":[\".Section {\\n  color: purple;\\n  padding: 1em;\\n}\\n.Row {\\n  position: relative;\\n  clear: both;\\n  min-height: 66px;\\n  padding: 1em 1em 1em calc(100px + 1em);\\n  border-top: 1px solid lightgray;\\n}\\n.Gallery {\\n  position: absolute;\\n  top: 0.5em;\\n  left: 0.5em;\\n  width: 95px;\\n  height: 80px;\\n  border: 1px solid lightgray;\\n}\\n.Product {\\n  margin-top: 0.5em;\\n  padding-top: 0.5em;\\n  .PreviousPrice {\\n    text-decoration: line-through;\\n    color: lightgray;\\n    & + .Price {\\n      margin-left: 0.5em;\\n    }\\n  }\\n  .Price {\\n    & + .Percentage {\\n      margin-left: 0.5em;\\n    }\\n  }\\n  .Rates {\\n    color: gray;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"Section\": \"y4uYsk_Qx97wBRkvDyrf\",\n\t\"Row\": \"ijf0Gbi9Wv8JPvB3TdP_\",\n\t\"Gallery\": \"_1sISkwK0RVc2ZUKvN8r9\",\n\t\"Product\": \"EICjWQ45bVT5Yh4FCRSf\",\n\t\"PreviousPrice\": \"wd4BpfMUbRab33CY_1EE\",\n\t\"Price\": \"ogKTcP06uuMjUI91ckMd\",\n\t\"Percentage\": \"owOOy8RigIcWLEPpHY0J\",\n\t\"Rates\": \"C_lu4pEAoLs7kOIwjYpl\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","undefined","i","asset","createAsset","version","fetch","res","json","Product","item","className","styles","Gallery","images","photo","Link","href","url","id","name","rate_count","Intl","NumberFormat","format","rate","IntlMessageFormat","previous_price","minimumFractionDigits","price","maximumFractionDigits","Products","products","useState","length","more","setMore","slice","map","key","onClick","e","preventDefault","Promos","promos","desc","data","Section","read","console","log","___CSS_LOADER_EXPORT___","push","module","locals"],"sourceRoot":""}