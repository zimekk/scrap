{"version":3,"file":"767.js","mappings":"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","sources":["webpack://@dev/web/./src/containers/Products/Barcode/index.tsx","webpack://@dev/web/./src/containers/Products/utils.ts","webpack://@dev/web/./src/containers/Products/styles.module.scss?53e8","webpack://@dev/web/./src/containers/Products/index.tsx","webpack://@dev/web/./src/containers/useDebounce.ts","webpack://@dev/web/./src/containers/Products/styles.module.scss"],"sourcesContent":["import React, { useMemo } from \"react\";\nimport { encode } from \"@darthmaim/barcode\";\nimport { Barcode } from \"@darthmaim/react-barcode\";\n\nexport default function ProductBarcode({\n  barcode,\n  className,\n}: {\n  barcode: string;\n  className?: string;\n}) {\n  const isValid = useMemo(() => {\n    try {\n      encode(barcode);\n    } catch (e) {\n      return false;\n    }\n    return true;\n  }, [barcode]);\n\n  return isValid ? (\n    <div className={className}>\n      <Barcode value={barcode} />\n    </div>\n  ) : null;\n}\n","const EAN_RE = /^EAN: (\\d{13}$)/;\n\nexport const getBarcode = (label: string[] = []) =>\n  label.find((label) => label.match(EAN_RE))?.replace(EAN_RE, \"$1\");\n\nexport const getPrice = (price: string[]) =>\n  Number(\n    (price.filter((price) => !price.match(/Oszczędź/)).pop() || \"0\")\n      .replace(/[^0-9,\\.]/g, \"\")\n      .replace(\",\", \".\")\n  );\n\nexport const getMinMaxPrices = ({ price, _history = {} }: any) =>\n  Object.entries<any>({\n    [Date.now()]: { price },\n    ..._history,\n  }).reduce(\n    (result, [_date, { price }]) =>\n      ((price) =>\n        Object.assign(\n          result,\n          0 < price && price < result.priceMin ? { priceMin: price } : {},\n          price > result.priceMax ? { priceMax: price } : {}\n        ))(getPrice(price)),\n    ((price) => ({\n      priceNow: price,\n      priceMin: price,\n      priceMax: price,\n    }))(getPrice(price))\n  );\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./styles.module.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./styles.module.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, {\n  type ChangeEventHandler,\n  useCallback,\n  useMemo,\n  useState,\n} from \"react\";\nimport { format } from \"date-fns\";\nimport { createAsset } from \"use-asset\";\nimport { Gallery } from \"../../components/Gallery\";\nimport { Link } from \"../../components/Link\";\nimport Barcode from \"./Barcode\";\nimport useDebounce from \"../useDebounce\";\nimport { getBarcode, getMinMaxPrices, getPrice } from \"./utils\";\nimport cx from \"classnames\";\nimport styles from \"./styles.module.scss\";\n\nimport type {\n  ProductItem,\n  ReviewItem,\n} from \"@dev/cli/src/services/ProductService/types\";\n\nconst SORT_BY = {\n  title: 1,\n  brand: 1,\n  _price: 1,\n  _priceChangeMax: 1,\n  _priceChangeMin: 1,\n  _stars: -1,\n  _created: -1,\n  _updated: -1,\n};\n\nconst PRICE_LIST = [\n  0, 100, 200, 500, 1000, 1500, 2000, 3000, 4000, 5000, 10000, 15000, 20000,\n  25000,\n];\n\nconst PRICE_CHANGE_LIST = [\n  -100, -50, -30, -20, -10, -5, 0, 5, 10, 20, 30, 50, 100,\n];\n\n// https://github.com/pmndrs/use-asset#dealing-with-async-assets\nconst asset = createAsset(async (version) => {\n  // copy({results:temp1.results.filter(item=>[460088,682156,681208].includes(Number(item.id))).map(({_id,_history,...item }) => item)})\n  const res = await fetch(`api/products/data.json?${version}`);\n  return await res.json();\n});\n\nconst formatPrice = (price: number) =>\n  `${new Intl.NumberFormat(\"pl-PL\", {\n    minimumFractionDigits: 2,\n  }).format(price)} zł`;\n\nconst priceChange = (price: number, after: number) =>\n  `${new Intl.NumberFormat(\"pl-PL\", {\n    maximumFractionDigits: 2,\n  }).format(100 * (price / after - 1))}%`;\n\nconst filterPriceChange = (\n  item: ReturnType<typeof getMinMaxPrices>,\n  change: number\n) =>\n  change === 0 ||\n  (item.priceNow > 0 &&\n    (change > 0\n      ? 100 * (item.priceNow / item.priceMin - 1) >= change\n      : 100 * (item.priceNow / item.priceMax - 1) <= change));\n\nfunction Compare({ item }: { item: ReturnType<typeof getMinMaxPrices> }) {\n  return (\n    <div>\n      <span>\n        <b>{` cena: ${formatPrice(item.priceNow)} `}</b>\n      </span>\n      {item.priceMin < item.priceNow && (\n        <span>\n          {` / min: ${formatPrice(item.priceMin)} (${priceChange(\n            item.priceNow,\n            item.priceMin\n          )}) `}\n        </span>\n      )}\n      {item.priceNow < item.priceMax && (\n        <span>\n          {` / max: ${formatPrice(item.priceMax)} (${priceChange(\n            item.priceNow,\n            item.priceMax\n          )}) `}\n        </span>\n      )}\n      {/* <pre>\n        {JSON.stringify(\n          {\n            priceNow: item.priceNow,\n            priceMin: item.priceMin,\n            priceMax: item.priceMax,\n          },\n          null,\n          2\n        )}\n      </pre> */}\n    </div>\n  );\n}\n\nfunction Data({ version = \"v1\" }) {\n  const { results } = asset.read(version) as { results: ProductItem[] };\n\n  const options = useMemo(\n    () => ({\n      brand: [\"\"].concat(\n        results\n          .map(({ brand }: any) => brand)\n          .filter(Boolean)\n          .filter(\n            (value: any, index: number, array: any[]) =>\n              array.indexOf(value) === index\n          )\n          .sort((a: string, b: string) => a.localeCompare(b))\n      ),\n    }),\n    [results]\n  );\n\n  const [filters, setFilters] = useState(() => ({\n    brand: options.brand[0],\n    category: \"\",\n    search: \"\",\n    onlyMinimal: true,\n    onlyPromoted: false,\n    onlyReduced: false,\n    priceFrom: PRICE_LIST[0],\n    priceTo: PRICE_LIST[PRICE_LIST.length - 1],\n    priceChange: 0,\n  }));\n\n  const [filter] = useDebounce(filters.search);\n\n  const [sortBy, setSortBy] = useState(\n    () => Object.keys(SORT_BY).pop() as keyof typeof SORT_BY\n  );\n\n  const onChangePriceFrom = useCallback<ChangeEventHandler<HTMLInputElement>>(\n    ({ target }) =>\n      setFilters(({ priceTo, ...criteria }) => {\n        const priceFrom = Number(target.value);\n        return {\n          ...criteria,\n          priceFrom,\n          priceTo: priceTo < priceFrom ? priceFrom : priceTo,\n        };\n      }),\n    []\n  );\n\n  const onChangePriceTo = useCallback<ChangeEventHandler<HTMLInputElement>>(\n    ({ target }) =>\n      setFilters(({ priceFrom, ...criteria }) => {\n        const priceTo = Number(target.value);\n        return {\n          ...criteria,\n          priceFrom: priceTo > priceFrom ? priceFrom : priceTo,\n          priceTo,\n        };\n      }),\n    []\n  );\n\n  const onChangePriceChange = useCallback<ChangeEventHandler<HTMLInputElement>>(\n    ({ target }) =>\n      setFilters((criteria) => ({\n        ...criteria,\n        priceChange: Number(target.value),\n      })),\n    []\n  );\n\n  console.log({ filters, results });\n\n  const list = useMemo(\n    () =>\n      results\n        .map(({ _created, _updated = _created, ...item }) => ({\n          _title: item.title.toLowerCase(),\n          _price: getPrice(item.price),\n          _stars: Number(item.stars.replace(/[^0-9]/g, \"\")),\n          _created,\n          _updated,\n          _history: {},\n          ...item,\n          ...((item) => ({\n            ...item,\n            _priceChangeMin: 100 * (item.priceNow / item.priceMin - 1),\n            _priceChangeMax: 100 * (item.priceNow / item.priceMax - 1),\n          }))(getMinMaxPrices(item)),\n          barcode: getBarcode(item.label),\n        }))\n        // .filter((item: any) => (item.price.length > 1))\n        .filter(\n          (item: any) =>\n            (item._title.match(filter) || filter.trim() === String(item.id)) &&\n            filters.priceFrom <= item.priceNow &&\n            item.priceNow <= filters.priceTo &&\n            filterPriceChange(item, filters.priceChange) &&\n            (!filters.brand || [item.brand].includes(filters.brand)) &&\n            (!filters.onlyMinimal || item.priceNow === item.priceMin) &&\n            (!filters.onlyPromoted || item.proms.length > 0) &&\n            (!filters.onlyReduced || item.price.length > 1)\n        ),\n    [\n      results,\n      filter,\n      filters.brand,\n      filters.priceFrom,\n      filters.priceTo,\n      filters.priceChange,\n      filters.onlyMinimal,\n      filters.onlyPromoted,\n      filters.onlyReduced,\n    ]\n  );\n\n  const sorted = useMemo(\n    () =>\n      list.sort((a, b) =>\n        a[sortBy] === b[sortBy]\n          ? a._created > b._created\n            ? 1\n            : -1\n          : SORT_BY[sortBy] * (a[sortBy] > b[sortBy] ? 1 : -1)\n      ),\n    [list, sortBy]\n  );\n\n  return (\n    <div>\n      <fieldset>\n        <label>\n          <span>Search</span>\n          <input\n            type=\"search\"\n            value={filters.search}\n            onChange={useCallback<ChangeEventHandler<HTMLInputElement>>(\n              ({ target }) =>\n                setFilters((filters) => ({\n                  ...filters,\n                  search: target.value,\n                })),\n              []\n            )}\n          />\n        </label>\n        <label>\n          <span>Brand</span>\n          <select\n            value={filters.brand}\n            onChange={useCallback<ChangeEventHandler<HTMLSelectElement>>(\n              ({ target }) =>\n                setFilters((filters) => ({\n                  ...filters,\n                  brand: target.value,\n                })),\n              []\n            )}\n          >\n            {options.brand.map((value) => (\n              <option key={value} value={value}>\n                {value}\n              </option>\n            ))}\n          </select>\n        </label>\n        <label>\n          <span>Sort</span>\n          <select\n            value={sortBy}\n            onChange={useCallback<ChangeEventHandler<HTMLSelectElement>>(\n              ({ target }) => setSortBy(target.value as keyof typeof SORT_BY),\n              []\n            )}\n          >\n            {Object.entries(SORT_BY).map(([value, label]) => (\n              <option key={value} value={value}>\n                {value}\n              </option>\n            ))}\n          </select>\n        </label>\n        <label>\n          <input\n            type=\"checkbox\"\n            checked={filters.onlyMinimal}\n            onChange={useCallback<ChangeEventHandler<HTMLInputElement>>(\n              ({ target }) =>\n                setFilters((filters) => ({\n                  ...filters,\n                  onlyMinimal: target.checked,\n                })),\n              []\n            )}\n          />\n          <span>Minimal</span>\n        </label>\n        <label>\n          <input\n            type=\"checkbox\"\n            checked={filters.onlyPromoted}\n            onChange={useCallback<ChangeEventHandler<HTMLInputElement>>(\n              ({ target }) =>\n                setFilters((filters) => ({\n                  ...filters,\n                  onlyPromoted: target.checked,\n                })),\n              []\n            )}\n          />\n          <span>Promoted</span>\n        </label>\n        <label>\n          <input\n            type=\"checkbox\"\n            checked={filters.onlyReduced}\n            onChange={useCallback<ChangeEventHandler<HTMLInputElement>>(\n              ({ target }) =>\n                setFilters((filters) => ({\n                  ...filters,\n                  onlyReduced: target.checked,\n                })),\n              []\n            )}\n          />\n          <span>Reduced</span>\n        </label>\n        <div>\n          <label>\n            <span>Price From</span>\n            <input\n              type=\"range\"\n              list=\"price-list\"\n              min={PRICE_LIST[0]}\n              max={PRICE_LIST[PRICE_LIST.length - 1]}\n              value={filters.priceFrom}\n              onChange={onChangePriceFrom}\n            />\n            <datalist id=\"price-list\">\n              {PRICE_LIST.map((value) => (\n                <option\n                  key={value}\n                  value={value}\n                  label={\n                    [0, 100000, 200000, 300000, 400000, 500000].includes(value)\n                      ? `${value} zł`\n                      : undefined\n                  }\n                ></option>\n              ))}\n            </datalist>\n          </label>\n          <label>\n            <span>Price To</span>\n            <input\n              type=\"range\"\n              list=\"price-list\"\n              min={PRICE_LIST[0]}\n              max={PRICE_LIST[PRICE_LIST.length - 1]}\n              value={filters.priceTo}\n              onChange={onChangePriceTo}\n            />\n            <span>{`${filters.priceFrom}-${filters.priceTo} zł`}</span>\n          </label>{\" \"}\n          <label>\n            <span>Price Change</span>\n            <input\n              type=\"range\"\n              list=\"price-change-list\"\n              min={PRICE_CHANGE_LIST[0]}\n              max={PRICE_CHANGE_LIST[PRICE_CHANGE_LIST.length - 1]}\n              value={filters.priceChange}\n              onChange={onChangePriceChange}\n            />\n            <datalist id=\"price-change-list\">\n              {PRICE_CHANGE_LIST.map((value) => (\n                <option key={value} value={value}></option>\n              ))}\n            </datalist>\n            <span>{`${filters.priceChange}%`}</span>\n          </label>\n        </div>\n      </fieldset>\n      <div>{`Found ${list.length} products out of a total of ${results.length}`}</div>\n      <ol>\n        {sorted.slice(0, 100).map(({ images, srcSet, ...item }) => (\n          <li key={item.id} className={styles.Row}>\n            {/* <pre>{JSON.stringify(item.price, null, 2)}</pre> */}\n            <Gallery\n              className={styles.Gallery}\n              images={images}\n              srcSet={srcSet}\n            />\n            {item.barcode && (\n              <Barcode className={styles.Barcode} barcode={item.barcode} />\n            )}\n            <h3>\n              <Link href={item.url}>{item.title}</Link>\n            </h3>\n            <h4>{item.brand}</h4>\n            {item.label && <div>{item.label.join(\" | \")}</div>}\n            <Compare item={item} />\n            <Details item={item} />\n            <History\n              history={Object.entries(item._history).reverse()}\n              item={item}\n            />\n            {item.reviews && <Reviews reviews={item.reviews} />}\n          </li>\n        ))}\n      </ol>\n    </div>\n  );\n}\n\nconst HISTORY_LIMIT = 1;\n\nfunction History({ history, item }: { history: any[]; item: unknown }) {\n  const [more, setMore] = useState(() =>\n    history.length > HISTORY_LIMIT ? false : true\n  );\n\n  return (\n    <div className={styles.History}>\n      {(more ? history : history.slice(0, HISTORY_LIMIT)).map(\n        ([time, prev], key, list) => (\n          <Details\n            key={key}\n            item={prev}\n            prev={key > 0 ? list[key - 1][1] : item}\n            time={Number(time)}\n          />\n        )\n      )}\n      {more === false && (\n        <Link onClick={(e) => (e.preventDefault(), setMore(true))}>\n          Show more...\n        </Link>\n      )}\n    </div>\n  );\n}\n\nfunction Details({\n  item,\n  prev,\n  time = item._updated || item._created,\n}: {\n  item: Omit<ProductItem, \"images\">;\n  prev?: any;\n  time?: number;\n}) {\n  return (\n    <div className={cx(styles.Details, prev && styles.separator)}>\n      <div className={styles.Sidebar}>\n        {time && (\n          <div className={styles.Date}>{format(time, \"yyyy-MM-dd HH:mm\")}</div>\n        )}\n        <h5>{item.price.join(\" \")}</h5>\n        <div\n          className={cx(\n            styles.Feature,\n            prev && prev.stars !== item.stars && styles.changed\n          )}\n        >\n          {item.stars}\n        </div>\n      </div>\n      {item.proms && (\n        <div\n          className={cx(\n            styles.Feature,\n            prev && prev.proms !== item.proms && styles.changed\n          )}\n        >\n          {item.proms.join(\" | \")}\n        </div>\n      )}\n      <ul\n        className={cx(\n          styles.Feature,\n          prev &&\n            prev.links.join(\":\") !== item.links.join(\":\") &&\n            styles.changed\n        )}\n      >\n        {item.links.map((link, key) => (\n          <li key={key}>{link}</li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n\nfunction Reviews({ reviews }: { reviews: ReviewItem[] }) {\n  const [expand, setExpand] = useState(false);\n\n  return (\n    <div>\n      <div>\n        {/* {`Found ${list.length} vehicles out of a total of ${results.length}`}{\" \"} */}\n        <Link\n          onClick={(e) => (e.preventDefault(), setExpand((expand) => !expand))}\n        >\n          {expand ? \"Hide reviews\" : \"Show reviews\"}\n        </Link>\n      </div>\n      {/* {expand && <pre>{JSON.stringify(reviews, null, 2)}</pre>} */}\n      {expand && (\n        <ul>\n          {reviews.map(({ author, body, date, rating = \"-\" }, key) => (\n            <li key={key}>\n              <div>\n                <b>\n                  {date}, {author} ({rating})\n                </b>\n              </div>\n              <div>{body}</div>\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n}\n\nexport default function Section() {\n  return (\n    <div className={styles.Section}>\n      <h2>Products</h2>\n      <Data />\n    </div>\n  );\n}\n","import { useEffect, useRef, useState } from \"react\";\n\nexport default function useDebounce(search) {\n  const [filter, setFilter] = useState(search);\n\n  const r = useRef();\n\n  useEffect(() => {\n    clearTimeout(r.current);\n    r.current = setTimeout(() => setFilter(search.toLowerCase()), 400);\n    return () => {\n      clearTimeout(r.current);\n    };\n  }, [search]);\n\n  return [filter];\n}\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.KUxoC6psSrrMeYM5oAlM{color:purple}.KUxoC6psSrrMeYM5oAlM h4{margin:.5em 0}.KUxoC6psSrrMeYM5oAlM h5{margin:.25em 0}.mfYsAqyyqNlAHcqIZRYo{clear:both}.IUsVGkhlVQfyeVKDBe0W{float:left;width:200px;height:150px}.bjKwkJ10mgVeKE66YVYI{float:right}.oYFC57M7QUXHd0bHx90u{clear:both}.oYFC57M7QUXHd0bHx90u .d4EGmd7WGzC6jR642U4i{float:right;text-align:right;margin:0 2em}.oYFC57M7QUXHd0bHx90u .hCevawnmB_dy9ljh4Xeg.WHvJJI0E40Qb_2xC6kaz{color:#8a2be2}.oYFC57M7QUXHd0bHx90u.eCohJhUTkuxKnSmXSCp6{border-top:1px solid #d3d3d3;margin-top:.5em;padding-top:.5em}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/containers/Products/styles.module.scss\"],\"names\":[],\"mappings\":\"AAAA,sBACE,YAAA,CACA,yBACE,aAAA,CAEF,yBACE,cAAA,CAGJ,sBACE,UAAA,CAEF,sBACE,UAAA,CACA,WAAA,CACA,YAAA,CAEF,sBACE,WAAA,CAEF,sBACE,UAAA,CACA,4CACE,WAAA,CACA,gBAAA,CACA,YAAA,CAGA,iEACE,aAAA,CAGJ,2CACE,4BAAA,CACA,eAAA,CACA,gBAAA\",\"sourcesContent\":[\".Section {\\n  color: purple;\\n  h4 {\\n    margin: 0.5em 0;\\n  }\\n  h5 {\\n    margin: 0.25em 0;\\n  }\\n}\\n.Row {\\n  clear: both;\\n}\\n.Gallery {\\n  float: left;\\n  width: 200px;\\n  height: 150px;\\n}\\n.Barcode {\\n  float: right;\\n}\\n.Details {\\n  clear: both;\\n  .Sidebar {\\n    float: right;\\n    text-align: right;\\n    margin: 0 2em;\\n  }\\n  .Feature {\\n    &.changed {\\n      color: blueviolet;\\n    }\\n  }\\n  &.separator {\\n    border-top: 1px solid lightgray;\\n    margin-top: 0.5em;\\n    padding-top: 0.5em;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"Section\": `KUxoC6psSrrMeYM5oAlM`,\n\t\"Row\": `mfYsAqyyqNlAHcqIZRYo`,\n\t\"Gallery\": `IUsVGkhlVQfyeVKDBe0W`,\n\t\"Barcode\": `bjKwkJ10mgVeKE66YVYI`,\n\t\"Details\": `oYFC57M7QUXHd0bHx90u`,\n\t\"Sidebar\": `d4EGmd7WGzC6jR642U4i`,\n\t\"Feature\": `hCevawnmB_dy9ljh4Xeg`,\n\t\"changed\": `WHvJJI0E40Qb_2xC6kaz`,\n\t\"separator\": `eCohJhUTkuxKnSmXSCp6`\n};\nmodule.exports = ___CSS_LOADER_EXPORT___;\n"],"names":["ProductBarcode","_ref","barcode","className","useMemo","encode","e","React","Barcode","value","EAN_RE","getBarcode","_label$find","arguments","length","undefined","find","label","match","replace","getPrice","price","Number","filter","pop","getMinMaxPrices","_ref$_history","_history","Object","entries","_objectSpread","_defineProperty","Date","now","reduce","result","_ref2","_ref3","assign","priceMin","priceMax","priceNow","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","l","TypeError","call","done","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","enumerable","configurable","writable","_invoke","asyncGeneratorStep","Promise","resolve","then","SORT_BY","title","brand","_price","_priceChangeMax","_priceChangeMin","_stars","_created","_updated","PRICE_LIST","PRICE_CHANGE_LIST","asset","createAsset","_callee","version","res","_context","fetch","concat","json","apply","_next","_throw","_x","formatPrice","Intl","NumberFormat","minimumFractionDigits","format","priceChange","after","maximumFractionDigits","filterPriceChange","item","change","Compare","Data","_ref3$version","results","read","map","_ref5","Boolean","index","array","indexOf","sort","b","localeCompare","_useState2","_slicedToArray","useState","category","search","onlyMinimal","onlyPromoted","onlyReduced","priceFrom","priceTo","filters","setFilters","useDebounce","_useState4","keys","sortBy","setSortBy","onChangePriceFrom","useCallback","_ref6","target","_ref7","criteria","_objectWithoutProperties","_excluded","onChangePriceTo","_ref8","_ref9","_excluded2","onChangePriceChange","_ref0","console","log","list","_ref1","_ref1$_updated","_excluded3","_title","toLowerCase","stars","trim","String","id","includes","proms","sorted","type","onChange","_ref10","_ref11","key","_ref12","_ref13","_ref14","checked","_ref15","_ref16","_ref17","min","max","slice","_ref18","images","srcSet","_excluded4","styles","Gallery","Link","href","url","join","Details","History","history","reverse","reviews","Reviews","HISTORY_LIMIT","_ref19","_useState6","more","setMore","_ref20","_ref21","time","prev","onClick","preventDefault","_ref22","_ref22$time","cx","links","link","_ref23","_useState8","expand","setExpand","_ref24","author","body","date","_ref24$rating","rating","Section","setFilter","useRef","useEffect","clearTimeout","current","setTimeout","___CSS_LOADER_API_SOURCEMAP_IMPORT___","___CSS_LOADER_EXPORT___","___CSS_LOADER_API_IMPORT___","push","module","locals","exports"],"sourceRoot":""}