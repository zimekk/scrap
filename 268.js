"use strict";(self.webpackChunk_dev_web=self.webpackChunk_dev_web||[]).push([[268],{268:(e,t,l)=>{l.r(t),l.d(t,{default:()=>$});var n=l(2784),a=l(357),r=l(5062),o=l.n(r),c=l(9386),u=l(5449),i=l(1128),s=l(3964),m=l(2048),d=l(5176),p=l(7122),f=l(9530),E=l(5096),v=l(2779),h=l.n(v),b=l(7815);function g({position:e,children:t,setPosition:l}){const a=(0,n.useRef)(null),r=(0,n.useMemo)((()=>({dragend(){const e=a.current;null!=e&&l(e.getLatLng())}})),[]);return n.createElement(c.J,{draggable:!0,eventHandlers:r,position:e,ref:a},n.createElement(u.u,null,t))}function y(){const e=(0,i.Sx)(),t=(0,n.useCallback)((t=>{t.preventDefault(),e.locate({setView:!0})}),[e]);return n.createElement("div",{className:"leaflet-top leaflet-left",style:{top:80,fontSize:16}},n.createElement("div",{className:"leaflet-control-locate leaflet-bar leaflet-control"},n.createElement("a",{className:"leaflet-bar-part leaflet-bar-part-single",title:"Locate",href:"#",onClick:t},n.createElement(f.G,{icon:E.KS0}))))}function k({bounds:e,center:t,setCenter:a,list:r}){(0,n.useEffect)((()=>{delete o().Icon.Default.prototype._getIconUrl,o().Icon.Default.mergeOptions({iconRetinaUrl:l(1963).Z,iconUrl:l(379).Z,shadowUrl:l(6179).Z})}),[]);const[c,u]=(0,n.useState)(null),i=(0,n.useMemo)((()=>n.createElement(s.h,{bounds:e,whenCreated:u,zoom:13,className:h()(b.Z.Map)},n.createElement(m.I,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),n.createElement(g,{position:t,setPosition:a},`${t.lat},${t.lng}`),r.map((({i:e,id:l,position:a,name:r,item:o})=>n.createElement(d.c,{key:e,center:a,pathOptions:{color:"purple"}},n.createElement(p.G,{minWidth:90},n.createElement("section",null,n.createElement("header",null,`[${l}] ${r} (${t.distanceTo(a).toFixed(0)/1e3} km)`),n.createElement("table",null,n.createElement("tbody",null,o.petrol_list.map((({type:e,price:t},l)=>n.createElement("tr",{key:l},n.createElement("th",null,e),n.createElement("td",null,t))))))))))),n.createElement(y,null))),[r,t]);return n.createElement("div",{className:h()(b.Z.Layout)},i)}var S=l(4772),C=l(8723);const w=[1,3,5,10,20,50,100,500],x=[0,1,2,3,4,5,6,7,8,9,10],T={"":"",pb:"pb","pb+":"pb+",on:"on","on+":"on+",lpg:"lpg","lpg+":"lpg+"},N=(0,a.k)((async e=>{const t=await fetch(`api/stations/data.json?${e}`);return await t.json()}));function Z({version:e="v1"}){const{results:t}=N.read(e),[l,a]=(0,n.useState)(""),[r]=(0,S.Z)(l),c=(0,n.useCallback)((({target:e})=>a(e.value)),[]),[u,i]=(0,n.useState)(w[w.length-1]),s=(0,n.useCallback)((({target:e})=>i(Number(e.value))),[]),[m,d]=(0,n.useState)((()=>Object.keys(T)[0])),p=(0,n.useCallback)((({target:e})=>d(e.value)),[]),[f,E]=(0,n.useState)(x[0]),[v,h]=(0,n.useState)(x[x.length-1]),b=(0,n.useCallback)((({target:e})=>h((t=>{const l=Number(e.value);return E(l),t<l?l:t}))),[]),g=(0,n.useCallback)((({target:e})=>E((t=>{const l=Number(e.value);return h(l),l>t?t:l}))),[]),y=(0,n.useMemo)((()=>t.map(((e,t)=>{const{station_id:l,x:n,y:a,network_name:r}=e;return{i:t,id:l,position:{lat:n,lng:a},name:r,item:e}})).filter((({name:e,item:{petrol_list:t}})=>{return e.toLowerCase().match(r)&&(!m||(l=t.find((e=>e.type===m)),Boolean(l)&&f<=l.price&&l.price<=v));var l}))),[t,r,m,f,v]),C=function(e){return(0,n.useMemo)((()=>o().featureGroup(e.map((({position:{lat:e,lng:t}})=>o().marker([e,t])))).getBounds()),[])}(y),[Z,$]=(0,n.useState)((()=>C.getCenter()));return n.createElement("div",null,n.createElement(k,{bounds:C,center:Z,setCenter:$,list:y}),n.createElement("fieldset",null,n.createElement("div",null,n.createElement("label",null,n.createElement("span",null,"Search"),n.createElement("input",{type:"search",value:l,onChange:c})),n.createElement("label",null,n.createElement("span",null,"Radius"),n.createElement("input",{type:"range",list:"range-list",min:w[0],max:w[w.length-1],value:u,onChange:s}),n.createElement("datalist",{id:"range-list"},w.map((e=>n.createElement("option",{key:e,value:e,label:[1,25,100].includes(e)?`${e} km`:void 0})))),n.createElement("span",null,`max ${u} km`))),n.createElement("div",null,n.createElement("label",null,n.createElement("span",null,"Type"),n.createElement("select",{value:m,onChange:p},Object.entries(T).map((([e,t])=>n.createElement("option",{key:e,value:e},t)))))),n.createElement("div",null,n.createElement("label",null,n.createElement("span",null,"Price From"),n.createElement("input",{type:"range",list:"price-list",min:x[0],max:x[x.length-1],value:f,onChange:b}),n.createElement("datalist",{id:"price-list"},x.map((e=>n.createElement("option",{key:e,value:e,label:[0,1,2,3,4,5].includes(e)?`${e} pln/l`:void 0}))))),n.createElement("label",null,n.createElement("span",null,"Price To"),n.createElement("input",{type:"range",list:"price-list",min:x[0],max:x[x.length-1],value:v,onChange:g}),n.createElement("span",null,`${f}-${v} pln/l`)))))}function $(){return n.createElement("div",{className:C.Z.Section},n.createElement("h2",null,"Stations"),n.createElement(Z,null))}},4772:(e,t,l)=>{l.d(t,{Z:()=>a});var n=l(2784);function a(e){const[t,l]=(0,n.useState)(e),a=(0,n.useRef)();return(0,n.useEffect)((()=>(clearTimeout(a.current),a.current=setTimeout((()=>l(e.toLowerCase())),400),()=>{clearTimeout(a.current)})),[e]),[t]}},4312:(e,t,l)=>{l.r(t),l.d(t,{default:()=>i});var n=l(9601),a=l.n(n),r=l(2609),o=l.n(r),c=l(9138),u=o()(a());u.i(c.Z),u.push([e.id,".cStyiPbxd0HI9tByMkkY{height:75vh;border:2px solid red}.cStyiPbxd0HI9tByMkkY header{font-weight:bold}",""]),u.locals={Map:"cStyiPbxd0HI9tByMkkY"};const i=u},7938:(e,t,l)=>{l.r(t),l.d(t,{default:()=>c});var n=l(9601),a=l.n(n),r=l(2609),o=l.n(r)()(a());o.push([e.id,".JTHop_UDHoyJmmN4pc6w{color:blue}",""]),o.locals={Section:"JTHop_UDHoyJmmN4pc6w"};const c=o},7815:(e,t,l)=>{l.d(t,{Z:()=>y});var n=l(6062),a=l.n(n),r=l(4036),o=l.n(r),c=l(6793),u=l.n(c),i=l(7892),s=l.n(i),m=l(1173),d=l.n(m),p=l(2464),f=l.n(p),E=l(4312),v={};v.styleTagTransform=f(),v.setAttributes=s(),v.insert=u().bind(null,"head"),v.domAPI=o(),v.insertStyleElement=d();var h=a()(E.default,v);if(!E.default.locals||e.hot.invalidate){var b=!E.default.locals,g=b?E:E.default.locals;e.hot.accept(4312,(t=>{E=l(4312),function(e,t,l){if(!e&&t||e&&!t)return!1;var n;for(n in e)if((!l||"default"!==n)&&e[n]!==t[n])return!1;for(n in t)if(!(l&&"default"===n||e[n]))return!1;return!0}(g,b?E:E.default.locals,b)?(g=b?E:E.default.locals,h(E.default)):e.hot.invalidate()}))}e.hot.dispose((function(){h()}));const y=E.default&&E.default.locals?E.default.locals:void 0},8723:(e,t,l)=>{l.d(t,{Z:()=>y});var n=l(6062),a=l.n(n),r=l(4036),o=l.n(r),c=l(6793),u=l.n(c),i=l(7892),s=l.n(i),m=l(1173),d=l.n(m),p=l(2464),f=l.n(p),E=l(7938),v={};v.styleTagTransform=f(),v.setAttributes=s(),v.insert=u().bind(null,"head"),v.domAPI=o(),v.insertStyleElement=d();var h=a()(E.default,v);if(!E.default.locals||e.hot.invalidate){var b=!E.default.locals,g=b?E:E.default.locals;e.hot.accept(7938,(t=>{E=l(7938),function(e,t,l){if(!e&&t||e&&!t)return!1;var n;for(n in e)if((!l||"default"!==n)&&e[n]!==t[n])return!1;for(n in t)if(!(l&&"default"===n||e[n]))return!1;return!0}(g,b?E:E.default.locals,b)?(g=b?E:E.default.locals,h(E.default)):e.hot.invalidate()}))}e.hot.dispose((function(){h()}));const y=E.default&&E.default.locals?E.default.locals:void 0}}]);